if (self.CavalryLogger) { CavalryLogger.start_js(["Lqoaw"]); }

__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",OZ_PACK_ID:"1456625217993235",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120}}),null);
__d("MCommentStatusLogger",["BanzaiLogger","ex","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.freeze({INIT:"init",SUBMIT:"submit",RESPOND:"respond",RENDER:"render"});a=function(a,b,c){this.prevEventType=a||null,this.perfLoggable=!!b,this.isEndStep=!!c};var h={};h[g.INIT]=new a();h[g.SUBMIT]=new a(g.INIT,!0);h[g.RESPOND]=new a(g.SUBMIT,!0);h[g.RENDER]=new a(g.RESPOND,!0,!0);var i=function(){__p&&__p();function a(a){this.$1=a,this.$2={},this.$3=0,this.$4=0,this.$5=null}var c=a.prototype;c.$6=function(a){return a in this.$2};c.logEvent=function(a,c){__p&&__p();if(this.$6(a)||!(a in h))return!1;var d=h[a],e=d.prevEventType;if(e&&!this.$6(e))return!1;this.$3=c&&Object.prototype.hasOwnProperty.call(c,"text")?c.text:this.$3;this.$4=c&&Object.prototype.hasOwnProperty.call(c,"photo")?c.photo:this.$4;this.$5=(c&&Object.prototype.hasOwnProperty.call(c,"stickerID")?c.stickerID:this.$5)||null;c=Date.now();var f=Math.round(c/1e3);this.$2[a]=c;c={event:a,text_length:this.$3,num_photos:this.$4,sticker_id:this.$5,interaction_key:this.$1,client_time:f};if(e&&d.perfLoggable){f=this.$7(e,a);c=babelHelpers["extends"]({duration:f},c)}b("BanzaiLogger").create({retry:!0}).log("MCommentWriteWaterfallLoggerConfig",c);return!0};c.$7=function(a,b){var c=this.$2;if(!this.$6(a)||!this.$6(b))return null;a=c[a];c=c[b];return a>c?null:c-a};return a}(),j={};c={newInteractionKey:function(){return b("uuid")()},_logCommentStatus:function(a,b,c){__p&&__p();if(!(b in h))return;var d=j[a];if(b===g.INIT)if(d)return;else d=new i(a),j[a]=d;if(!d)return;d=d.logEvent(b,c);d&&h[b].isEndStep&&this.clear(a)},logInitText:function(a){this._logCommentStatus(a,g.INIT,{text:1})},logInitPhoto:function(a){this._logCommentStatus(a,g.INIT,{photo:1})},logSubmit:function(a,b){this._logCommentStatus(a,g.SUBMIT,{text:b.text,photo:b.photo,stickerID:null})},logReceiveResponse:function(a,b){this._logCommentStatus(a,g.RESPOND,{text:b.text,photo:b.photo,stickerID:b.stickerID})},logRender:function(a){this._logCommentStatus(a,g.RENDER)},logInitAndSubmitSticker:function(a,b){this._logCommentStatus(a,g.INIT,{text:0,photo:0,stickerID:b}),this._logCommentStatus(a,g.SUBMIT,{text:0,photo:0,stickerID:b})},clear:function(a){a in j&&delete j[a]}};e.exports=c}),null);
__d("MXUILayout.react",["cx","MXUIDiv.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){return(a==="start"?"_52wc":"")+(a==="end"?" _52wd":"")+(a==="center"?" _52we":"")+(a==="stretch"?" _52wf":"")}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={align:c.props.align},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.hasAlignSelfChildren=function(){var a=b("React").Children.toArray(this.props.children);for(var c=0;c<a.length;c++){var d=a[c];if(Object.prototype.hasOwnProperty.call(d.props,"alignself"))return!0}return!1};d.render=function(){var a=this,c=this.props,d=c.align,e=c.className,f=c.children;c=babelHelpers.objectWithoutPropertiesLoose(c,["align","className","children"]);var g="_4g33",i;this.hasAlignSelfChildren()?i=b("React").Children.toArray(f).map(function(c){return Object.prototype.hasOwnProperty.call(c.props,"alignself")?c:b("React").cloneElement(c,{alignself:a.state.align})}):(i=f,g=b("joinClasses")(h(d),g));return b("React").createElement(b("MXUIDiv.react"),babelHelpers["extends"]({},c,{className:b("joinClasses")(e,g)}),i)};return c}(b("React").Component);a.defaultProps={align:"stretch"};e.exports=a}),null);
__d("MXUILayoutColumn.react",["cx","MJSEnvironment","MXUIDiv.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){return(a==="start"?"_52wc":"")+(a==="end"?" _52wd":"")+(a==="center"?" _52we":"")+(a==="stretch"?" _52wf":"")}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.className,d=a.alignself,e=a.children;a=babelHelpers.objectWithoutPropertiesLoose(a,["className","alignself","children"]);if(Object.prototype.hasOwnProperty.call(this.props,"alignself")){c=b("joinClasses")(c,"_5i2i",h(d));if(b("MJSEnvironment").IS_FIREFOX)return b("React").createElement(b("MXUIDiv.react"),babelHelpers["extends"]({},a,{className:c}),b("React").createElement(b("MXUIDiv.react"),{className:"_5xu4"},e))}return b("React").createElement(b("MXUIDiv.react"),babelHelpers["extends"]({},a,{className:c}),e)};return c}(b("React").Component);e.exports=a}),null);
__d("MXUILayoutFillColumn.react",["cx","MXUILayoutColumn.react","React","joinClasses"],(function(a,b,c,d,e,f,g){function a(a){var c="_4g34";return b("React").createElement(b("MXUILayoutColumn.react"),babelHelpers["extends"]({},a,{className:b("joinClasses")(a.className,c)}),a.children)}e.exports=a}),null);
__d("MUFIConversationGuideRowContainer.react",["invariant","Bootloader","ClientIDs","DOM","MAjaxify","MLegacyDataStore","MRequest","React","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="m-composer",i="textarea",j=null,k=null,l=null;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={committed:!1,hasText:!1},d.$1=new(b("SubscriptionsHandler"))(),d.$6=function(a,c){__p&&__p();if(!a)return;if(c){c=d.props.textarea.form;if(!c)return;c=b("DOM").convertFormToDictionary(c);c.comment_text=a;d.$2(c)}else{c=d.$5();if(!c)return;c.insertText(a);d.$3();d.props.textarea.dispatchEvent(new Event("input"))}},d.$7=function(a,c){__p&&__p();if(!a)return;if(c){c=d.props.textarea.form;if(!c)return;c=b("DOM").convertFormToDictionary(c);c.comment_text="@["+a.getUniqueID()+":"+a.getTitle()+"]";d.$2(c)}else{c=d.$5();if(!c)return;a={name:a.getTitle(),uid:a.getUniqueID()};c.insertMention(a);d.$3();d.props.textarea.dispatchEvent(new Event("input"))}},d.$8=function(a,c){__p&&__p();if(!a)return;if(c){c=d.props.textarea.form;if(!c)return;c=b("DOM").convertFormToDictionary(c);c.sticker_id=a;c.comment_text=void 0;d.$2(c)}},d.$9=function(){b("Stratcom").invoke("MCommentComposer:conversationGuideItemClick",null,{composerID:d.props.composerID})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){__p&&__p();var c=this.props.textarea.form;if(!c)return;var d=new(b("MRequest"))(c.action);d.setMethod("POST");d.addData({client_id:b("ClientIDs").getNewClientID(),conversation_guide_session_id:this.props.sessionID});a.sticker_id&&d.addData({sticker_id:a.sticker_id});a.privacy_value&&d.addData({privacy_value:a.privacy_value});a.comment_text&&d.addData({comment_text:a.comment_text});b("MAjaxify").ajaxify(null,c,d,"async_composer")};d.$3=function(){var a=b("DOM").scry(this.props.composer,"*","m-comment-conversation-guide-session-id")[0];a&&(a.value=this.props.sessionID)};d.$4=function(a){__p&&__p();var c=null;if(a&&a.feedback&&a.feedback.suggested_feedback&&a.feedback.suggested_feedback.guide_suggestions[0]){c=(a=a)!=null?(a=a.feedback)!=null?(a=a.suggested_feedback)!=null?(a=a.guide_suggestions)!=null?(a=a[0])!=null?a.__typename:a:a:a:a:a}a="none";switch(c){case"User":a="mention";break;case"Sticker":a="sticker";break;case"TextSuggestion":a="text";break;case"EmojiSuggestion":a="emoji";break}c=b("DOM").scry(this.props.composer,"*","m-comment-conversation-guide-shown")[0];c&&(c.value=a)};d.$5=function(){var a=b("DOM").scry(this.props.composer,"div","m-mentions-root")[0];a=a&&b("MLegacyDataStore").get(a);a=a||{};a=a.mentionsInstance;return a};d.componentDidMount=function(){this.$1.addSubscriptions(b("Stratcom").listen("submit",h,this.$10.bind(this)),b("Stratcom").listen("input",[h,i],this.$11.bind(this))),(l===null||k===null||j===null)&&this.$12()};d.$12=function(){var a=this;if(l!==null&&k!==null&&j!==null)return;this.$1.addSubscriptions(b("Bootloader").loadModules(["MUFIConversationGuideRow.react","RelayModern","RelayFBEnvironment"],function(b,c,d){l=b,k=c.QueryRenderer,j=d,a.forceUpdate()},"MUFIConversationGuideRowContainer.react"))};d.$10=function(a){a=a.getTarget();if(!a||!this.$13(a))return;this.setState({committed:!0})};d.$11=function(a){a=a.getTarget();if(!a||!this.$13(a))return;this.state.hasText&&this.props.textarea.value.length===0?this.setState({hasText:!1}):!this.state.hasText&&this.props.textarea.value.length>0&&this.setState({hasText:!0})};d.$13=function(a){return!!a&&b("DOM").contains(this.props.composer,a)};d.componentWillUnmount=function(){this.$1&&this.$1.release()};d.render=function(){var a=this;if(this.state.committed)return null;return l!==null&&k!==null&&j!==null?b("React").createElement(k,{environment:j,query:l.Query,render:function(c){var d=c.error;c=c.props;l!==null||g(0,11549);a.$4(c);return b("React").createElement(l,{data:c,error:d,composerHasText:a.state.hasText,ftentidentifier:a.props.ftentidentifier,handleAddMention:a.$7,handleAddSticker:a.$8,handleAddText:a.$6,trackingID:a.props.trackingID,handleMouseDown:a.$9,sessionID:a.props.sessionID})},variables:{callerID:"mtouch_above_composer",feedbackTargetID:this.props.ftentidentifier,tracking:this.props.trackingID}}):null};return c}(b("React").Component);e.exports=a}),null);
__d("ReactComponentRenderer",["React","ReactDOM","warning"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.klass=a,this.container=b,this.props={},this.component=null}var c=a.prototype;c.replaceProps=function(a,b){this.props={},this.setProps(a,b)};c.setProps=function(a,c){if(this.klass==null)return;Object.assign(this.props,a);a=b("React").createElement(this.klass,this.props);var d=this;b("ReactDOM").render(a,this.container,function(){d.component=this,c&&c.call(this)})};c.unmount=function(){b("ReactDOM").unmountComponentAtNode(this.container),this.klass=null};return a}();e.exports=a}),null);
__d("MConversationGuide",["DOM","MParent","MUFIConversationGuideRowContainer.react","ReactComponentRenderer","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="m-composer",h="textarea";function i(a,c,d,e){var f=new(b("ReactComponentRenderer"))(b("MUFIConversationGuideRowContainer.react"),a);f.setProps({composer:c,textarea:d,ftentidentifier:e.ftentidentifier,trackingID:e.trackingid,composerID:e.composerid,sessionID:e.sessionid});b("Run").onLeave(function(){f.unmount()})}a={init:function(a,c){var d=b("MParent").bySigil(a,g);if(!d)return;var e=b("DOM").find(d,"*",h);if(!e)return;i(a,d,e,c)}};e.exports=a}),null);
__d("EncryptedImgUtils",[],(function(a,b,c,d,e,f){var g="ek",h=/^data\:/,i=/\?(ek\=|.*&ek\=)/;a={extractKey:function(a){var b=a.getQueryData(),c=b[g];delete b[g];a.setQueryData(b);return c},isEncrypted:function(a){return!h.test(a)&&i.test(a)}};e.exports=a}),null);
__d("coerceImageishURL",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a&&typeof a==="object"&&a.sprited===!1&&typeof a.uri==="string"&&a.width!==void 0&&a.height!==void 0)return a;else return null}e.exports=a}),null);
__d("createCancelableFunction",["emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){var c=a;a=function(){for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];return c.apply(this,b)};a.cancel=function(){c=b("emptyFunction")};return a}e.exports=a}),null);
__d("warnUnsupportedProp",["warning"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){b("warning")(!1,"%s component does not support prop `%s`.%s",a,c,d?" "+d:"")}e.exports=a}),null);
__d("ImageCore.react",["Bootloader","EncryptedImgUtils","FBLogger","React","SubscriptionsHandler","coerceImageishSprited","coerceImageishURL","createCancelableFunction","getImageSourceURLFromImageish","ifRequired","joinClasses","validateImageSrcPropType","warnUnsupportedProp"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c={alt:""};var g=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=!1,d.$2=null,d.$3=new(b("SubscriptionsHandler"))(),d.state={decryptedSrc:null},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.$4=function(a){var c=this;this.$2&&this.$2.cancel();var d=b("getImageSourceURLFromImageish")(this.props.encryptedSrc),e=b("createCancelableFunction")(function(a){d===b("getImageSourceURLFromImageish")(c.props.encryptedSrc)&&c.setState({decryptedSrc:a})});a.load(d,e);this.$3.addSubscriptions({remove:function(){e.cancel()}});this.$2=e};d.$5=function(){var a=this;b("ifRequired")("EncryptedImg",function(b){a.$4(b)},function(){if(a.$1)return;a.$1=!0;a.$3.addSubscriptions(b("Bootloader").loadModules(["EncryptedImg"],function(b){return a.$4(b)},"ImageCore.react"))})};d.componentDidMount=function(){this.$5()};d.componentDidUpdate=function(a){a.encryptedSrc!==this.props.encryptedSrc&&this.$5()};d.componentWillUnmount=function(){this.$3.release()};d.render=function(){var a=this.props,c=a.encryptedSrc,d=a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["encryptedSrc","forwardedRef"]);var e=this.state.decryptedSrc;b("EncryptedImgUtils").isEncrypted(c)===!1&&(b("FBLogger")("image").mustfix("The `EncryptedImage` component was rendered with a non-encrypted image (%s). Only images that meet the encrypted image test (see `EncryptedImgUtils.isEncrypted()`) should be rendered with this component. Falling back to `ImageishRenderer`.",JSON.stringify(c)),e=c);return b("React").createElement(h,babelHelpers["extends"]({},a,{forwardedRef:d,src:e}))};return a}(b("React").Component);g.defaultProps=c;g.propTypes={encryptedSrc:b("validateImageSrcPropType")};function h(a){__p&&__p();var c=a.forwardedRef;a=babelHelpers.objectWithoutPropertiesLoose(a,["forwardedRef"]);var d=b("joinClasses")(a.className,"img");if(a.src==null)return b("React").createElement("img",babelHelpers["extends"]({},a,{className:d,ref:c}));var e=b("coerceImageishSprited")(a.src),f=!!e&&a.alt!=null&&String(a.alt)!==""?b("React").createElement("u",null,a.alt):null;if(typeof a.src==="string")return b("React").createElement("img",babelHelpers["extends"]({},a,{className:d,ref:c,src:a.src}),f);if(e){var g=e.spriteCssClass;e=e.spriteMapCssClass;a.src;var h=babelHelpers.objectWithoutPropertiesLoose(a,["src"]);return b("React").createElement("i",babelHelpers["extends"]({},h,{className:b("joinClasses")(d,e,g),ref:c}),f)}h=a.src?b("getImageSourceURLFromImageish")(a.src):"";e=b("coerceImageishURL")(a.src);return a.width===void 0&&a.height===void 0&&e?b("React").createElement("img",babelHelpers["extends"]({},a,{className:d,height:e.height,src:h,ref:c,width:e.width}),f):b("React").createElement("img",babelHelpers["extends"]({},a,{className:d,ref:c,src:h}),f)}h.defaultProps=c;h.propTypes={src:b("validateImageSrcPropType")};function a(a,c){Object.prototype.hasOwnProperty.call(a,"source")&&b("warnUnsupportedProp")("ImageCore","source","Did you mean `src`?");var d=a.src!=null?b("getImageSourceURLFromImageish")(a.src):"";if(b("EncryptedImgUtils").isEncrypted(d)){a.src;var e=babelHelpers.objectWithoutPropertiesLoose(a,["src"]);return b("React").createElement(g,babelHelpers["extends"]({},e,{encryptedSrc:d,forwardedRef:c}))}else return b("React").createElement(h,babelHelpers["extends"]({},a,{forwardedRef:c}))}a.displayName="ImageCore";e.exports=b("React").forwardRef(a)}),null);
__d("Image.react",["ImageCore.react"],(function(a,b,c,d,e,f){e.exports=b("ImageCore.react")}),null);
__d("MUFICommentReplyLink",["DOM","MAjaxify","MParent","MRequest","MUFIConfig","MUFIInlineRepliesFunnelLogConfig","Stratcom","SubscriptionsHandler","ge"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="feed-ufi-comments",h=b("MUFIInlineRepliesFunnelLogConfig").MUFIInlineReplyComposerFunnelLogger;function a(a){var c=a.composerID,d=a.placeholderID,e=a.node,f=a.loadComposerURI,g=a.loggingTargetFBID,h=a.replyAuthorName,j=a.replyAuthorID;b("MUFIConfig").canReactToComment&&(e.href&&e.setAttribute("data-uri",e.href),e.removeAttribute("href"));var k=new(b("SubscriptionsHandler"))();k.addSubscriptions(b("DOM").listen(e,"click",null,function(a){i({composerID:c,placeholderID:d,loadComposerURI:f,loggingTargetFBID:g,replyAuthorName:h,replyAuthorID:j,onPreventDefault:function(){a.prevent()}})}),b("DOM").listen(e,"mousedown",null,function(a){b("Stratcom").invoke("MCommentComposer:replyButtonClick",null,{composerID:c})}),b("Stratcom").listen("m:page:unload",null,function(){k.release()}),b("Stratcom").listen("m:feed-ufi-flyout:reset",null,function(){k.release()}))}function c(a){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Stratcom").listen("obj:finally",null,function(d){d=b("DOM").scry(a,"*","mufi-composer")[0];d&&d.focus&&d.focus();c.release()}))}function i(a){__p&&__p();var c=a.composerID,d=a.placeholderID,e=a.loadComposerURI,f=a.loggingTargetFBID;a=a.onPreventDefault;f&&h&&h.logReplyClicked(f);f=b("ge")(c);c=f&&b("DOM").scry(f,"*","mufi-composer")[0];if(c){a();b("MParent").bySigil(f,g)?b("Stratcom").invoke("MUFICommentReplyLink:show-inline-composer",null,{composerRoot:f}):c.focus();return}f=b("ge")(d);if(f&&e){a();b("MAjaxify").ajaxify(null,f,new(b("MRequest"))(e),null);return}}e.exports={initInlineRepliesWithMention:a,focusOrLoadInlineReplyComposerWithMention:i,bindFocusInlineReplyComposerAfterPageFinish:c}}),null);
__d("MAnimatedSticker.react",["fbt","PaddedStickerConfig","React","ReactDOM","StickerConstants","clearInterval","getElementPosition","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=83;c=5e3;var h=10,i={ON_LOAD:"on_load",FOREVER:"forever"};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={index:0,hasAnimated:!1},c.incrementFrameIndex=function(){c.shouldStopAnimating()?c.stopAnimation():c.setState(function(a){return{index:a.index+1}})},b)||babelHelpers.assertThisInitialized(c)}c.getScaledDimensions=function(a,b,c){var d,e,f;b>a?(f=c/b,d=a*f,e=b*f):(f=c/a,d=a*f,e=b*f);return{height:Math.round(d),width:Math.round(e)}};var d=c.prototype;d.componentDidMount=function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(),this.$2=0,this.$1=!0,(this.props.animationTrigger===i.ON_LOAD||this.props.animationTrigger===i.FOREVER)&&this.props.frameCount>1&&this.props.spriteURI&&this.startAnimation()};d.componentWillUnmount=function(){this.$1=!1,this.isAnimating()&&b("clearInterval")(this.$2)};d.isAnimating=function(){return!!this.$2};d.getWidth=function(){return Math.floor(this.props.sourceWidth)};d.getHeight=function(){return Math.floor(this.props.sourceHeight)};d.preloadSprite=function(){var a=new window.Image();a.onload=function(){this.$1&&!this.state.hasAnimated&&(this.setState({hasAnimated:!0}),this.$2=b("setIntervalAcrossTransitions")(this.incrementFrameIndex,this.props.frameRate))}.bind(this);b("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI?a.src=this.props.paddedSpriteURI:a.src=this.props.spriteURI};d.isScrolledIntoView=function(a,c,d){var e=b("getElementPosition")(b("ReactDOM").findDOMNode(this));d=a+e.y-d;c=a+c;e=d+e.height;this.props.frameCount>1&&!this.state.hasAnimated&&e-h<=c&&d+h>=a&&this.startAnimation()};d.startAnimation=function(){!this.state.hasAnimated&&this.props.spriteURI?this.preloadSprite():this.isAnimating()||(this.setState({hasAnimated:!0}),this.$2=b("setIntervalAcrossTransitions")(this.incrementFrameIndex,this.props.frameRate))};d.stopAnimation=function(){this.setState({index:0}),b("clearInterval")(this.$2),this.$2=0};d.shouldStopAnimating=function(){var a=this.state.index%this.props.frameCount;return this.props.animationTrigger===i.FOREVER?!1:a===0&&this.state.index*this.props.frameRate>this.props.animationTime};d.getStyle=function(){__p&&__p();var a=0,c=this.props.spriteURI;if(b("PaddedStickerConfig").ChatPaddedAnimatedStickerGK&&this.props.paddedSpriteURI){c=this.props.paddedSpriteURI;var d=240/Math.min(this.getHeight(),this.getWidth());a=Math.floor(b("StickerConstants").SPRITE_PADDING/d)}d=this.state.index%this.props.frameCount;var e=d%this.props.framesPerRow*(this.getWidth()+a*2)+a;d=Math.floor(d/this.props.framesPerRow)*(this.getHeight()+a*2)+a;if(!this.state.hasAnimated||!this.props.spriteURI)return{backgroundImage:"url("+this.props.sourceURI+")",backgroundRepeat:"no-repeat",backgroundSize:this.getWidth()+"px "+this.getHeight()+"px",height:this.getHeight(),width:this.getWidth()};else return{backgroundImage:"url("+c+")",backgroundPosition:-e+"px "+-d+"px",backgroundSize:(this.getWidth()+a*2)*this.props.framesPerRow+"px "+(this.getHeight()+a*2)*this.props.framesPerCol+"px",height:this.getHeight(),width:this.getWidth(),imageRendering:"-webkit-optimize-contrast"}};d.getAriaLabel=function(){return g._("{pack name} {sticker name} sticker",[g._param("pack name",this.props.packName),g._param("sticker name",this.props.accessibilityLabel)])};d.render=function(){return b("React").createElement("div",{"aria-label":this.getAriaLabel(),className:this.props.className,"data-testid":this.props.testID,role:"img",style:this.getStyle()})};return c}(b("React").Component);d.defaultProps={animationTime:c,accessibilityLabel:"",frameRate:a,packName:""};e.exports=d}),null);
__d("GridItem.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.alignv,d=a.alignh,e=a.className;a=babelHelpers.objectWithoutPropertiesLoose(a,["alignv","alignh","className"]);return b("React").createElement("td",babelHelpers["extends"]({},a,{className:b("joinClasses")(e,"_51m-"+(c==="top"?" vTop":"")+(c==="middle"?" vMid":"")+(c==="bottom"?" vBot":"")+(d==="left"?" hLeft":"")+(d==="center"?" hCent":"")+(d==="right"?" hRght":""))}))}e.exports=a}),null);
__d("Grid.react",["cx","GridItem.react","React","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,d=a.alignh,e=a.alignv,f=a.children,g=a.cols,h=a.fixed,i=a.spacing,j=b("React").Children.count(f),k=[],l=[],m=0;b("React").Children.forEach(f,function(a,f){__p&&__p();if(a===null||a===void 0)return;var n=a.type===c.GridItem;m+=n?Math.max(a.props.colSpan||0,1):1;var o=m===g?"_51mw":"";n=n?b("React").cloneElement(a,{key:a.key||f,alignh:a.props.alignh||d,alignv:a.props.alignv||e,className:b("joinClasses")(a.props.className,i,o)}):b("React").createElement(b("GridItem.react"),{alignh:d,alignv:e,className:b("joinClasses")(i,o),key:a.key||f},a);l.push(n);if(m%g===0||f+1===j){if(h===!0&&m<g){for(var o=m;o<g;o++)l.push(b("React").createElement(b("GridItem.react"),{key:f+o}));m=g}k.push(b("React").createElement("tr",{className:"_51mx",key:f},l));l=[];m=0}});return b("React").createElement("table",babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,"uiGrid _51mz"+(h===!0?" _5f0n":"")),cellSpacing:"0",cellPadding:"0"}),b("React").createElement("tbody",null,k))};return c}(b("React").Component);a.GridItem=b("GridItem.react");e.exports=a}),null);
__d("MStickersWebDriverIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STICKER_BUTTON:"MStickersWebDriverIDsStickerButton",STICKER_SELECTOR_CONTENT:"MStickersWebDriverIDsStickerSelectorContent",STICKER_NONSEARCH_PACK_BUTTON:"MStickersWebDriverIDsStickerNonsearchPackButton",STICKER_PACK_ITEM:"MStickersWebDriverIDsStickerPackItem"})}),null);
__d("shallowEqual",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=Object.prototype.hasOwnProperty;function h(a,b){if(a===b)return a!==0||b!==0||1/a===1/b;else return a!==a&&b!==b}function a(a,b){__p&&__p();if(h(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var d=0;d<c.length;d++)if(!g.call(b,c[d])||!h(a[c[d]],b[c[d]]))return!1;return!0}e.exports=a}),null);
__d("fbjs/lib/shallowEqual",["shallowEqual"],(function(a,b,c,d,e,f){"use strict";e.exports=b("shallowEqual")}),null);
__d("shallowCompare",["fbjs/lib/shallowEqual"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return!b("fbjs/lib/shallowEqual")(a.props,c)||!b("fbjs/lib/shallowEqual")(a.state,d)}e.exports=a}),null);
__d("ReactComponentWithPureRenderMixin",["shallowCompare"],(function(a,b,c,d,e,f){"use strict";a={shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)}};e.exports=a}),null);
__d("isKeyActivation",["Keys"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=0,d=a.charCode;a=a.keyCode;d!=null&&d!==0?c=d:a!=null&&a!==0&&(c=a);return[b("Keys").RETURN,b("Keys").SPACE].includes(c)}e.exports=a}),null);
__d("KeyActivationToClickHOC.react",["React","isKeyActivation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();var c,d;return d=c=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){__p&&__p();var a;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];a=c.call.apply(c,[this].concat(e))||this;a.$2=function(c){b("isKeyActivation")(c)&&(c.preventDefault(),c.stopPropagation(),a.$1&&a.$1.click())};a.$3=function(b){a.$1=b};a.$1=null;return a}var e=d.prototype;e.render=function(){return b("React").createElement(a,babelHelpers["extends"]({},this.props,{keyActivationToClickEvent:this.$2,keyActivationToClickRef:this.$3}))};return d}(b("React").Component),c.displayName="KeyActivationToClickHOC",d};e.exports=a}),null);
__d("ShimButton.react",["KeyActivationToClickHOC.react","React","emptyFunction","killswitch"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){c.props.keyActivationToClickRef(a),c.props.onRef(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children,d=a.form,e=a.inline,f=a.keyActivationToClickEvent;a.keyActivationToClickRef;a.onRef;var g=a.pressed;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","form","inline","keyActivationToClickEvent","keyActivationToClickRef","onRef","pressed"]);e=e?"span":"div";d==="link"&&(e="a");f=(d={},d[b("killswitch")("SHIM_BUTTON_USE_ONKEYDOWN_INSTEAD_OF_ONKEYPRESS")?"onKeyPress":"onKeyDown"]=f,d);return b("React").createElement(e,babelHelpers["extends"]({},a,{"aria-pressed":g,ref:this.$1,role:"button"},f),c)};return c}(b("React").Component);c.defaultProps={form:"none",inline:!1,keyActivationToClickEvent:b("emptyFunction"),keyActivationToClickRef:b("emptyFunction"),onClick:b("emptyFunction"),onRef:b("emptyFunction"),tabIndex:"0"};c.propTypes={children:a.any,form:a.oneOf(["none","link"]),inline:a.bool,tabIndex:a.oneOf(["-1","0",-1,0]),onClick:a.func,onRef:a.func};e.exports=b("KeyActivationToClickHOC.react")(c)}),null);
__d("StickerInterfaces",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGES:"messages",NEO:"neo",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames",SMS:"sms",MONTAGE:"montage"})}),null);
__d("XStickerPackImagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/{pack_id}/images/",{pack_id:{type:"Int",required:!0},sticker_size:{type:"Int",defaultValue:50}})}),null);
__d("XStickerQueryImagesController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/query/images/",{query:{type:"String",required:!0},sticker_interface:{type:"String"}})}),null);
__d("MStickerPack.react",["cx","ix","fbt","Grid.react","MAnimatedSticker.react","MRequest","MStickersInitialData","MStickersWebDriverIDs","MURI","React","Image.react","ReactComponentWithPureRenderMixin","ShimButton.react","StickerInterfaces","XStickerPackImagesController","XStickerQueryImagesController","debounceCore","qex"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Grid.react").GridItem,k=b("MStickersInitialData").MRU_STICKER_PACK,l=14,m={};a=b("React").createClass({displayName:"MStickerPack",mixins:[b("ReactComponentWithPureRenderMixin")],getInitialState:function(){return{input:"",loading:!1,searching:!1,stickers:[]}},getDefaultProps:function(){return{isComments:!1}},UNSAFE_componentWillMount:function(){this._debouncedGetStickersForQuery=b("debounceCore")(this.getStickersForQuery,500),this.getStickers(this.props.pack.id)},UNSAFE_componentWillReceiveProps:function(a){this.getStickers(a.pack.id)},componentWillUnmount:function(){this._debouncedGetStickersForQuery.reset()},updateRecentlyUsed:function(a){var c=m[k]||[];for(var d=0;d<c.length;++d)if(c[d].id===a.id){c.splice(d,1);break}c.unshift(a);m[k]||(m[k]=c,b("MStickersInitialData").packs.unshift(b("MStickersInitialData").mru))},getStickers:function(a){__p&&__p();if(!a||a==b("MStickersInitialData").SEARCH_PACK)return;if(a in m){this.setState({input:"",loading:!1,stickers:m[a],searching:!1});return}var c=b("XStickerPackImagesController").getURIBuilder().setInt("pack_id",a).getURI();c=new(b("MRequest"))(new(b("MURI"))(c));c.listen("done",function(b){m[a]=b.payload,this.isMounted()&&this.setState({input:"",loading:!1,stickers:b.payload,searching:!1})}.bind(this));this.setState({loading:!0});c.send()},getStickersForQuery:function(a,c){__p&&__p();if(a.length===0){this.setState({loading:!1,searching:!1});return}if(a!=this.state.input&&!c)return;c=b("XStickerQueryImagesController").getURIBuilder().setString("query",a).setString("sticker_interface",this.props.isComments?b("StickerInterfaces").COMMENTS:b("StickerInterfaces").MESSAGES).getURI();c=new(b("MRequest"))(new(b("MURI"))(c));c.listen("done",function(b){b=b.payload||[];this.isMounted()&&a==this.state.input&&this.setState({loading:!1,stickers:b,searching:!0})}.bind(this));this.setState({loading:!0});c.send()},selectSticker:function(a){this.updateRecentlyUsed(a),this.props.onSelect&&this.props.onSelect(a.id)},renderSticker:function(a,c){__p&&__p();var d=null;if(this.props.isComments&&!a.isCommentsCapable){if(this.props.pack.id==b("MStickersInitialData").MRU_STICKER_PACK)return}else if(!this.props.isComments&&!a.isMessengerCapable){if(this.props.pack.id==b("MStickersInitialData").MRU_STICKER_PACK)return}else d=this.selectSticker.bind(this,a);var e=null;this.props.isFlyout&&(e="composer-submit");var f=b("React").createElement(b("Image.react"),{src:a.uri,alt:i._("{pack name} {sticker name} sticker",[i._param("pack name",a.packName),i._param("sticker name",a.accessibilityLabel)])});if(b("qex")._("819489")){var g=b("MAnimatedSticker.react").getScaledDimensions(a.height,a.width,50);f=b("React").createElement(b("MAnimatedSticker.react"),{accessibilityLabel:a.accessibilityLabel,animationTrigger:"forever",src:a.uri,alt:i._("{pack name} {sticker name} sticker",[i._param("pack name",a.packName),i._param("sticker name",a.label)]),frameCount:a.frameCount,frameRate:a.frameRate,framesPerCol:a.framesPerCol,framesPerRow:a.framesPerRow,sourceHeight:g.height,sourceURI:a.uri,sourceWidth:g.width,spriteURI:a.spriteURI,packName:a.packName,paddedSpriteURI:a.paddedSpriteURI,stickerID:a.id})}return b("React").createElement("button",{className:"_5asg","data-testid":b("MStickersWebDriverIDs").STICKER_PACK_ITEM,"data-sigil":e,key:"sticker-"+c,onClick:d,role:"button"},f)},_getRenderedFakeStickers:function(){return Array.from(new Array(l),function(a,c){return b("React").createElement("div",{key:"fake-"+c,className:"_u2_"})})},_getRenderedStickerGridItems:function(){return this.state.stickers.map(this.renderSticker).concat(this._getRenderedFakeStickers())},render:function(){if(this.props.pack.id==b("MStickersInitialData").SEARCH_PACK)return b("React").createElement("div",{className:"_5ash"},b("React").createElement("div",{className:"_5ef_"},this._renderSearch(),this._renderTags(),this._renderStickerSearchResults()),this._renderLoading());return this.state.loading?b("React").createElement("div",{className:"_5ash"},this._renderLoading()):b("React").createElement("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll},b("React").createElement("div",{className:"_5ef_",onScroll:this._onScroll},this._getRenderedStickerGridItems()),this.renderMask())},_renderLoading:function(){return!this.state.loading?null:b("React").createElement("span",{className:"_5asi"},i._("Loading..."))},_renderStickerSearchResults:function(){if(!this.state.searching||this.state.loading)return null;return this.state.stickers.length===0?b("React").createElement("div",{className:"_4op9"},b("React").createElement(b("Image.react"),{src:h("87146")}),b("React").createElement("p",null,i._("No Stickers to Show"))):b("React").createElement("div",{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?" _5jkg":""),onScroll:this.props.onScroll},b("React").createElement("div",{className:"_5ef_"},this._getRenderedStickerGridItems()),this.renderMask())},renderMask:function(){return!(this.props.isComments&&!this.props.pack.isCommentsCapable)?null:b("React").createElement("div",{className:"_5jkh"},b("React").createElement("div",{className:"_5jki"},i._("This pack is only available in messages")))},_renderSearch:function(){return b("React").createElement("div",{className:"_2j-l"},b("React").createElement("span",{className:"_2j-m"}),this._renderCloseButton(),b("React").createElement("div",{className:"_4opa"},b("React").createElement("input",{className:"_2j-n",onChange:this._inputChanged,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,ref:"stickerQuery",value:this.state.input,placeholder:i._("Search stickers"),type:"text"})))},_renderCloseButton:function(){if(this.state.input.length>0)return b("React").createElement(b("ShimButton.react"),{className:"_4opb",inline:!0,onClick:this._clearInput})},_renderTags:function(){var a=this;if(this.state.searching||this.state.loading)return null;var c=b("MStickersInitialData").tags.filter(function(a){return a.sourceURI!==null}).sort(function(a,b){return a.order-b.order}).map(function(c,d){return b("React").createElement(j,{className:"_2j-o",key:d},b("React").createElement("div",{className:"_2j-p"},b("React").createElement(b("ShimButton.react"),{className:"_2j-q",onClick:a._selectTag.bind(a,c),style:{background:"#"+c.color_code}},b("React").createElement(b("Image.react"),{src:c.sourceURI}),b("React").createElement("span",null,c.name))))});return b("React").createElement(b("Grid.react"),{className:"_2j-r",cols:2,fixed:!0,ref:"grid"},c)},_inputChanged:function(a){this.setState({input:a.target.value}),this._debouncedGetStickersForQuery(a.target.value,!1)},_clearInput:function(){this.setState({input:"",loading:!1,searching:!1})},_selectTag:function(a){this.setState({input:a.name}),this.getStickersForQuery(a.name,!0)}});e.exports=a}),null);
__d("MStickerPackButton.react",["cx","Image.react","MStickersInitialData","MStickersWebDriverIDs","React","ShimButton.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.onClick=function(){c.props.onclick&&c.props.onclick(c.props.pack)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a="_5arz _5cni"+(this.props.selected?" _5ar-":"")+(this.props.disabled?" _4f39":""),c=this.props.pack,d;c.id==b("MStickersInitialData").MRU_STICKER_PACK?d=b("React").createElement("span",{className:"_3rsg"}):c.id==b("MStickersInitialData").SEARCH_PACK?d=b("React").createElement("span",{className:"_cmr"}):d=b("React").createElement(b("Image.react"),{src:c.icon,alt:c.name});c=c.id==b("MStickersInitialData").SEARCH_PACK?null:b("MStickersWebDriverIDs").STICKER_NONSEARCH_PACK_BUTTON;return b("React").createElement(b("ShimButton.react"),{className:a,"data-testid":c,form:"link",onClick:this.onClick,rel:"ignore"},b("React").createElement("div",{className:"_3pcz"},d))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("XStickerStorePermalinkController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stickers/",{tab:{type:"String"},redirect_uri:{type:"String"},is_comments:{type:"Bool",defaultValue:!1}})}),null);
__d("MStickerSelector.react",["cx","fbt","BanzaiLogger","DOM","MPageController","MParent","MStickerPack.react","MStickerPackButton.react","MStickersInitialData","MStickersWebDriverIDs","MViewport","React","ReactDOM","Stratcom","SubscriptionsHandler","UserAgent","XStickerStorePermalinkController","getActiveElement"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;var i="feed-ufi-comments",j="scroll-area";c=48;var k=5*c;d=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=null;d.onPackSelect=function(a){b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"select_pack",packid:a.id}),d.setState({selectedPack:a})};d.onPackScroll=function(){d.state.selectedPack&&d.state.selectedPack.id!=d.$2&&(d.$2=d.state.selectedPack.id,b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"scroll_pack",packid:d.state.selectedPack.id}))};d.onInputFocus=function(){d.setState({inputFocused:!0})};d.onInputBlur=function(){d.setState({inputFocused:!1})};d.scrollPrev=function(){if(!d.state.prevDisabled){var a=Math.max(d.state.scrollLeft-k,0);d.setState({scrollLeft:a,prevDisabled:a===0,nextDisabled:!1})}};d.scrollNext=function(){if(!d.state.nextDisabled){var a=b("ReactDOM").findDOMNode(d.refs.selectorRow);a=a.scrollWidth-a.parentNode.clientWidth;a=Math.min(d.state.scrollLeft+k,a);d.setState({scrollLeft:a,prevDisabled:!1,nextDisabled:d.$3(a)})}};d.$3=function(a){var c=b("ReactDOM").findDOMNode(d.refs.selectorRow);c=c.scrollWidth-c.parentNode.clientWidth;return a>=c};d.renderPack=function(a,c){return b("React").createElement(b("MStickerPackButton.react"),{disabled:d.props.isComments&&!a.isCommentsCapable||!d.props.isComments&&!a.isMessengerCapable,key:"pack-"+c,onclick:d.onPackSelect,pack:a,selected:a.id==d.state.selectedPack.id})};d.renderIndicator=function(){return!b("MStickersInitialData").storeIndicator?null:b("React").createElement("div",{className:"_5e-s"})};d.$5=function(){return b("React").createElement("a",{"aria-label":h._("Previous Sticker Packs"),className:"_5cni _5abu",disabled:d.state.prevDisabled,href:"#",onClick:d.scrollPrev,ref:"prevButton",rel:"ignore",role:"button"},b("React").createElement("span",{className:"_5abw"}))};d.$6=function(){return b("React").createElement("a",{"aria-label":h._("Next Sticker Packs"),className:"_5cni _5abx",disabled:d.state.nextDisabled,href:"#",onClick:d.scrollNext,ref:"nextButton",rel:"ignore",role:"button"},b("React").createElement("span",{className:"_5aby"}))};d.$7=function(){d.setState({nextDisabled:d.$3(d.state.scrollLeft)})};d.$4=function(a){a=b("getActiveElement")();a&&a.blur()};d.$8=function(){__p&&__p();if(d.$1)return;var a=b("ReactDOM").findDOMNode(d.refs.root);if(!a)return;if(b("MParent").bySigil(a,j)){var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("DOM").listen(a,"touchmove",null,function(a){a.stop()}),b("Stratcom").listen("m:page:unload",null,function(){d.$9()}));b("MParent").bySigil(a,i)&&c.addSubscriptions(b("Stratcom").listen("m:feed-ufi-flyout:reset",null,function(){d.$9()}));d.$1=c}};d.$9=function(){d.$1&&d.$1.release(),d.$1=null};var e=null;if(b("MStickersInitialData").packs&&b("MStickersInitialData").packs.length)for(var f=0;f<b("MStickersInitialData").packs.length;f++)if(!c.isComments&&b("MStickersInitialData").packs[f].isMessengerCapable||c.isComments&&b("MStickersInitialData").packs[f].isCommentsCapable){e=b("MStickersInitialData").packs[f];break}d.state={selectedPack:e,prevDisabled:!0,nextDisabled:!1,scrollLeft:0};return d}var d=c.prototype;d.render=function(){__p&&__p();if(!this.props.isOpen)return null;var a=b("MStickersInitialData").packs.length===0?b("React").createElement("div",{className:"_5ar_"},h._("No stickers available")):b("React").createElement(b("MStickerPack.react"),{pack:this.state.selectedPack,onSelect:this.props.callback,onScroll:this.onPackScroll,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,isComments:this.props.isComments,isFlyout:this.props.isFlyout}),c=b("MStickersInitialData").packs,d=[];for(var e=0;e<c.length;e++)c[e]&&(this.props.isComments&&c[e].isCommentsCapable?d.push(c[e]):c[e].isMessengerCapable&&d.push(c[e]));c=d;c=c.map(this.renderPack,this);e=b("XStickerStorePermalinkController").getURIBuilder().setString("redirect_uri",b("MPageController").getRenderedPath()).setBool("is_comments",this.props.isComments).getURI();d=null;this.props.showStore&&(d=b("React").createElement("a",{className:"_5cni _5b3_",href:e.toString()},b("React").createElement("span",{className:"_5b40"}),this.renderIndicator()));e=b("UserAgent").isPlatform("Android <2.4");return b("React").createElement("div",{className:this.props.className,"data-testid":b("MStickersWebDriverIDs").STICKER_SELECTOR_CONTENT,ref:"root"},b("React").createElement("div",{className:"_5as0"+(e?" _2-n8":""),ref:"selector"},b("React").createElement("div",{className:"_5as1",onScroll:this.state.inputFocused?this.$4:null},a),b("React").createElement("div",{className:"_5as2",ref:"selectorRow",style:{marginLeft:-this.state.scrollLeft}},b("React").createElement("div",{className:"_5as5"},c)),this.$5(),this.$6(),d))};d.componentDidMount=function(){this.props.isOpen&&(this.$8(),this.$7())};d.componentWillUnmount=function(){this.$9()};d.componentDidUpdate=function(a,c){if(this.props.isOpen){a.isOpen||this.$8();if(this.state.selectedPack!=c.selectedPack||this.props.isOpen!=a.isOpen){c=b("ReactDOM").findDOMNode(this.refs.selector);b("MParent").bySigil(c,i)?b("Stratcom").invoke("MStickerSelector:show-sticker-selector",null,{selectorNode:c}):b("MViewport").scrollToNodeIfNecessary(b("ReactDOM").findDOMNode(this.refs.selector))}this.props.isOpen!=a.isOpen&&(this.$7(),b("BanzaiLogger").log("MTouchStickersLoggerConfig",{event:"open_tray"}))}else a.isOpen&&this.$9()};return c}(b("React").Component);d.propTypes={callback:a.func.isRequired,isComments:a.bool.isRequired,isOpen:a.bool,onClose:a.func,showStore:a.bool.isRequired,isFlyout:a.bool};d.defaultProps={isComments:!0,showStore:!0};e.exports=d}),null);
__d("asset",[],(function(a,b,c,d,e,f){function a(a){throw new Error("asset("+JSON.stringify(a)+"): Unexpected asset reference.")}e.exports=a}),null);
__d("MStickerSelectorButton.react",["cx","fbt","ix","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isSelected:c.props.isSelected},c.onClick=function(a){c.setState({isSelected:!c.state.isSelected}),c.props.onClick&&c.props.onClick(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillUpdate=function(a,b){a!==this.props&&this.setState({isSelected:a.isSelected}),this.props.onToggle&&b!==this.state&&this.props.onToggle(b.isSelected)};d.render=function(){var a;!this.state.isSelected?a=i("90727"):a=i("90728");return b("React").createElement("button",{"aria-label":h._("Add Sticker"),type:"button",className:"_5ecn _1n29 _2fv6","data-sigil":"touchable",onClick:this.onClick},b("React").createElement(b("Image.react"),{src:a,className:"_2fv7"}),b("React").createElement(b("Image.react"),{src:this.state.isSelected?i("432358"):i("432368"),className:"_2fv8"}))};return c}(b("React").Component);c.propTypes={onToggle:a.func,isSelected:a.bool};c.defaultProps={isSelected:!1};e.exports=c}),null);
__d("MStickerMount",["BanzaiLogger","ClientIDs","CommentPrivacyValue","DOM","MAjaxify","MCommentStatusLogger","MRequest","MStickerSelector.react","MStickerSelectorButton.react","ReactComponentRenderer","Run","Stratcom","SubscriptionsHandler","requireWeak","$"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={logPost:function(a,b){return void 0}};b("requireWeak")("MPrivateCommentsLogger",function(a){g=a});var h="m-textarea-input",i=function(a,c,d,e){__p&&__p();var f=new(b("MRequest"))(a.action);f.setMethod("POST");f.addData({client_id:b("ClientIDs").getNewClientID(),sticker_id:c});var h=b("DOM").convertFormToDictionary(a);h.privacy_value&&f.addData({privacy_value:h.privacy_value});g.logPost(parseInt(h.privacy_value,10)===b("CommentPrivacyValue").OWNER_OR_COMMENTER,a.id);if(d){h=b("MCommentStatusLogger").newInteractionKey();b("MCommentStatusLogger").logInitAndSubmitSticker(h,c);f.addData({logging_interaction_key:h});k(h)}b("MAjaxify").ajaxify(null,a,f,"async_composer");b("Stratcom").invoke("m:ufi:sticker-comment",null,{textInput:e})},j=function(a,c,d,e,f,g,h){__p&&__p();h===void 0&&(h=!1);var i,j=new(b("ReactComponentRenderer"))(b("MStickerSelector.react"),c);j.setProps({callback:e,isComments:f,onClose:function(){j&&j.setProps({isOpen:!1}),i&&i.setProps({isSelected:!1})},showStore:g,isFlyout:h});i=new(b("ReactComponentRenderer"))(b("MStickerSelectorButton.react"),a);i.setProps({onToggle:function(a){j.setProps({isOpen:a})}});var k=new(b("SubscriptionsHandler"))();k.addSubscriptions(b("DOM").listen(d,"focus",null,function(){i.setProps({isSelected:!1})}),b("Stratcom").listen("m:ufi:sticker-comment",null,function(){i.setProps({isSelected:!1})}));b("Run").onLeave(function(){k.release(),i.unmount(),j.unmount()})};function k(a){__p&&__p();var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Stratcom").listen("m:ufi:live-comments:render",null,function(d){d=d.getData()||{};d=d.logKeys;d&&d.forEach(function(d){d===a&&(b("MCommentStatusLogger").logRender(a),c.release())})}),b("Stratcom").listen("m:ufi:iui:comment-added",null,function(d){d=d.getData().loggingInteractionKey;d===a&&(b("MCommentStatusLogger").logRender(a),c.release())}),b("Stratcom").listen("m:page:unload",null,function(){c.release()}));return c}a={initMessages:function(a,c,d,e){var f=b("$")(d);d=function(a){var c=f.form,d=b("DOM").convertFormToDictionary(c);d.sticker_id=a;e.sendRequest(c.action,d)};j(a,c,f,d,!1,!0)},initCommentsFlyout:function(a,c,d,e,f){f===void 0&&(f=!1);var g=null;e&&(b("Stratcom").hasSigil(e,h)?g=e:g=b("DOM").scry(e,"*",h)[0]);g||(g=b("$")(d));var j=g.form;c.onclick=function(){i(j,a,f,g),b("BanzaiLogger").log("NullStateCommentsLoggerConfig",{event:"sticker_selection",sticker_id:a.toString()})}},initComments:function(a,c,d,e,f,g){f===void 0&&(f=!1);g===void 0&&(g=!1);var k=null;e&&(b("Stratcom").hasSigil(e,h)?k=e:k=b("DOM").scry(e,"*",h)[0]);k||(k=b("$")(d));var l=k.form;e=function(a){i(l,a,f,k)};j(a,c,k,e,!0,!0,g)},initNewMessage:function(a,b,c,d){var e=function(a){d.sendSticker(a)};j(a,b,c,e,!1,!1)}};e.exports=a}),null);
__d("MUFICommentLikeLink",["DOM","MLiveData","MUFIReactionsUtils","MUFIRequest","Stratcom","Style","SubscriptionsHandler","UFIReactionTypes"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.likeLink=a.likeLink,this.requestID=a.requestID,this.feedbackTargetID=a.feedbackTargetID,this.feedbackTarget=b("MLiveData").get(a.feedbackTargetID),this.subscriptions=new(b("SubscriptionsHandler"))(),this.subscriptions.addSubscriptions(b("DOM").listen(this.likeLink,"click",null,this.onClick.bind(this)),this.feedbackTarget.listen("change",this.onChange.bind(this)),b("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this))),this.likeLink.href&&(this.likeLink.setAttribute("data-uri",this.likeLink.href),this.likeLink.removeAttribute("href"))}var c=a.prototype;c.onChange=function(){if(this.feedbackTarget.getData().request_id===this.requestID)return;var a=this.feedbackTarget.getData();a=a.viewerreaction;a&&!b("UFIReactionTypes").reactions[a]&&(a=null);var c,d;!a?(c="",d=b("UFIReactionTypes").reactions[b("UFIReactionTypes").LIKE].display_name):(c=b("UFIReactionTypes").reactions[a].color,d=b("UFIReactionTypes").reactions[a].display_name);b("DOM").setContent(this.likeLink,d);b("Style").set(this.likeLink,"color",c)};c.onClick=function(a){__p&&__p();a.prevent();var c=this.feedbackTarget.getData(),d=c.has_viewer_liked,e=(c.comment_id||c.ft_ent_identifier).split("_")[1],f=d?b("UFIReactionTypes").NONE:b("UFIReactionTypes").LIKE,g=a.getNode("tag:a");g||(g=a.getNode("tag:div"));if(!g)return;b("Stratcom").hasSigil(this.likeLink,"kaios-like-react-trigger")&&d&&a.stop();d=b("MUFIRequest").getURI(g.getAttribute("href")||g.getAttribute("data-uri"));d.addQueryData("reaction_comment_id",e);d.addQueryData("viewer_reaction",f);b("MUFIRequest").send(this.feedbackTargetID,b("MUFIReactionsUtils").getReactionDataForComment(c,f),d)};c.onUnload=function(){this.subscriptions&&this.subscriptions.release()};return a}();e.exports=a}),null);
__d("MUFICommentReactionBadge",["cx","CSS","DOM","MLiveData","Stratcom","SubscriptionsHandler","UFIReactionIcons","UFIReactionTypes","createIxElement"],(function(a,b,c,d,e,f,g){__p&&__p();var h=3,i=16,j=b("UFIReactionTypes").ordering.reduce(function(a,b,c){a[b]=c;return a},{});a=function(){"use strict";__p&&__p();function a(a){this.feedbackTarget=b("MLiveData").get(a.feedbackTargetID),this.reactionBadge=a.reactionBadge,this.requestID=a.requestID,this.subscriptions=new(b("SubscriptionsHandler"))(),this.subscriptions.addSubscriptions(this.feedbackTarget.listen("change",this.onChange.bind(this)),b("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)))}var c=a.prototype;c.onChange=function(){__p&&__p();if(this.feedbackTarget.getData().request_id===this.requestID)return;var a=this.feedbackTarget.getData(),c=a.reactioncountmap,d=b("UFIReactionTypes").ordering.filter(function(a){a=c[a];return a&&a["default"]>0}).sort(function(a,b){var d=c[a]["default"],e=c[b]["default"];return d===e?j[a]-j[b]:e-d}).slice(0,h).map(function(a,c){c=b("createIxElement")(b("UFIReactionIcons")[a][i]);a=b("DOM").create("span",{className:"_4edl"});b("DOM").appendContent(a,c);return a});b("CSS").conditionClass(this.reactionBadge,"_4edm",!!a.reactioncount);b("DOM").setContent(this.reactionBadge.firstChild,d);b("DOM").setContent(this.reactionBadge.lastChild,a.reactioncountreduced)};c.onUnload=function(){this.subscriptions&&this.subscriptions.release()};return a}();e.exports=a}),null);
__d("MUFISutro",["cx","CSS"],(function(a,b,c,d,e,f,g){"use strict";a={commentRepliesExpanded:function(a){a=document.getElementById(a);a&&b("CSS").addClass(a,"_2a_l")}};e.exports=a}),null);
__d("MUfiNewCommentScroll",["DOM","MViewport","$","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){__p&&__p();var c=!0;if(!window.FW_ENABLED){var d=b("DOM").scry(document,"*","m-composer");c=d&&d.length<=1}if(c&&!!a.commentID){var e=b("$")(a.commentID);b("setTimeoutAcrossTransitions")(function(){b("MViewport").scrollToNode(e)},0)}};f.main=a}),null);
__d("areEqual",[],(function(a,b,c,d,e,f){__p&&__p();var g=[],h=[];function a(a,b){var c=g.length?g.pop():[],d=h.length?h.pop():[];a=i(a,b,c,d);c.length=0;d.length=0;g.push(c);h.push(d);return a}function i(a,b,c,d){__p&&__p();if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return!1;if(typeof a!=="object"||typeof b!=="object")return!1;var e=Object.prototype.toString,f=e.call(a);if(f!=e.call(b))return!1;switch(f){case"[object String]":return a==String(b);case"[object Number]":return isNaN(a)||isNaN(b)?!1:a==Number(b);case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}e=c.length;while(e--)if(c[e]==a)return d[e]==b;c.push(a);d.push(b);e=0;if(f==="[object Array]"){e=a.length;if(e!==b.length)return!1;while(e--)if(!i(a[e],b[e],c,d))return!1}else{if(a.constructor!==b.constructor)return!1;if(Object.prototype.hasOwnProperty.call(a,"valueOf")&&Object.prototype.hasOwnProperty.call(b,"valueOf"))return a.valueOf()==b.valueOf();f=Object.keys(a);if(f.length!=Object.keys(b).length)return!1;for(var e=0;e<f.length;e++){if(f[e]==="_owner")continue;if(!Object.prototype.hasOwnProperty.call(b,f[e])||!i(a[f[e]],b[f[e]],c,d))return!1}}c.pop();d.pop();return!0}e.exports=a}),null);