if (self.CavalryLogger) { CavalryLogger.start_js(["C1\/nZ"]); }

__d("OGComposerConstants",[],(function(a,b,c,d,e,f){e.exports={EditAttachmentURI:"/ajax/composerx/attachment/edit/",ExercisesTypeID:718343998201893,TransitivityStateIntransitive:2}}),null);
__d("PrivacyConst",[],(function(a,b,c,d,e,f){e.exports={BaseValue:{FRIEND_LIST:129,FRIENDS_PLUS_GAMER_FRIENDS:128,FRIENDS_MINUS_ACQUAINTANCES:127,FACEBOOK_EMPLOYEES:112,FACEBOOK_EMPLOYEE_DOGFOODING:113,CUSTOM:111,EVERYONE:80,NETWORKS_FRIENDS_OF_FRIENDS:60,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SELF:10,NOBODY:0},CustomPrivacyTokens:{FRIENDS:247124075410460,FRIENDS_OF_FRIENDS:498125493540100},FriendsValue:{EVERYONE:80,NETWORKS_FRIENDS:55,FRIENDS_OF_FRIENDS:50,ALL_FRIENDS:40,SOME_FRIENDS:30,SELF:10,NO_FRIENDS:0},PostParam:{EVERYONE:300645083384735,NETWORKS_FRIENDS:123780391104836,FRIENDS_OF_FRIENDS:275425949243301,FRIENDS:291667064279714,FRIENDS_MINUS_ACQUAINTANCES:284920934947802,ONLY_ME:286958161406148,FB_ONLY:411331705596297,EVENT_PUBLIC:1493271774218406,EVENT_INVITE_ONLY:599950423437029},PrivacyField:{CURRENT_COMPOSER:8787670733,DEFAULT_COMPOSER:875106179167765,TIMELINE_TAGGED_CONTENT_VISIBILITY:8787530733,WALL_POSTS:8787370733,TAG_EXPANDED_CONTENT:8787795733,SEARCH_BY_PHONE:8787815733,SEARCH_BY_EMAIL:8787820733,CAN_FRIEND:8787540733,DEPRECATED_APP_DEFAULT:8787700733,SEARCH_BY_NAME:8787755733,SEARCH_BY_CONTACT_INFO:8787760733,SCREENNAME:8787335733,CURRENT_ADDRESS:8787355733,FRIENDS:8787365733,WEBSITE:8787375733,STATUS_UPDATES:8787395733,BIRTHDAY:8787510733,BIRTHYEAR:8787805733,CAN_COMMENT:8787535733,RELATIONSHIPS:8787550733,PROFILE_PICTURE_ALBUM:8787565733,DASHBOARD_ACTIVITY:8787575733,FAMILY:8787585733,INTERESTED_IN_LOOKING_FOR:8787590733,PLACES:8787620733,NAME_DAY:8787810733,LANGUAGES:8787625733,QUOTATIONS:8787630733,ABOUT_ME:8787635733,POLITICAL:8787640733,RELIGIOUS:8787645733,CURRENT_CITY:8787650733,HOMETOWN:8787655733,PROFILE_LIKES_AND_INTERESTS:8787660733,BLURB:8787665733,OTHER_LIKES_AND_INTERESTS:8787680733,SUBSCRIBERS:8787690733,SUBSCRIBED_TO:8787695733,PERSONAL_CONTACT_DEFAULT:8787765733,PAGE_CONTACT_DEFAULT:8787770733,AUTO_GENERATED_FB_EMAIL:8787775733,SKILLS:8787780733,CUSTOM_GENDERS:237760973066217,LOCATION_DO_NOT_WRITE_DIRECTLY:8787785733,SOCIAL_ADS:7719929599,PLATFORM_ADS:126540474531,BASS_ADS:183468681673909,ACTIVITIES:144331422306930,INTERESTS:113693108715766,MUSIC:172372399483077,BOOKS:100725463352700,GAMES:199298603444535,MOVIES:201146206594049,TV_SHOWS:129665560441221,SPORTS_PLAYED:129991670408857,FAVORITE_TEAMS:225288534151802,FAVORITE_ATHLETES:203380763033334,PEOPLE_I_ADMIRE:210380795648667,FAVORITE_FOODS:585935528106425,FAVORITE_RESTAURANTS:172588449584647,FAVORITE_WEBSITES:180412195459106,CLOTHING_BRANDS:397391233714082,LAST_POST_PRIVACY:314763985364212,SECOND_TO_LAST_POST_PRIVACY:321179124722698,PREVIOUS_SECONDARY_COMPOSER:864562253561430,RECENT_COMPOSER:358304524327898,COMPOSER_CUSTOM_INCLUSION:1067668039947624,COMPOSER_CUSTOM_EXCLUSION:1082068668536535,CAN_LIKE_AND_COMMENT_PUBLIC_PROFILE_MEDIA:1269423589794183,CAN_TAG_PUBLIC_PROFILE_MEDIA:260920744319731,CAN_DOWNLOAD_PUBLIC_PROFILE_MEDIA:410249702663051,CAN_SHARE_PUBLIC_PROFILE_MEDIA:1648969422065270,NOW_COMPOSER:421290164697736,BACKSTAGE_PRIVACY:809506612451171,FACEREC_ENROLLMENT:1709697052669794,DEVICE_PHOTO_PROCESSING:1798505450455620,SPACES_VR_OFFLINE_VISIT_PRIVACY:351913698615451,RESHARES_ON_TIMELINE_VISIBILITY:230094651068076,CAN_POST_TRIBUTES:298481070877996,CAN_SEE_TRIBUTE_POSTS:1909416226028186,TRIBUTES_TAGGED_CONTENT_VISIBILITY:322268258473567,RESHARE_TO_STORIES:282421212606762,RESHARE_STORY_TO_STORIES:855792411486922,EVENT_RESPONSE:316303542562773},TagExpansion:{NONE:0,TAGGEES:1,FRIENDS_OF_TAGGEES:2,FRIENDS_TAGGED:6},ExpansionType:{NONE:0,TAGS_ONLY:1}}}),null);
__d("MCompositionUserActions",["MComposition","MCompositionConfigFields","MCompositionConstants","MCompositionDispatcher","MCompositionShareFields","MCompositionStoreID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MCompositionConstants").ActionTypes;function h(a,c){b("MCompositionDispatcher").handleUpdateFromUserAction({actionType:a,data:c})}a={configDisablePhotosUpdate:function(a){var c={};c[b("MCompositionStoreID").CONFIG]={};c[b("MCompositionStoreID").CONFIG][b("MCompositionConfigFields").DISABLE_PHOTOS]=a;h(g.DISABLE_PHOTOS,c)},finalize:function(){h(g.COMPOSITION_FINALIZE,{})},initialize:function(a){h(g.COMPOSITION_INITIALIZE,a||{})},shareLinkUpdate:function(a){var c={};c[b("MCompositionStoreID").SHARE]={};c[b("MCompositionStoreID").SHARE][b("MCompositionShareFields").SHARE_URI]=a;h(g.SHARE_LINK_UPDATE,c)},shareRemoveLinkPreview:function(a){var c={};c[a]=!0;a={};a[b("MCompositionStoreID").SHARE]={};a[b("MCompositionStoreID").SHARE][b("MCompositionShareFields").DISABLED_LINKS]=c;h(g.SHARE_REMOVE_PREVIEW,a)},minutiaeRemove:function(){h(g.MINUTIAE_REMOVE,{})},minutiaeSet:function(a){var c={};c[b("MCompositionStoreID").MINUTIAE]=a;h(g.MINUTIAE_SET,c)},photoUpdate:function(a){var c={};c[b("MCompositionStoreID").PHOTO]=a;h(g.PHOTO_CHANGE,c)},audioUpdate:function(a){var c={};c[b("MCompositionStoreID").AUDIO]=a;h(g.AUDIO_CHANGE,c)},placeRemove:function(){h(g.PLACE_REMOVE,{})},placeSet:function(a){h(g.PLACE_SET,new(b("MComposition"))().setStoreData(b("MCompositionStoreID").PLACE,a).serialize())},statusUpdate:function(a){h(g.STATUS_CHANGE,new(b("MComposition"))().setStoreData(b("MCompositionStoreID").STATUS,a).serialize())},withUpdate:function(a){var c={};c[b("MCompositionStoreID").WITH_TAGS]=a;h(g.WITH_CHANGE,c)},groupSellUpdate:function(a){h(g.GROUP_SELL_UPDATE,new(b("MComposition"))().setStoreData(b("MCompositionStoreID").GROUP_SELL,a).serialize())},privacyUpdate:function(a){var c={};c[b("MCompositionStoreID").PRIVACY]=a;h(g.PRIVACY_CHANGE,c)},formatUpdate:function(a){var c;h(g.FORMAT_CHANGE,(c={},c[b("MCompositionStoreID").FORMAT]=a,c))}};e.exports=a}),null);
__d("MCompositionAudioFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUDIO_POST:"audio_post"})}),null);
__d("MCompositionAudioStore",["MCompositionAudioFields","MCompositionConstants","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").AUDIO,b("MCompositionAudioFields")).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.AUDIO_CHANGE,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionMinutiaeFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ACTION_TYPE_ID:"action_type",CUSTOM_ICON_ID:"custom_icon",FBT_PHRASE:"fbt_phrase",ICON:"icon_src",ICON_LEGACY:"icon",OBJECT_ID:"object",OBJECT_NAME:"object_str",SHOW_ATTACHMENT:"show_attachment",SUGGESTION_MECHANISM:"suggestion_mechanism",TRIGGERS_EVENT_TAG_EXPANSION:"triggers_event_tag_expansion",USE_DEFAULT_ICON:"use_default_icon"})}),null);
__d("MCompositionMinutiaeStore",["MCompositionConstants","MCompositionMinutiaeFields","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").MINUTIAE,b("MCompositionMinutiaeFields")).setRequiredFields(b("MCompositionMinutiaeFields").ACTION_TYPE_ID,b("MCompositionMinutiaeFields").ICON,b("MCompositionMinutiaeFields").ICON_LEGACY,b("MCompositionMinutiaeFields").OBJECT_ID,b("MCompositionMinutiaeFields").OBJECT_NAME).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.MINUTIAE_REMOVE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.MINUTIAE_SET,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPhotoFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PHOTO_INFO_LIST:"photo_info_list"})}),null);
__d("MCompositionPhotoStore",["MCompositionConstants","MCompositionPhotoFields","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").PHOTO,b("MCompositionPhotoFields")).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.PHOTO_CHANGE,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionPlaceFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADDRESS:"address",FREEFORM_NAME:"FREEFORM_NAME",ID:"id",IS_CURRENT:"is_current",IS_EVENT:"isEventResult",IS_NEW:"new_place",IS_NON_SPECIFIC:"isNonSpecific",JSON_LOCATION:"JSON_LOCATION",LATITUDE:"latitude",LONGITUDE:"longitude",NAME:"name",PHONE:"phone",SUGGESTION_MECHANISM:"suggestion_mechanism",SUGGESTED_OG_ACTION_TYPE_ID:"og_action_type_id",TOPIC_TOKENS:"topic_tokens",WEBSITE:"website",ZIP:"zip"})}),null);
__d("MCompositionPlaceStore",["FBJSON","MCompositionConfigStore","MCompositionConstants","MCompositionDispatcher","MCompositionPlaceFields","MCompositionStore","MCompositionStoreID","MPlaces","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").PLACE,b("MCompositionPlaceFields")).setRequiredFields(b("MCompositionPlaceFields").NAME).setHandlerFor(a.COMPOSITION_INITIALIZE,function(a){b("MCompositionDispatcher").waitFor([b("MCompositionConfigStore").toUpdate()]);return a}).setHandlerFor(a.PLACE_REMOVE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.PLACE_SET,function(a){var c=a[b("MCompositionPlaceFields").LATITUDE],d=a[b("MCompositionPlaceFields").LONGITUDE];c&&d?a[b("MCompositionPlaceFields").JSON_LOCATION]=b("FBJSON").stringify({latitude:c,longitude:d}):a[b("MCompositionPlaceFields").JSON_LOCATION]=b("MPlaces").getCurrentJSONLocation();return a}).register();e.exports=c}),null);
__d("MCompositionPrivacyFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIVACY_FBID:"PRIVACY_FBID",CLOSE_DIALOG:"CLOSE_DIALOG",ALREADY_SAVED_STICKY:"ALREADY_SAVED_STICKY",NEVER_SAVE_STICKY:"NEVER_SAVE_STICKY",CUSTOM_LABEL:"CUSTOM_LABEL",CUSTOM_OPTION:"CUSTOM_OPTION"})}),null);
__d("MCompositionPrivacyStore",["MCompositionConstants","MCompositionPrivacyFields","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").PRIVACY,b("MCompositionPrivacyFields")).setRequiredFields(b("MCompositionPrivacyFields").PRIVACY_FBID).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.PRIVACY_CHANGE,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MCompositionShareStore",["MCompositionConstants","MCompositionShareFields","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();a=b("MCompositionConstants").ActionTypes;var g=new(b("MCompositionStore"))(b("MCompositionStoreID").SHARE,b("MCompositionShareFields")).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.SHARE_LINK_UPDATE,function(a){return babelHelpers["extends"]({},g.getAll(),a)}).setHandlerFor(a.SHARE_REMOVE_PREVIEW,function(a){a=a||{};var c=b("MCompositionShareFields").DISABLED_LINKS,d=g.getAll(),e={};e[c]=babelHelpers["extends"]({},d[c],a[c]);e[b("MCompositionShareFields").SHARE_URI]=null;e[b("MCompositionShareFields").LINK_NO_CHANGE]=!1;return babelHelpers["extends"]({},d,e)}).register();e.exports=g}),null);
__d("MCompositionStatusFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TEXT:"TEXT",LONGEST_LENGTH:"LONGEST_LENGTH"})}),null);
__d("MCompositionStatusStore",["MCompositionConstants","MCompositionStatusFields","MCompositionStore","MCompositionStoreID","emptyFunction"],(function(a,b,c,d,e,f){c=b("MCompositionConstants").ActionTypes;function a(a){a=a||{};Object.prototype.hasOwnProperty.call(a,b("MCompositionStatusFields").TEXT)||(a[b("MCompositionStatusFields").TEXT]="");a[b("MCompositionStatusFields").LONGEST_LENGTH]=Math.max(g.get(b("MCompositionStatusFields").LONGEST_LENGTH,0),a[b("MCompositionStatusFields").TEXT].length);return a}var g=new(b("MCompositionStore"))(b("MCompositionStoreID").STATUS,b("MCompositionStatusFields")).setRequiredFields(b("MCompositionStatusFields").LONGEST_LENGTH,b("MCompositionStatusFields").TEXT).setHandlerFor(c.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(c.COMPOSITION_INITIALIZE,a).setHandlerFor(c.STATUS_CHANGE,a).register();e.exports=g}),null);
__d("MCompositionWithFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOKENS:"TOKENS"})}),null);
__d("MCompositionWithStore",["MCompositionConstants","MCompositionStore","MCompositionStoreID","MCompositionWithFields","emptyFunction"],(function(a,b,c,d,e,f){a=b("MCompositionConstants").ActionTypes;c=new(b("MCompositionStore"))(b("MCompositionStoreID").WITH_TAGS,b("MCompositionWithFields")).setMutable(!0).setHandlerFor(a.COMPOSITION_FINALIZE,b("emptyFunction").thatReturnsNull).setHandlerFor(a.COMPOSITION_INITIALIZE,b("emptyFunction").thatReturnsArgument).setHandlerFor(a.WITH_CHANGE,b("emptyFunction").thatReturnsArgument).register();e.exports=c}),null);
__d("MComposerEligibility",["MCompositionAudioFields","MCompositionAudioStore","MCompositionMinutiaeFields","MCompositionMinutiaeStore","MCompositionPhotoFields","MCompositionPhotoStore","MCompositionPlaceFields","MCompositionPlaceStore","MCompositionShareFields","MCompositionShareStore","MCompositionStatusFields","MCompositionStatusStore","MCompositionWithFields","MCompositionWithStore","gkx"],(function(a,b,c,d,e,f){__p&&__p();a={isTextEligible:function(a){return a===null||a===""?!1:a.length<=150},isComposerEmpty:function(){__p&&__p();var a=b("MCompositionPhotoStore").get(b("MCompositionPhotoFields").PHOTO_INFO_LIST,null);a=a!==null&&a.length>0;var c=b("MCompositionAudioStore").get(b("MCompositionAudioFields").AUDIO_POST,null);c=c!==null;var d=b("MCompositionStatusStore").get(b("MCompositionStatusFields").TEXT,"");d=d.trim();d=d.replace(/\n{3,}/,"\n\n");d=d.replace(/\t+/," ");d=d!=="";var e=b("MCompositionWithStore").get(b("MCompositionWithFields").TOKENS);e=e!==null&&e.length>0;var f=b("MCompositionPlaceStore").get(b("MCompositionPlaceFields").ID)!==null,g=b("MCompositionMinutiaeStore").get(b("MCompositionMinutiaeFields").ACTION_TYPE_ID),h=b("MCompositionMinutiaeStore").get(b("MCompositionMinutiaeFields").OBJECT_ID);g=g!==null||h!==null;h=b("MCompositionShareStore").get(b("MCompositionShareFields").SHARE_URI)!==null;return!a&&!c&&!d&&!e&&!f&&!g&&!h?!0:!1},isStoryPostEligible:function(a){__p&&__p();var c=b("MCompositionPhotoStore").get(b("MCompositionPhotoFields").PHOTO_INFO_LIST,null),d=b("MCompositionStatusStore").get(b("MCompositionStatusFields").TEXT,"");d=d.trim();d=d.replace(/\n{3,}/,"\n\n");d=d.replace(/\t+/," ");var e=b("MCompositionWithStore").get(b("MCompositionWithFields").TOKENS),f=b("MCompositionPlaceStore").get(b("MCompositionPlaceFields").ID),g=b("MCompositionMinutiaeStore").get(b("MCompositionMinutiaeFields").ACTION_TYPE_ID),h=b("MCompositionMinutiaeStore").get(b("MCompositionMinutiaeFields").OBJECT_ID);e=e!==null&&e.length>0||f!==null||g!==null||h!==null;f=c!==null&&c.length>0&&(!e||e&&c[0].type==="photo");g=b("MCompositionShareStore").get(b("MCompositionShareFields").SHARE_URI)!==null;h=b("gkx")("676786")&&g&&a&&!e;if(e&&d===""&&!f&&!g)return!1;return d!==""&&this.isTextEligible(d)&&!g||d===""&&f&&!g||d!==""&&this.isTextEligible(d)&&!f&&h||d===""&&!f&&h?!0:!1}};e.exports=a}),null);
__d("MFriendsTaggerReact",["invariant","DOM","MLegacyDataStore","$","createDeprecatedProperties","eventsMixinDeprecated","getActiveElement"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.setRoot(a),b("DOM").listen(this.getRoot(),"click",null,this.$1.bind(this))}var c=a.prototype;c.hide=function(){var a=b("getActiveElement")();a&&a.blur();b("DOM").hide(this.getRoot())};c.show=function(){b("DOM").show(this.getRoot()),this.getTokenizer().component.init(),this.onShow&&this.onShow()};c.clear=function(){var a=b("DOM").find(this.getRoot(),"div","tokenizer");a=b("MLegacyDataStore").get(a);a.tokenizer&&(this.setEntries([]),this.onClear&&this.onClear())};c.hasTokens=function(){return this.getEntries().length>0};c.getTokens=function(){return this.getEntries().reduce(function(a,b){a[b.id]=b;return a},{})};c.removeToken=function(a){this.getTokenizer().component.onRemoveFromCollection(a)};c.getEntries=function(){return this.getTokenizer().component.getEntries()};c.setEntries=function(a){this.getTokenizer().component.setEntries(a)};c.$1=function(a){a.getNode("cancel_with_tagger")?this.$2():a.getNode("submit_with_tagger")&&this.$3()};c.$2=function(){this.hide(),this.invoke("cancel",{})};c.$3=function(){var a=this.getEntries();this.hide();this.invoke("submit",{tokens:a})};c.getTokenizer=function(){var a=b("DOM").find(this.getRoot(),"div","tokenizer");a=b("MLegacyDataStore").get(a);a||g(0,1304);a.tokenizer||g(0,1305,Object.keys(a).join(" "));return a.tokenizer};c.setOnShow=function(a){this.onShow=a};c.setOnClear=function(a){this.onClear=a};a.fromID=function(c){c=b("$")(c);var d=b("MLegacyDataStore").get(c);d.$4||(d.$4=new a(c));return d.$4};a.getFriendIds=function(a){return a.friend_ids?a.friend_ids:a.tokens.map(function(a){return a.id})};return a}();b("createDeprecatedProperties")(a,{root:null});b("eventsMixinDeprecated")(a,["submit","cancel"]);e.exports=a}),null);
__d("MSubscriptionsHandlerMixin",["SubscriptionsHandler","destroyOnUnload"],(function(a,b,c,d,e,f){a={__subscriptionsHandler:null,addSubscriptions:function(){var a=this;this.__subscriptionsHandler||(this.__subscriptionsHandler=new(b("SubscriptionsHandler"))(),b("destroyOnUnload")(function(){a.__subscriptionsHandler.release(),a.__subscriptionsHandler=null}));for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];this.__subscriptionsHandler.addSubscriptions.apply(this.__subscriptionsHandler,d)}};e.exports=a}),null);
__d("MComposerDialogClearablePreview",["DOM","MComposerDialogClearablePreviewConstants","MSubscriptionsHandlerMixin","Stratcom","mixin","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MComposerDialogClearablePreviewConstants").sigils;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this)||this;e.$MComposerDialogClearablePreview1=d;e.$MComposerDialogClearablePreview2=c;e.addSubscriptions(b("DOM").listen(e.$MComposerDialogClearablePreview2,"click",g.CLEAR,e.$MComposerDialogClearablePreview3.bind(babelHelpers.assertThisInitialized(e))));return e}var d=c.prototype;d.clear=function(){this.hide();b("DOM").setContent(this.$MComposerDialogClearablePreview1,"");return this};d.$MComposerDialogClearablePreview3=function(){this.clear();this.emit("clear");b("Stratcom").invoke("m:quicksearch:places:clear",null,null);return this};d.hide=function(){b("DOM").hide(this.$MComposerDialogClearablePreview2);return this};d.setValue=function(a){b("DOM").setContent(this.$MComposerDialogClearablePreview1,a);this.show();return this};d.show=function(){b("DOM").show(this.$MComposerDialogClearablePreview2);return this};d.showIfHasValue=function(){return this.$MComposerDialogClearablePreview1.innerText?this.show():this.hide()};return c}(b("mixin")(b("MSubscriptionsHandlerMixin")));b("mixInEventEmitter")(a,{clear:!0});e.exports=a}),null);
__d("XMStoriesAsyncTrayController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/tray/",{})}),null);
__d("MStoriesTrayUtils",["MPageCache","MPageControllerPath","MRequestTypes","MResponseData","MURI","XAsyncRequest","XMStoriesAsyncTrayController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,c,d){__p&&__p();a=new(b("XAsyncRequest"))(new(b("MURI"))(a).toString());a.setType(b("MRequestTypes").DEPENDENT);a.setAutoProcess(!1);a.setResponseHandler(function(a){a=new(b("MResponseData"))(a);a.process();var d=b("MPageControllerPath").getRequestPath();b("MPageCache").addCachedIUIResponse(d,a);c&&c()});a.setErrorHandler(function(){d&&d()});a.send()};a={refreshTray:function(a,c){var d=b("XMStoriesAsyncTrayController").getURIBuilder().getURI();g(d,a,c)},refreshFeedUnitsWithURIs:function(a){a.forEach(function(a){g(a)})}};e.exports=a}),null);
__d("MStoriesProductionTrayAsync",["cx","Bootloader","CSS","MFBStoriesGatingConfig","MFBStoriesTrayType","MStoriesID","MStoriesProductionInfo","MStoriesProductionTrayUtils","MStoriesStratcomEvents","MStoriesToast","MStoriesTrayUtils","MStoriesUIConstants","MStoriesUploadStatus","Stratcom"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={handleFailedAddToStoryPogSelected:function(){__p&&__p();if(b("MStoriesProductionInfo").getUploadStatus()!==b("MStoriesUploadStatus").FAILED)return!1;var a=document.getElementById(b("MStoriesID").PRODUCTION_INPUT);if(a){a.click();b("MStoriesProductionInfo").setUploadStatus(b("MStoriesUploadStatus").IDLE);b("MStoriesProductionTrayUtils").updateProductionPog();return!0}return!1},uploadCB:function(a){__p&&__p();var c=this,d=b("MStoriesProductionTrayUtils").getAnimationPog();if(a)b("MStoriesProductionInfo").setUploadStatus(b("MStoriesUploadStatus").IDLE),b("MFBStoriesGatingConfig").trayType!==b("MFBStoriesTrayType").CIRCULAR||d&&d.id===b("MStoriesID").PRODUCTION_ADD_ITEM_POG?b("MStoriesTrayUtils").refreshTray(function(){c._cleanupUploading(),b("MStoriesToast").showDefaultToast(b("MStoriesUIConstants").UPLOAD_SUCCESSFUL)},function(){c._cleanupUploading()}):(this._cleanupUploading(),b("MStoriesToast").showDefaultToast(b("MStoriesUIConstants").UPLOAD_SUCCESSFUL)),d&&b("CSS").addClass(d,"_26w9"),b("Stratcom").invoke(b("MStoriesStratcomEvents").UPLOAD_SUCCESS,null,null);else{b("MStoriesProductionInfo").setUploadStatus(b("MStoriesUploadStatus").FAILED);if(d&&d.id===b("MStoriesID").PRODUCTION_ADD_ITEM_POG){var e=document.getElementById(b("MStoriesID").PRODUCTION_ADD_ITEM_DIV);e&&b("CSS").addClass(e,"no-after");d&&b("CSS").removeClass(d,"hide-border")}this._cleanupUploading();b("Stratcom").invoke(b("MStoriesStratcomEvents").UPLOAD_FAILED,null,null)}b("Bootloader").loadModules(["FBStoriesLoggingConstants","MStoriesTypedLogger"],function(b,c){b=a?b.ACTION_SEND_STORY_SUCCEEDED:b.ACTION_SEND_STORY_FAILED;c=new c().setName(b);c.log()},"MStoriesProductionTrayAsync")},_cleanupUploading:function(){var a=document.getElementById(b("MStoriesID").PRODUCTION_ADD_ITEM_POG),c=document.getElementById(b("MStoriesID").PRODUCTION_OWNER_ITEM_POG);a&&b("CSS").removeClass(a,b("MStoriesProductionTrayUtils").getUploadingClass());c&&b("CSS").removeClass(c,b("MStoriesProductionTrayUtils").getUploadingClass());a=document.getElementById(b("MStoriesID").PRODUCTION_ADD_ITEM_DIV);a&&b("CSS").removeClass(a,"disable");b("MStoriesProductionTrayUtils").updateProductionPog()}};e.exports=a}),null);
__d("MComposerOGStrings",["fbt","MinutiaeVerbs","OGComposerConstants"],(function(a,b,c,d,e,f,g){__p&&__p();a={getFBTPhrase:function(a,c,d,e){__p&&__p();e="";switch(a){case b("MinutiaeVerbs").COMPOSER_FEELS:e=g._("{icon}feeling {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_WATCHES:e=g._("{icon}watching {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_READS:e=g._("{icon}reading {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_LISTENS:e=g._("{icon}listening to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_DRINKS:e=g._("{icon}drinking {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_EATS:e=g._("{icon}eating {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_PLAYS:e=g._("{icon}playing {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_TRAVELS:e=g._("{icon}traveling to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_LOOKS_FOR:e=g._("{icon}looking for {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_SUPPORTS:e=g._("{icon}supporting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_CELEBRATES:e=g._("{icon}celebrating {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_MEETS:e=g._("{icon}meeting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_GETS:e=g._("{icon}getting {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_MAKES:e=g._("{icon}making {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_GOES_TO:e=g._("{icon}going to {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_THINKS_ABOUT:e=g._("{icon}thinking about {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_REMEMBERS:e=g._("{icon}remembering {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_WRITES_A_NOVEL_ABOUT:e=g._("{icon}writing a novel about {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_SELECTS_VERB:e=g._("{icon}{verb}",[g._param("icon",c),g._param("verb",d)]);break;case b("MinutiaeVerbs").COMPOSER_OTHER:e=g._("{icon}{object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_VOTES:e=g._("{icon}voting in {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_ATTENDS:e=g._("{icon}attending {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_AGREES:e=g._("{icon}agrees with {object}",[g._param("icon",c),g._param("object",d)]);break;case b("MinutiaeVerbs").COMPOSER_DISAGREES:e=g._("{icon}disagrees with {object}",[g._param("icon",c),g._param("object",d)]);break;case b("OGComposerConstants").ExercisesTypeID:e=g._("{icon}{object}",[g._param("icon",c),g._param("object",d)]);break}return e}};e.exports=a}),null);
__d("MOpenGraphTagger",["cx","fbt","CSS","DOM","MarauderLogger","MComposerOGStrings","MCompositionShareStore","MLegacyDataStore","MRequest","Stratcom","$","eventsMixinDeprecated"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){__p&&__p();this.setRoot(a),this._prompt=b("DOM").find(a,"span","og-composer-prompt"),this._defaultPrompt=this._prompt.firstChild,this._defaultIconSelector=b("DOM").find(a,"div","og-icon-selector"),this._iconSelector=this._defaultIconSelector,this._cancelButton=b("DOM").find(a,"button","cancel-og-tagger"),this._defaultCancelButtonText=this._cancelButton.firstChild,this._isFromActivityLink=!1,b("DOM").listen(this.getRoot(),"click",null,this._handleClick.bind(this)),this._listeners=[b("Stratcom").listen("click","object_result",function(a){__p&&__p();a.prevent();a=a.getNode("object_result");var c=b("MLegacyDataStore").get(a);this._objectID=c.id;this._objectStr=c.name;this._icon=c.icon;this._iconSrc=c.icon_src;this._selectedScore=c.score;this._selectedOriginalID=c.original_id;this._clientTime=c.client_time;this._requestID=c.request_id;this._triggersEventTagExpansion=c.triggers_event_tag_expansion;this._addLoggingDataForNodes(a.parentNode.childNodes);this._showAttachment=b("MCompositionShareStore").isEmpty()&&c.show_attachment;this._customIconID=c.custom_icon;this._submit()}.bind(this)),b("Stratcom").listen("click","at_result",function(a){a.prevent(),this._selectActionType(b("MLegacyDataStore").get(a.getNode("at_result"))),b("MarauderLogger").log("og_composer_verb_selected",void 0,{at_id:this._actionType.id,place_id:this._placeID})}.bind(this)),b("Stratcom").listen("click","quicksearch-input",function(a){if(a.getNode("og-object-search")){a={at_id:this._actionType.id,place_id:this._placeID};b("MarauderLogger").log("og_composer_object_search_clicked",void 0,a)}}.bind(this)),b("Stratcom").listen("keyup","quicksearch-input",function(a){a=a.getNode("quicksearch-input");a&&(this._query=a.value,this._keystrokeCount++,this._lastNotBackspacedQuery.indexOf(this._query)!==0&&(this._lastNotBackspacedQuery=this._query))}.bind(this)),b("Stratcom").listen("composerReset",null,function(a){this._reset(),this._placeID=0}.bind(this))],b("Stratcom").listen("MStructuredComposer:cleanup",null,function(a){for(var a=0;a<this._listeners.length;a++)this._listeners[a].remove();this._listeners=[]}.bind(this)),b("Stratcom").listen("MStructuredComposer-opened",null,function(a){this._compositionID=a.getData().session_id}.bind(this))}var c=a.prototype;c.getRoot=function(){return this.root};c.setRoot=function(a){this.root=a};c.hide=function(){b("DOM").hide(this.getRoot()),this.toggleIncludedPlaceSelector(!1)};c.show=function(){b("DOM").show(this.getRoot())};c.updatePrompt=function(a){b("DOM").setContent(this._prompt,a)};c.setPlaceID=function(a){this._placeID=a};c.setSuggestionMechanism=function(a){this._suggestionMechanism=a};c.toggleIncludedPlaceSelector=function(a){var c=b("DOM").scry(this.getRoot(),"div","og_included_place");c.length&&(this._isFromActivityLink=a,a?b("DOM").show(c[0]):b("DOM").hide(c[0]))};c._handleClick=function(a){a.getNode("cancel-og-tagger")&&this.cancel()};c._reset=function(){__p&&__p();var a=b("DOM").scry(this.getRoot(),"div","og-object-search");a.length!==0&&(b("DOM").hide(a[0]),this._showActionTypeSelector());this._hideIconSelector();this._actionType=null;this._suggestionMechanism=null;this._typeaheadSessionID=null;this._candidateResults=null;this._query=null;this._selectedScore=null;this._selectedOriginalID=null;this._clientTime=null;this._requestID=null;this._lastNotBackspacedQuery=null;this._keystrokeCount=null;this.updatePrompt(this._defaultPrompt);this.setCancelButtonText(this._defaultCancelButtonText);b("Stratcom").invoke("m:quicksearch:clear")};c._addLoggingDataForNodes=function(a){this._candidateResults=[];this._numResults=a.length;for(var c=0;c<this._numResults;++c){var d=b("MLegacyDataStore").get(a[c]);this._objectID==d.id&&(this._selectedPos=c);this._candidateResults[c]=d.id?d.id:0}};c._cancelTypeaheadSession=function(){if(!this._typeaheadSessionID)return;this._triggersEventTagExpansion=!1;this._objectID=null;var a=b("DOM").scry(this.getRoot(),"div","object_result");this._addLoggingDataForNodes(a);b("MarauderLogger").log("og_composer_session_abandoned",void 0,{action_type_id:String(this._actionType.id),place_id:this._placeID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,request_id:this._requestID,candidate_results:this._candidateResults,num_results:this._numResults,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount})};c.cancel=function(){b("MarauderLogger").log("og_composer_cancel_tagger",void 0,{suggestion_mechanism:this._suggestionMechanism});var a=this._isFromActivityLink;this._isFromIconSelector&&this.invoke("cancelIconSelection",{action_type_id:this._actionTypeId,query:this._iconSearchInput?this._iconSearchInput.value:""});this._cancelTypeaheadSession();this._reset();this.hide();this.invoke("cancel");a&&this.invoke("cancelFromActivity")};c.setCancelButtonText=function(a){b("DOM").setContent(this._cancelButton,a)};c._showObjectSearch=function(){this._hideActionTypeSelector(),b("DOM").show(b("DOM").find(this.getRoot(),"div","og-object-search"))};c.selectActionTypeImplicitly=function(a){__p&&__p();var c=b("DOM").scry(this.getRoot(),"div","at_result"),d=!1;for(var e=0;e<c.length;e++){var f=b("MLegacyDataStore").get(c[e]);if(f.id==a){d=!0;break}}if(!d)return!1;this._selectActionType(f);return!0};c.showIconSelector=function(a,c,d,e){__p&&__p();this.show();this._hideActionTypeSelector();this.updatePrompt(h._("Select an icon"));this._actionTypeId=a;var f="/platform/og/composer/icon_selector/";f=new(b("MRequest"))(f).setData({actionTypeID:a,objectID:c,objectStr:d,iconID:e});f.listen("postprocess",this._setUpIconSelector.bind(this));f.send();b("DOM").replace(this._iconSelector,this._defaultIconSelector);b("DOM").show(this._iconSelector);b("MarauderLogger").log("og_composer_show_icon_selector")};c._setUpIconSelector=function(){var a=this;this._iconSelector=b("DOM").find(this.getRoot(),"div","og-icon-selector");var c=b("DOM").scry(this._iconSelector,"a","remove-token");c.length!==0&&b("DOM").listen(c[0],"click",null,this._cancelIconSelection.bind(this));this._iconSearchInput=b("DOM").scry(this._iconSelector,"input","icon-search-input")[0];b("DOM").listen(this._iconSelector,"click","og-icon-area",this._selectIcon.bind(this));b("DOM").listen(this._iconSelector,"click","original-og-icon",function(){return a.cancel()});this._isFromIconSelector=!0};c._cancelIconSelection=function(){this._reset(),this.invoke("clear")};c._selectIcon=function(a){__p&&__p();a=a.getNode("og-icon-area");a=a.lastChild.cloneNode();b("DOM").show(a);var c=b("DOM").find(this.getRoot(),"i","token-icon");b("Stratcom").addSigil(a,"token-icon");b("DOM").replace(c,a);this._icon=a;this._iconSrc=b("MLegacyDataStore").get(a).icon_src;this._customIconID=this._icon.getAttribute("data-icon");c=this._iconSearchInput?this._iconSearchInput.value:"";a=this._actionTypeId;this._reset();this.invoke("iconChanged",{icon:this._icon,icon_src:this._iconSrc,custom_icon_id:this._customIconID,action_type_id:a,query:c})};c._selectActionType=function(a){this._typeaheadSessionID=String(Math.floor(Date.now()*Math.random()));this._lastNotBackspacedQuery="";this._keystrokeCount=0;this._actionType=a;a={at_id:this._actionType.id,place_id:this._placeID,sid:this._typeaheadSessionID};b("Stratcom").invoke("m:quicksearch:actionSelected",null,a);this._showObjectSearch();this.updatePrompt(this._actionType.prompt)};c._hideActionTypeSelector=function(){var a=b("DOM").scry(this.getRoot(),"div","og_ats");a.length!==0&&b("CSS").conditionClass(a[0],"_51xt",!0)};c._showActionTypeSelector=function(){var a=b("DOM").scry(this.getRoot(),"div","og_ats");a.length!==0&&b("CSS").conditionClass(a[0],"_51xt",!1)};c._hideIconSelector=function(a){this._isFromIconSelector=!1,this._actionTypeId=null,b("DOM").hide(this._iconSelector),this._showActionTypeSelector()};c._submit=function(){var a={action_type:this._actionType.id,action_type_str:this._actionType.name,object:this._objectID,object_str:this._objectStr,show_attachment:this._showAttachment,icon:this._icon,icon_src:this._iconSrc,fbt_phrase:this._getTagPhrase(this._actionType.id,this._icon,this._objectStr,this._objectID),triggers_event_tag_expansion:this._triggersEventTagExpansion,suggestion_mechanism:this._suggestionMechanism,custom_icon:this._customIconID,typeahead_session_id:this._typeaheadSessionID,composer_session_id:this._compositionID,selected_original_id:this._selectedOriginalID,selected_score:this._selectedScore,place_id:this._placeID,client_time:this._clientTime,request_id:this._requestID,display_position:this._selectedPos,num_results:this._numResults,results:this._candidateResults,search_term:this._query,last_not_backspaced_query:this._lastNotBackspacedQuery,keystroke_count:this._keystrokeCount};this._reset();this.invoke("submit",a);delete a.icon;delete a.fbt_phrase;b("MarauderLogger").log("og_composer_object_selected",void 0,a)};c._getTagPhrase=function(a,c,d,e){return b("MComposerOGStrings").getFBTPhrase(a,c,d,e)};a.fromID=function(c){c=b("$")(c);var d=b("MLegacyDataStore").get(c);d._ogTagger||(d._ogTagger=new a(c));return d._ogTagger};return a}();b("eventsMixinDeprecated")(a,["submit","cancel","clear","iconChanged","cancelFromActivity","cancelIconSelection"]);Object.assign(a.prototype,{root:null,_prompt:null,_defaultPrompt:null,_actionType:null,_objectID:null,_objectStr:null,_triggersEventTagExpansion:null,_icon:null,_iconSelector:null,_defaultIconSelector:null,_showAttachment:null,_customIconID:null,_placeID:0,_listeners:null,_suggestionMechanism:null,_typeaheadSessionID:null,_compositionID:null,_selectedOriginalID:null,_selectedScore:null,_clientTime:null,_requestID:null,_selectedPos:null,_numResults:null,_candidateResults:null,_query:null,_lastNotBackspacedQuery:null,_keystrokeCount:null});e.exports=a}),null);
__d("MPlatformDialogTagger",["DOM","Stratcom","SubscriptionsHandler","$","mapObject","mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.init=function(a,c,d){this.$1=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$3=null,this.$4=a,this.$5=c,b("Stratcom").addSigil(this.$4.getRoot(),d),this.$2.addSubscriptions(b("Stratcom").listen("click",d,this.$6.bind(this)),this.$5.listen("cancel",this.$7.bind(this)),this.$5.listen("submit",this.$7.bind(this)),b("Stratcom").listen("m:history:change",null,function(a){if(!this.$1)return;this.$7();a.prevent()}.bind(this)),b("Stratcom").listen("m:page:unload",null,this.$8.bind(this)))};c.createInputs=function(a,c,d){__p&&__p();var e=this;d=d||"";this.reset();var f={};c?c.forEach(function(b){a[b]&&(f[b]=a[b])}):f=a;if(Object.keys(f).length===0){this.$3&&b("DOM").remove(this.$3);this.$4.setSelected(!1);return}this.$3=b("DOM").create("div");b("mapObject")(f,function(a,c){b("DOM").appendContent(e.$3,b("DOM").create("input",{type:"hidden",name:d+c,value:a}))});b("DOM").appendContent(this.$4.getRoot(),this.$3);Object.keys(f).some(function(a){return Array.isArray(f[a])?f[a].length>0:f[a]})&&this.$4.setSelected(!0)};c.reset=function(){this.$3&&b("DOM").remove(this.$3),this.$3=null,this.$4.setSelected(!1)};c.destroy=function(){this.$8()};c.$6=function(a){if(a.getNode("remove"))return;this.$1=!0;b("DOM").hide(b("$")("viewport"));this.$5.show()};c.$7=function(){this.$1=!1,b("DOM").show(b("$")("viewport")),this.$5.hide()};c.$8=function(){this.clearInputs(),this.$2.release(),this.$2=null,this.$5&&this.$5.getRoot()&&b("DOM").remove(this.$5.getRoot())};return a}();b("mixInEventEmitter")(a,{cleared:!0,populated:!0});e.exports=a;e.exports.EVENT_CLEARED="cleared";e.exports.EVENT_POPULATED="populated"}),null);
__d("MPlatformDialogPeopleTagger",["DOM","MFriendsTaggerReact","MPlatformDialogTagger","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();var g="fb:og:people:",h=g+"tagger";a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$MPlatformDialogPeopleTagger1=new(b("SubscriptionsHandler"))();f.$MPlatformDialogPeopleTagger2=new(b("MFriendsTaggerReact"))(d);f.$MPlatformDialogPeopleTagger3=c;f.init(f.$MPlatformDialogPeopleTagger3,f.$MPlatformDialogPeopleTagger2,h);f.$MPlatformDialogPeopleTagger1.addSubscriptions(f.$MPlatformDialogPeopleTagger2.listen("submit",f.$MPlatformDialogPeopleTagger4.bind(babelHelpers.assertThisInitialized(f))),f.$MPlatformDialogPeopleTagger2.listen("cancel",f.$MPlatformDialogPeopleTagger5.bind(babelHelpers.assertThisInitialized(f))),b("Stratcom").listen("click",h,f.$MPlatformDialogPeopleTagger6.bind(babelHelpers.assertThisInitialized(f))),b("Stratcom").listen("m:page:unload",null,f.$MPlatformDialogPeopleTagger7.bind(babelHelpers.assertThisInitialized(f))));d=e&&e.length?{friend_ids:e}:{};f.createInputs(d,null,g);f.$MPlatformDialogPeopleTagger8=[];return f}var d=c.prototype;d.$MPlatformDialogPeopleTagger4=function(a){!this.$MPlatformDialogPeopleTagger2.hasTokens()?b("Stratcom").invoke(b("MPlatformDialogTagger").EVENT_CLEARED,h):b("Stratcom").invoke(b("MPlatformDialogTagger").EVENT_POPULATED,h,a.tokens),this.$MPlatformDialogPeopleTagger9()};d.$MPlatformDialogPeopleTagger6=function(a){a.getNode("remove")&&(this.$MPlatformDialogPeopleTagger2.removeToken(a.getNode("token")),this.$MPlatformDialogPeopleTagger9())};d.$MPlatformDialogPeopleTagger9=function(){var a={};this.$MPlatformDialogPeopleTagger2.hasTokens()?a={friend_ids:Object.keys(this.$MPlatformDialogPeopleTagger2.getTokens())}:this.$MPlatformDialogPeopleTagger3.setSelected(!1);this.createInputs(a,null,g);this.$MPlatformDialogPeopleTagger8=this.$MPlatformDialogPeopleTagger2.getEntries().slice()};d.$MPlatformDialogPeopleTagger7=function(){this.$MPlatformDialogPeopleTagger1.release(),this.$MPlatformDialogPeopleTagger1=null,this.$MPlatformDialogPeopleTagger2&&this.$MPlatformDialogPeopleTagger2.getRoot()&&b("DOM").remove(this.$MPlatformDialogPeopleTagger2.getRoot())};d.$MPlatformDialogPeopleTagger5=function(){this.$MPlatformDialogPeopleTagger2.setEntries(this.$MPlatformDialogPeopleTagger8.slice())};return c}(b("MPlatformDialogTagger"));a.SIGIL=h;e.exports=a}),null);
__d("XPrivacyCustomEditController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/custom/edit/",{post_id:{type:"String"},privacy_id:{type:"String"}})}),null);
__d("MPrivacyComposerMenu",["cx","fbt","CSS","DOM","MComposerLogger","MComposerWaterfallEvent","MCompositionConfigFields","MCompositionConfigStore","MCompositionPrivacyFields","MCompositionPrivacyStore","MCompositionUserActions","MLegacyDataStore","MModalDialog","MRequest","MViewport","PrivacyConst","Stratcom","SubscriptionsHandler","XPrivacyCustomEditController","$"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c,d,e){__p&&__p();var f=this;this._root=b("$")(a);this._hiddenInput=b("DOM").find(this._root,"input");this._selectedOption=b("DOM").scry(this._root,"tr","checked")[0];this._stickyURI=c;this._stickyOption=this._selectedOption;this._enableCustomMenu=e;this._dontSaveSticky=!1;this._customLabel=d;this._listeners=new(b("SubscriptionsHandler"))();this._listeners.addSubscriptions(b("MCompositionPrivacyStore").addChangeListener(function(){return f._handlePrivacyUpdate()}));this._listeners.addSubscriptions(b("DOM").listen(this._root,"click","privacy-option",function(a){__p&&__p();a=a.getNode("privacy-option");if(!this._enableCustomMenu||a!=this.getCustomOption()){this._selectOption(a);return}var c=b("Stratcom").listen("m:viewport:orientation-change",null,this._addHeightConstraint.bind(this));this._addHeightConstraint();a=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").PRIVACY_FBID,null);var d=b("MCompositionConfigStore").get(b("MCompositionConfigFields").POST_ID,null);a=b("XPrivacyCustomEditController").getURIBuilder().setString("privacy_id",a).setString("post_id",d).getURI();b("MModalDialog").open(a.toString(),function(a){__p&&__p();b("Stratcom").invoke("MPrivacyComposerMenu::custom",null,{visible:!1,instance:this,selector:this._root});b("MViewport").scrollToHeader();c.remove();this._removeHeightConstraint();if(!a.canceled){var d=a.payload.payload.value,e=b("DOM").scry(this._root,"tr","privacy-option"),f=!1;for(var g=0;g<e.length;g++)if(b("MLegacyDataStore").get(e[g]).value==d){this._selectOption(e[g],!0);f=!0;break}if(!f){this._updateCustomSelectedOption(a.payload.payload.description,d);g=this._getCustomSelectedOption();g&&this._selectOption(g,!0)}}}.bind(this));b("Stratcom").invoke("MPrivacyComposerMenu::custom",null,{visible:!0,instance:this,selector:this._root})}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MStructuredComposer:reset",null,function(a){this._stickyCustomValue&&this._stickyCustomLabel&&this._updateCustomSelectedOption(this._stickyCustomLabel,this._stickyCustomValue)}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MPrivacyDeferredSelector-loaded",null,function(a){a=a.getData();var c=b("DOM").find(this._root,"table","privacy-table");c.id==a.id&&(this._selectedOption=b("DOM").scry(this._root,"tr","checked")[0]);this._handlePrivacyUpdate()}.bind(this)));this._listeners.addSubscriptions(b("Stratcom").listen("MPrivacyComposerMenu:updatePrivacy",null,function(a){a=a.getData();this._selectOption(a.row,!1,a.log)}.bind(this)));b("MLegacyDataStore").set(this._root,{instance:this})}var c=a.prototype;c.setShowTagExpansion=function(a){var c=this._root;c&&(b("CSS").conditionClass(c,"_1oxi",a),b("CSS").conditionClass(c,"_3kaj",a))};c.getCustomOption=function(){return b("DOM").find(this._root,"tr","privacy-custom-option")};c._getCustomSelectedOption=function(){return b("DOM").scry(this._root,"tr","privacy-custom-selected-option")[0]};c.getSelectedValue=function(){return b("MLegacyDataStore").get(this._selectedOption).value};c._getCustomLabel=function(){var a=this._getCustomSelectedOption();if(!a)return null;a=b("DOM").scry(a,"span","option-desc")[0];return a?a.textContent:null};c._getCustomValue=function(){var a=this._getCustomSelectedOption();return!a?null:b("MLegacyDataStore").get(a).value};c._selectOption=function(a,c,d){__p&&__p();d=d!==void 0?d:!0;var e=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").NEVER_SAVE_STICKY,!1);a=b("MLegacyDataStore").get(a).value;var f=this._getCustomLabel(),g=this._getCustomValue(),h={};h[b("MCompositionPrivacyFields").PRIVACY_FBID]=a;h[b("MCompositionPrivacyFields").ALREADY_SAVED_STICKY]=c;h[b("MCompositionPrivacyFields").NEVER_SAVE_STICKY]=e;h[b("MCompositionPrivacyFields").CLOSE_DIALOG]=!0;h[b("MCompositionPrivacyFields").CUSTOM_LABEL]=f;h[b("MCompositionPrivacyFields").CUSTOM_OPTION]=g;b("MCompositionUserActions").privacyUpdate(h);d&&b("MComposerLogger").log(b("MComposerWaterfallEvent").PRIVACY_ADD,{privacy_setting:a})};c._updateCustomSelectedOption=function(a,c){var d=b("DOM").find(this._getCustomSelectedOption(),"span","option-desc");b("DOM").setContent(d,a);b("MLegacyDataStore").set(this._getCustomSelectedOption(),{value:c});if(c){b("DOM").show(this._getCustomSelectedOption());d=b("DOM").find(this._getCustomSelectedOption(),"span","plus-label");b("DOM").setContent(d,this._getTagExpansionLabel(c))}};c._getTagExpansionLabel=function(a){try{var c;a=JSON.parse(a);c=(((c=a)!=null?c.allow:c)||[]).indexOf(b("PrivacyConst").CustomPrivacyTokens.FRIENDS)>=0;a=((a=a)!=null?(a=a.settings)!=null?a.no_tag_expansion:a:a)||0;return c&&a===0?h._("(+ Friends of Tagged)"):h._("(+ Tagged)")}catch(a){}return null};c._addHeightConstraint=function(){this._removeHeightConstraint();var a=b("MViewport").getUseableHeight();this._heightConstraint=b("MViewport").addHeightConstraint(a)};c._removeHeightConstraint=function(){this._heightConstraint&&(this._heightConstraint.release(),this._heightConstraint=null)};c._handlePrivacyUpdate=function(){__p&&__p();!this._stickyCustomValue&&this._getCustomSelectedOption()&&(this._stickyCustomValue=this._getCustomValue(),this._stickyCustomLabel=this._getCustomLabel());var a=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").PRIVACY_FBID,null),c=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").ALREADY_SAVED_STICKY,!1),d=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").NEVER_SAVE_STICKY,!1),e=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").CLOSE_DIALOG,!1),f=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").CUSTOM_LABEL),g=b("MCompositionPrivacyStore").get(b("MCompositionPrivacyFields").CUSTOM_OPTION);c!==void 0&&(this._dontSaveSticky=c);c=b("DOM").scry(this._root,"tr","privacy-option");a===null&&(a=b("MLegacyDataStore").get(this._stickyOption).value);var h=this._hiddenInput&&this._hiddenInput.value;e=e||h!=a;h=b("DOM").scry(document.body,"button","privacy-button")[0];if(a!==null&&e){e=null;for(var i=0;i<c.length;i++)b("MLegacyDataStore").get(c[i]).value==a&&(e=c[i]);this._getCustomSelectedOption()&&g!==null&&f!==null&&this._updateCustomSelectedOption(f,g);e||(e=this._getCustomSelectedOption());if(!e){h&&b("CSS").conditionShow(h,!1);return}this._hiddenInput&&(this._hiddenInput.value=a);this._selectedOption&&b("CSS").conditionClass(this._selectedOption,"checked",!1);this._selectedOption=e;b("CSS").conditionClass(e,"checked",!0);i=!!b("DOM").scry(e,"span","plus-label").length;c=b("DOM").scry(e,"i","small-icon");c.length==0?c=b("DOM").find(e,"i","icon"):c=c[0];f=c.outerHTML;g=b("DOM").find(e,"span","option-desc");a=this._hiddenInput&&this._hiddenInput.value;b("Stratcom").invoke("MPrivacyComposerMenu::change",null,{value:a,showPlus:i,iconHTML:f,optionLabel:g,instance:this});d||(this._stickyOption=this._selectedOption,this._stickyCustomValue=this._getCustomValue(),this._stickyCustomLabel=this._getCustomLabel(),!this._dontSaveSticky&&this._stickyURI&&new(b("MRequest"))(this._stickyURI).setData({privacyx:a}).send())}c=b("MCompositionConfigStore").get(b("MCompositionConfigFields").DISABLE_PRIVACY,!1);h&&!c&&b("CSS").conditionShow(h,!0)};a.init=function(b,c,d,e){return new a(b,c,d,e)};a.getInstance=function(a){return b("MLegacyDataStore").get(a).instance};return a}();e.exports=a}),null);
__d("MPrivacyComposerSelector",["cx","Banzai","BanzaiLogger","CSS","DOM","HTML","MComposerLogger","MComposerWaterfallEvent","MLegacyDataStore","MPlatformDialogPeopleTagger","MPlatformDialogTagger","MPrivacyComposerMenu","MViewport","Stratcom","Vector","$","ge","isEmpty"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,c){__p&&__p();var d=this;this._root=b("$")(a);this._button=b("DOM").scry(this._root,"button","privacy-button")[0];this._button||(this._button=b("DOM").find(this._root,"div","privacy-button"));this._buttonIcon=b("DOM").find(this._root,"div","privacy-button-icon");this._menu=b("DOM").find(this._root,"div","privacy-composer-menu");this._config=c;b("DOM").listen(this._root,"click","privacy-button",function(a){this.isOpen()?(this.hideMenu(),b("MComposerLogger").log(b("MComposerWaterfallEvent").PRIVACY_CANCEL)):(this.showMenu(),b("BanzaiLogger").log("MPrivacySelectorConsistencyLoggerConfig",{event:"render",logging_source:"mobile_composer_timeline"}),b("MComposerLogger").log(b("MComposerWaterfallEvent").PRIVACY_INTENT)),document&&document.activeElement&&document.activeElement.blur()}.bind(this));b("Stratcom").listen("MPrivacyComposerMenu::change",null,function(a){__p&&__p();a=a.getData();if(a.instance!=b("MPrivacyComposerMenu").getInstance(this._menu))return;!Object.prototype.hasOwnProperty.call(a,"optionLabel")||!Object.prototype.hasOwnProperty.call(a,"showPlus")||!Object.prototype.hasOwnProperty.call(a,"iconHTML");if(this._config.updatebuttontext){var c=b("DOM").find(this._button,"span","button-text");b("DOM").setContent(c,a.optionLabel.cloneNode(!0))}c=b("DOM").find(this._button,"span","plus-label");a.showPlus?b("DOM").show(c):b("DOM").hide(c);a.iconHTML&&b("DOM").setContent(this._buttonIcon,new(b("HTML"))(a.iconHTML));this.hideMenu()}.bind(this));var e=b("Stratcom").listen(b("MPlatformDialogTagger").EVENT_POPULATED,b("MPlatformDialogPeopleTagger").SIGIL,function(a){return d._updateTagExpansion(a)}),f=b("Stratcom").listen(b("MPlatformDialogTagger").EVENT_CLEARED,b("MPlatformDialogPeopleTagger").SIGIL,function(a){return d._updateTagExpansion(a)});b("Stratcom").listen("m:page:unload",null,function(){e.remove(),f.remove(),b("Stratcom").removeCurrentListener()});b("MLegacyDataStore").set(this._root,{instance:this})}var c=a.prototype;c._updateTagExpansion=function(a){a=a&&!b("isEmpty")(a.getData());this.setShowTagExpansion(!!a)};c.setShowTagExpansion=function(a){this._root&&b("CSS").conditionClass(this._root,"_27-k",a);var c=b("MPrivacyComposerMenu").getInstance(this._menu);c&&c.setShowTagExpansion(a)};c.getSelectedValue=function(){var c=b("MPrivacyComposerMenu").getInstance(this._menu);if(c)return c.getSelectedValue();else{c=b("ge")(a.getSavedCustomInputName(),this._root);return c&&c.value}};c.showMenu=function(){b("DOM").show(this._menu),b("Stratcom").invoke("MPrivacyComposerMenu::show",null,{selector:this._root}),this._heightConstraint=b("MViewport").addMinHeightConstraint(b("Vector").getDim(this._menu).y+b("Vector").getPos(this._menu).y),b("Banzai").post("privacy_selector_interaction",{event:"open_selector"})};c.hideMenu=function(){this.isOpen()&&(b("DOM").hide(this._menu),b("Stratcom").invoke("MPrivacyComposerMenu::hide",null,{selector:this._root}),this._heightConstraint&&this._heightConstraint.release(),b("Banzai").post("privacy_selector_interaction",{event:"close_selector"}))};c.isOpen=function(){var a=this._menu&&this._menu.style;return a!=null&&a.display!="none"};a.init=function(b,c){return new a(b,c)};a.getInstance=function(a){return b("MLegacyDataStore").get(a).instance};a.getSavedCustomInputName=function(){return"m_composer_privacy_selector_input"};return a}();e.exports=a}),null);
__d("MPrivacyDeferredSelector",["MRequest","MRequestTypes","MURI","Stratcom"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=null,j=!1;function a(a,c,d,e){h=a,g=c,i=d,j=e,b("Stratcom").listen("MPrivacyDeferredSelector::init",null,function(a){k(a),b("Stratcom").removeCurrentListener()})}function k(a){a=new(b("MURI"))("/privacy/selector");a.setQueryData({pt_id:h,eco:g,selected:i,defaultSelector:!0,useSmallIcons:j});a=new(b("MRequest"))(a.toString());a.setType(b("MRequestTypes").DEPENDENT);a.send()}function c(a){b("Stratcom").invoke("MPrivacyDeferredSelector-loaded",null,{id:a})}function d(a){a}e.exports={init:a,informLoaded:c,setShowNewcomerAudienceSelector:d}}),null);
__d("MImageFetchNotifier",["invariant","prefetchImage","setImmediateAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={},j={},k={};function l(a,b){if(!h[a])return;b=h[a].indexOf(b);h[a].splice(b,1);h[a].length===0&&(j[a].cancel(),delete h[a],delete j[a])}function m(a){i[a]=!0,h[a].forEach(function(a){return a()}),delete h[a],delete j[a]}function n(a){j[a]=b("prefetchImage")(a,function(){m(a)})}var o={associateImageURLWithDOMID:function(a,b){k[a]=b},notifyWhenFetched:function(a,c){__p&&__p();if(i[a]===!0){var d=!0;b("setImmediateAcrossTransitions")(function(){d&&c()});return{remove:function(){d=!1}}}h[a]=h[a]||[];h[a].push(c);j[a]||n(a);return{remove:function(){l(a,c)}}},notifyWhenFetchedForDOMID:function(a,b){var c=k[a];c!==null||g(0,1595,a);return o.notifyWhenFetched(c,b)}};e.exports=o}),null);
__d("XInlineComposerAudienceEducationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/audience_education/",{new_post_param:{type:"String"},update_icon:{type:"Bool",defaultValue:!1}})}),null);
__d("PlatformShareDialogFunnelLogger",["FunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="PLATFORM_SHARE_DIALOG_FUNNEL";a={_funnelStarted:!1,startFunnel:function(a,c,d,e,f,h,i){b("FunnelLogger").startFunnel(g),b("FunnelLogger").addFunnelTag(g,"domain:"+a),b("FunnelLogger").addFunnelTag(g,"browser:"+c),b("FunnelLogger").addFunnelTag(g,"req_dialog:"+d),b("FunnelLogger").addFunnelTag(g,"dialog:"+e),b("FunnelLogger").addFunnelTag(g,"controller:"+f),b("FunnelLogger").addFunnelTag(g,"req_display:"+h),b("FunnelLogger").addFunnelTag(g,"display:"+i),this._funnelStarted=!0},endFunnel:function(){b("FunnelLogger").endFunnel(g)},registerListenerForVisibility:function(a,b){var c=this;if(!b)return;this._funnelStarted&&this.isElementVisible(b)?this.appendUserActionIfNew(a+":visible"):setTimeout(function(){return c.registerListenerForVisibility(a,b)},1e3)},registerListenerForUserKeyInput:function(a,b){__p&&__p();var c=this;if(!b||!b.addEventListener)return;b.addEventListener("input",function(b){b=b.target;if(b instanceof HTMLInputElement||b instanceof HTMLTextAreaElement){c.appendUserActionIfNew(a+":input");b=b.value;/(^|\s+)#\w\s/.test(b)&&c.appendUserActionIfNew(a+":hash_intended");/(^|\s+)@\w/.test(b)&&c.appendUserActionIfNew(a+":mention_intended")}})},registerListenerForUserClick:function(a,b){var c=this;if(!b)return;var d=["click","touchstart","mousedown"],e=function(){c.appendUserActionIfNew(a+":click")};b.addEventListener?d.forEach(function(a){b&&b.addEventListener(a,e)}):b.attachEvent&&b.attachEvent("onclick",e)},registerListenerForUserClickAndVisibility:function(a,b){b&&(this.registerListenerForVisibility(a,b),this.registerListenerForUserClick(a,b))},appendUserActionIfNew:function(a,c){!c?b("FunnelLogger").appendActionIfNew(g,a):b("FunnelLogger").appendActionWithTagIfNew(g,a,c)},isElementVisible:function(a){if(!a)return!1;var b=a.getBoundingClientRect(),c=window.innerHeight||document.documentElement.clientHeight,d=window.innerWidth||document.documentElement.clientWidth;a=a.contains(document.elementFromPoint((b.left+b.right)/2,(b.top+b.bottom)/2));return!a?!1:b.top>=0&&b.bottom<=c&&b.left>=0&&b.right<=d}};e.exports=a}),null);