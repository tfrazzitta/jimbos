if (self.CavalryLogger) { CavalryLogger.start_js(["gyCQS"]); }

__d("MFullScreen",[],(function(a,b,c,d,e,f){__p&&__p();a={debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;window.clearTimeout(d);d=window.setTimeout(g,b);h&&a.apply(e,f)}},isSupported:function(){var a=document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.fullscreenEnabled,b=document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.cancelFullScreen||document.exitFullScreen;return a&&b},isFullScreen:function(){return document.webkitIsFullScreen||document.fullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement},enableFullScreen:function(a){a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.requestFullScreen?a.requestFullScreen():a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},disableFullScreen:function(){__p&&__p();if(document.webkitCancelFullScreen){document.webkitCancelFullScreen();return!0}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();return!0}else if(document.msExitFullscreen){document.msExitFullscreen();return!0}else if(document.cancelFullScreen){document.cancelFullScreen();return!0}else if(document.exitFullScreen){document.exitFullScreen();return!0}return!1},isVideoExitFullScreenSupported:function(){if(this.isSupported())return!0;return HTMLVideoElement&&HTMLVideoElement.prototype&&"webkitExitFullScreen"in HTMLVideoElement.prototype?!0:!1},videoExitFullScreen:function(a){this.disableFullScreen()||a.webkitExitFullScreen&&a.webkitExitFullScreen()},listenForFullScreenEvent:function(a,b){var c=this.debounce(b,500),d=["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"];d.forEach(function(b){return a.addEventListener(b,c)});return{remove:function(){d.forEach(function(b){return a.removeEventListener(b,c)})}}},removeFullScreenEventListeners:function(a,b){var c=this.debounce(b,500);a.removeEventListener("webkitfullscreenchange",b);a.removeEventListener("mozfullscreenchange",b);a.removeEventListener("MSFullscreenChange",b);a.removeEventListener("fullscreenchange",c)}};e.exports=a}),null);
__d("mergeHelpers",["invariant","FbtResultBase"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=36,i=function(a){return typeof a!=="object"||a instanceof Date||a===null||a instanceof b("FbtResultBase")},j={MAX_MERGE_DEPTH:h,isTerminal:i,normalizeMergeArg:function(a){return a==null?{}:a},checkMergeArrayArgs:function(a,b){Array.isArray(a)&&Array.isArray(b)||g(0,3714,a,b)},checkMergeObjectArgs:function(a,b){j.checkMergeObjectArg(a),j.checkMergeObjectArg(b)},checkMergeObjectArg:function(a){!i(a)&&!Array.isArray(a)||g(0,3715,a)},checkMergeIntoObjectArg:function(a){(!i(a)||typeof a==="function")&&!Array.isArray(a)||g(0,3716,a)},checkMergeLevel:function(a){a<h||g(0,3717)},checkArrayStrategy:function(a){a==null||a in j.ArrayStrategies||g(0,3718)},ArrayStrategies:{Clobber:"Clobber",Concat:"Concat",IndexByIndex:"IndexByIndex"}};e.exports=j}),null);
__d("mergeDeepInto",["invariant","mergeHelpers"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("mergeHelpers").ArrayStrategies,i=b("mergeHelpers").checkArrayStrategy,j=b("mergeHelpers").checkMergeArrayArgs,k=b("mergeHelpers").checkMergeLevel,l=b("mergeHelpers").checkMergeObjectArgs,m=b("mergeHelpers").isTerminal,n=b("mergeHelpers").normalizeMergeArg,o=function(a,b,c,d){l(a,b);k(d);var e=b?Object.keys(b):[];for(var f=0;f<e.length;f++){var g=e[f];q(a,b,g,c,d)}},p=function(a,b,c,d){j(a,b);k(d);if(c===h.Concat)a.push.apply(a,b);else{var e=Math.max(a.length,b.length);for(var f=0;f<e;f++)q(a,b,f,c,d)}},q=function(a,b,c,d,e){var f=b[c];b=Object.prototype.hasOwnProperty.call(b,c);var i=b&&m(f),j=b&&Array.isArray(f),k=b&&!j&&!j,l=a[c],n=Object.prototype.hasOwnProperty.call(a,c),q=n&&m(l),r=n&&Array.isArray(l),s=n&&!r&&!r;q?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):b||(a[c]=l):r?i?a[c]=f:j?(h[d]||g(0,5117),d===h.Clobber&&(l.length=0),p(l,f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):!b:s?i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?o(l,f,d,e+1):!b:n||(i?a[c]=f:j?(a[c]=[],p(a[c],f,d,e+1)):k?(a[c]={},o(a[c],f,d,e+1)):!b)};a=function(a,b,c){b=n(b);i(c);o(a,b,c,0)};e.exports=a}),null);
__d("AsyncStorage",["Deferred","mergeDeepInto","mergeHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("mergeHelpers").ArrayStrategies,h=window.indexedDB,i=1,j="data",k=!1,l;c=Date.now();var m=new(b("Deferred"))();function a(){__p&&__p();var a=h.open("AsyncStorage",i);a.onerror=function(a){a=new Error("Failed to open AsyncStorage IndexedDB instance.");m.reject(a)};a.onsuccess=function(a){k&&!1,l=a.target.result,m.resolve({db:l}),l.onerror=function(a){a=new Error("AsyncStorage error: "+a.target.error.message);m.reject(a)}};a.onupgradeneeded=function(a){a=a.currentTarget.result;if(a.objectStoreNames&&a.objectStoreNames.contains(j))return;a.createObjectStore(j,{keyPath:"key"})}}h&&a();function n(a,b){if(l)try{a()}catch(a){b&&b(a)}else m.getPromise().then(function(){k&&!1,n(a,b)},function(a){b&&b(a)})}d={setItem:function(a,b,c){this.multiSet([[a,b]],function(a){c(a&&a[0]||null)})},getItem:function(a,b){this.multiGet([a],function(a,c){c=c!==void 0&&c[0]!==void 0&&c[0][1]!==void 0?c[0][1]:null;b(a&&a[0]||null,c)})},removeItem:function(a,b){this.multiRemove([a],function(a){b(a&&a[0]||null)})},multiGet:function(a,b){var c=[];this._multiOp(a,"readonly",function(a){return b(a,c)},function(a){return a},function(a,b,d){b&&a===b.key?(k&&!1,c.push([a,b.value.value])):c.push([a,null])})},multiSet:function(a,b){__p&&__p();if(this._persistentWritesDisabled){b(new Array(a.length).fill("writes disabled"));return}this._multiOp(a,"readwrite",b,function(a){return a[0]},function(a,b,c){if(b&&a[0]===b.key){var d=b.value;d.value=a[1];k&&!1;b.update(d)}else c.push(a)})},multiMerge:function(a,c){__p&&__p();this._multiOp(a,"readwrite",c,function(a){return a[0]},function(a,c,d){if(c&&a[0]===c.key){var e=c.value,f=JSON.parse(e.value);b("mergeDeepInto")(f,JSON.parse(a[1]),g.Clobber);k&&!1;e.value=JSON.stringify(f);c.update(e)}else k&&!1,d.push(a)})},multiRemove:function(a,b){this._multiOp(a,"readwrite",b,function(a){return a},function(a,b,c){b&&a===b.key&&(k&&!1,b["delete"]())})},getAllKeys:function(a){__p&&__p();n(function(){__p&&__p();var b=l.transaction([j],"readonly");b=b.objectStore(j).openCursor();var c=[];b.onsuccess=function(b){b=b.target.result;if(!b){a(null,c);return}c.push(b.key);b["continue"]()}},function(){return a(null,[])})},clear:function(a){__p&&__p();n(function(){__p&&__p();var b=l.transaction([j],"readwrite");b=b.objectStore(j).openCursor();b.onsuccess=function(b){b=b.target.result;if(!b){a(null);return}b["delete"]();b["continue"]()}},function(){return a(null)})},_multiOp:function(a,b,c,d,e){__p&&__p();n(function(){__p&&__p();var f=!1,g=a.slice().sort(function(a,b){a=d(a);b=d(b);if(a===b){var e=new Error("AsyncStorage._multiOp cannot process duplicate keys.");c&&c([e]);f=!0;return 0}return a<b?-1:1});if(f)return;var h=l.transaction([j],b),i=h.objectStore(j).openCursor(),m=[],n=0;i.onsuccess=function(a){__p&&__p();a=a.target.result;if(!a){while(n<g.length)e(g[n],a,m),n++;o();return}var b=a.key;k&&!1;while(d(g[n])<=b){k&&!1;e(g[n],a,m);n++;if(n===g.length){o();return}}b=d(g[n]);a["continue"](b)};function o(){var a=h.objectStore(j);m.forEach(function(b){k&&!1,a.add({key:b[0],value:b[1]})})}h.oncomplete=function(){c&&c(null)};h.onerror=function(a){a=new Error("IndexedDB error: "+a.target.error.message);c&&c([a])};k&&!1},function(a){c&&c([a])})},_persistentWritesDisabled:!1,disablePersistentWrites:function(){this._persistentWritesDisabled=!0}};e.exports=d}),null);
__d("MVideoCacheConfig",["CurrentUser","MVideoDownloadConfig","md5","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h={CACHE_PREFIX:"vc",PREFIX_SEPARATOR:"_",CONFIG_PREFIX:"config",KEYS:{lastCleanUp:"lastCleanUp"},isSupported:function(){try{g||(g=b("WebStorage"));return g.getLocalStorage()}catch(a){g=null;return!1}},currentAccountHash:function(){var a=""+b("CurrentUser").getAccountID();return b("md5")(a)},getUserPrefix:function(){return h.CACHE_PREFIX+h.PREFIX_SEPARATOR+h.currentAccountHash()+h.PREFIX_SEPARATOR},getCacheConfigKey:function(){return h.CACHE_PREFIX+h.PREFIX_SEPARATOR+h.CONFIG_PREFIX+h.PREFIX_SEPARATOR+h.currentAccountHash()},initCacheConfig:function(){var a={},c=Date.now()-2*b("MVideoDownloadConfig").cache_sync_interval_ms;a[h.KEYS.lastCleanUp]=c;a=JSON.stringify(a);c=h.getCacheConfigKey();g.getLocalStorage().setItem(c,a);return a},getCacheConfig:function(){var a=h.getCacheConfigKey();a=g.getLocalStorage().getItem(a);try{JSON.parse(a)}catch(b){a=null}a===null&&(a=h.initCacheConfig());a=JSON.parse(a);return a},getItemFromConfig:function(a){var b=h.getCacheConfig();return b[a]},setItemFromConfig:function(a,b){var c=h.getCacheConfig();c[a]=b;c=JSON.stringify(c);a=h.getCacheConfigKey();g.getLocalStorage().setItem(a,c)}};e.exports=h}),null);
__d("XHRRequestRetrier",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2=!1,this.$3=0,this.$4=0,this.$5=0,this.$6=1e3,this.$7=2,this.$8=.5,this.$9=a.getErrorHandler(),a.setErrorHandler(this.$11.bind(this)),this.$10=a.getAbortHandler(),a.setAbortHandler(this.$12.bind(this))}var c=a.prototype;c.setMaxAttempts=function(a){this.$5=a;return this};c.setBaseRetryDelayMs=function(a){this.$6=a;return this};c.setRetryBackoffFactor=function(a){this.$7=a;return this};c.setRetryFuzzFactor=function(a){this.$8=a;return this};c.send=function(){if(this.$2)return;if(this.$1.getTimeout())throw new Error("Not supported.");this.$3++;this.$4||(this.$4=this.$6);this.$1.send()};c.$11=function(){this.$3<this.$5?this.$13():this.$9&&this.$9.apply(this,arguments)};c.$12=function(){this.$2=!0,this.$10&&this.$10.apply(this,arguments)};c.$13=function(){var a=this.send.bind(this),c=Math.random()*2-1;c=c*this.$8;c=this.$4*(1+c);b("setTimeoutAcrossTransitions")(a,c);this.$4*=this.$7};return a}();e.exports=a}),null);
__d("URIDownloader",["invariant","URI","XHRRequest","XHRRequestRetrier"],(function(a,b,c,d,e,f,g){__p&&__p();var h=2e5,i=15,j=2e3,k=1.5;a=function(){"use strict";__p&&__p();function a(a,c){this.$1=new(b("URI"))(a),this.$2=c,this.$3=0,this.$4=0,this.$5=[]}var c=a.prototype;c.setResponseHandler=function(a){this.$10&&g(0,3234);this.$9=a;return this};c.setChunkedResponseHandler=function(a){this.$9&&g(0,3235);this.$10=a;return this};c.setErrorHandler=function(a){this.$11=a;return this};c.setAbortHandler=function(a){this.$12=a;return this};c.setProgressHandler=function(a){this.$13=a;return this};c.$14=function(a){if(this.$8)return;this.$13&&this.$13({total:this.$2,loaded:this.$4+(a?a:0)})};c.$15=function(){if(this.$8)return;if(this.$9){var a=null;this.$5&&(a=new Blob(this.$5));this.$9(a)}this.$10&&this.$10(this.$5)};c.$16=function(a){if(this.$8)return;this.$17(a)?this.$4<this.$2?(this.$14(),this.$18()):this.$15():this.$19()};c.$19=function(){if(this.$8)return;this.$11&&this.$11()};c.$20=function(){if(this.$8)return;this.$12&&this.$12()};c.$21=function(){var a=Math.min(this.$4+h,this.$2);this.$3=a-this.$4};c.$17=function(a){if(this.$8)return!1;if(this.$3!==a.size)return!1;this.$5.push(a);this.$4+=this.$3;this.$3=0;return!0};c.$18=function(){__p&&__p();var a=this;if(this.$8)return;var c=new(b("XHRRequest"))(this.$1).setMethod("GET").setResponseType("blob").setResponseHandler(this.$16.bind(this)).setErrorHandler(this.$19.bind(this)).setAbortHandler(this.$20.bind(this)).setDownloadProgressHandler(function(b){b.loadedBytes&&a.$14(b.loadedBytes)});this.$21();c.setRequestHeader("Range","bytes="+this.$4+"-"+(this.$4+this.$3-1));this.$7=c;c=new(b("XHRRequestRetrier"))(c).setMaxAttempts(i).setBaseRetryDelayMs(j).setRetryBackoffFactor(k);this.$6=c;try{c.send()}catch(a){this.$19()}};c.sendRequest=function(){this.$4=0,this.$18()};c.abort=function(){this.$8=!0,this.$7&&this.$7.abort?this.$7.abort():this.$12&&this.$12(),this.$22()};c.$22=function(){this.$7=null,this.$5=null,this.$12=null,this.$11=null,this.$9=null,this.$13=null};return a}();e.exports=a}),null);
__d("VideoDownloadDeleteReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CACHE_SYNC:"cache_sync",CONSISTENCY_CHECK:"consistency_check",USER_INITIATED:"user_initiated",CHUNKED_PLAYBACK_NOT_SUPPORTED:"chunked_playback_not_supported"})}),null);
__d("XVideoDownloadEventController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_download_event/",{video_id:{type:"Int",required:!0},viewer_id:{type:"Int",required:!0},app_id:{type:"Int",required:!0},event:{type:"Enum",required:!0,enumType:1}})}),null);
__d("VideoDownloadEventHandler",["CurrentUser","DataAttributeUtils","MRequest","XVideoDownloadEventController"],(function(a,b,c,d,e,f){__p&&__p();var g=412378670482;a=function(){"use strict";function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var c=a.prototype;c.sendServerDownloadEvent=function(){var a=b("XVideoDownloadEventController").getURIBuilder().setInt("video_id",this.$1).setInt("viewer_id",b("CurrentUser").getAccountID()).setInt("app_id",g).setEnum("event",this.$3).getURI(),c=null;this.$2&&(c=b("DataAttributeUtils").getDataFt(this.$2));new(b("MRequest"))(a).setMethod("POST").setData({ft_data:c}).send()};return a}();e.exports=a}),null);
__d("VideoDownloadLogger",["Bootloader","CurrentUser","md5"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=2147483647,j="video_download";function k(){return Date.now()}a=function(){"use strict";__p&&__p();function a(a){a=a?a:{},this.$1=a}var c=a.prototype;c.$2=function(a,b){b=babelHelpers["extends"]({},b,this.$1);!a;Object.prototype.hasOwnProperty.call(b,"time_ms")||(b.time_ms=k());Object.prototype.hasOwnProperty.call(b,"connectivity_type")||(b.connectivity_type=h.getConnectivityType());b={logData:b,event:a};g.post(j,b)};c.logEvent=function(a,c){!g||!h?b("Bootloader").loadModules(["Banzai","MVideoUtils"],function(b,d){g=b,h=d,this.$2(a,c)}.bind(this),"VideoDownloadLogger"):this.$2(a,c)};a.time=function(){return Math.floor(Date.now()/1e3)};a.generateSessionID=function(){return b("md5")([b("CurrentUser").getID(),a.time(),Math.random()*i].join(":"))};return a}();e.exports=a}),null);
__d("VideoDownloadLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CONTROL_IMPRESSION:"control_impression",DOWNLOAD_CANCELLED:"download_cancelled",DOWNLOAD_DELETED:"download_deleted",DOWNLOAD_FAILED:"download_failed",DOWNLOAD_FINISHED:"download_finished",DOWNLOAD_PROGRESS:"download_progress",DOWNLOAD_REQUESTED:"download_requested",SLOW_PLAYBACK_DETECTED:"slow_playback_detected",SURVEY_URI_REQUESTED:"survey_uri_requested",SURVEY_IMPRESSION_ATTEMPT:"survey_impression_attempt",SURVEY_PROMPT_RESULT:"survey_prompt_result",QUALITY_SELECTED:"quality_selected",QUALITY_SELECTOR_IMPRESSION:"quality_selector_impression",QUALITY_SELECTOR_NO_QUALITIES_AVAILABLE:"quality_selector_no_qualities_available",REQUESTED_PLAYING:"requested_playing",PAGE_SETTING_CHANGE:"page_setting_change"})}),null);
__d("VideoDownloadLoggerFields",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({APP_ID:"app_id",AVAILABLE_QUALITIES:"available_qualities",AVAILABLE_QUALITIES_COUNT:"available_qualities_count",BYTES_DOWNLOADED:"bytes_downloaded",CONFIG_NAME:"config_name",CONNECTIVITY_TYPE:"connectivity_type",DELETE_REASON:"delete_reason",DEVICE_YEAR_CLASS:"device_year_class",DOWNLOAD_ORIGIN:"download_origin",DOWNLOAD_SETTING:"download_setting",ELAPSED_TIME_MS:"elapsed_time_ms",ERROR:"error",ERROR_CODE:"error_code",EVENT_NAME:"event_name",EVENT_ORIGIN:"event_origin",EVENT_SUBORIGIN:"event_suborigin",IS_EMPLOYEE:"is_employee",IS_VISIBLE:"is_visible",OWNER_ID:"owner_id",QUALITY:"quality",REASON:"reason",SAVED_OFFLINE:"saved_offline",SESSION_ID:"session_id",TOTAL_SIZE:"total_size",TIME_MS:"time_ms",VIDEO_ID:"video_id"})}),null);
__d("VideoDownloadReason",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTO_INITIATED:"auto_initiated",USER_INITIATED:"user_initiated"})}),null);
__d("MVideoCache",["MLegacyDataStore","MVideoCacheConfig","MVideoDownloadConfig","URIDownloader","VideoDownloadDeleteReason","VideoDownloadEventHandler","VideoDownloadLogger","VideoDownloadLoggerEvent","VideoDownloadLoggerFields","VideoDownloadReason","emptyFunction","AsyncStorage","WebStorage"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i={},j=500,k=4e9,l=0,m={audio:"audio",video:"video"},n=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,a.chunked?this.$3=b===m.video?a.videoChunkCount:a.audioChunkCount:this.$3=1,this.$4=0}var b=a.prototype;b.getNextBuffer=function(a){if(this.$4>=this.$3)a(null);else{var b=this.$4++;o.getCachedStream(this.$1,this.$2,function(b){a(b)},a,this.$1.chunked?b:null)}};return a}(),o={DEFAULT_QUALITY_TAG:"default",DOWNLOAD_STARTED_TIME:"downloadStartedTime",DOWNLOAD_REASON:"downloadReason",OFFLINE_LIFESPAN:"offlineLifespan",VIEW_COUNT:"viewCount",RESOURCE_STATE:{loading:"loading",finished:"finished",error:"error"},ERROR:{QUOTA_EXCEEDED:1,NO_ACCESS:2},isDownloadInProgress:function(){return!o.isEmptyObject(i)},isSupported:function(){try{g||(g=b("AsyncStorage"));h||(h=b("WebStorage"));return h.getLocalStorage()&&window.indexedDB&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota}catch(a){g=null;h=null;return!1}},downloadVideo:function(a,c,d,e,f,g,h,i,j){__p&&__p();h===void 0&&(h={});i===void 0&&(i=b("VideoDownloadReason").USER_INITIATED);j===void 0&&(j=null);var k=JSON.parse(c),l=o.createVideoResource(k,g),m=o.createAudioResource(k,g);if(!l&&!m){e();return}var n=[];l&&n.push(l);m&&n.push(m);n=o.calculateTotalSize(c,g);var p=o.createTracking(a,n,k.offline_lifespan_ms,d,e,f,g,h.origin,i,j);if(!p){e();return}c={};c[b("VideoDownloadLoggerFields").EVENT_ORIGIN]=h.origin;c[b("VideoDownloadLoggerFields").EVENT_SUBORIGIN]=h.suborigin;o.logEventTracking(p,b("VideoDownloadLoggerEvent").DOWNLOAD_REQUESTED,c);o.flushAsyncStorage(function(){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(a,b){var c=o.getTotalSizeOfLoadingResources();if(a+p.totalSize+c<o.getMaxCacheUsage()&&p.totalSize+c+o.getMinFreeSpace()<b)o.downloadPostQuotaCheck(p,l,m);else{c="Used: "+a+" Remaining: "+b+" MaxCacheUsage: "+o.getMaxCacheUsage()+" MinFreeSpace: "+o.getMinFreeSpace();o.onError(p,o.ERROR.QUOTA_EXCEEDED,c)}},function(){o.onError(p,o.ERROR.QUOTA_EXCEEDED)})})},getDownloadNotificationUri:function(a){a=JSON.parse(a);return a&&a.download_finished_notification_uri},deleteVideoByID:function(a,c,d,e){__p&&__p();e===void 0&&(e={});c=c?c:b("emptyFunction");var f=o.getTracking(a),g={};g[b("VideoDownloadLoggerFields").EVENT_ORIGIN]=e.origin;g[b("VideoDownloadLoggerFields").EVENT_SUBORIGIN]=e.suborigin;g[b("VideoDownloadLoggerFields").REASON]=d||b("VideoDownloadDeleteReason").USER_INITIATED;if(f)o.logEventTracking(f,b("VideoDownloadLoggerEvent").DOWNLOAD_CANCELLED,g),o.deleteTracking(f,!0);else{o.logEvent(a,b("VideoDownloadLoggerEvent").DOWNLOAD_DELETED,g);e=new(b("VideoDownloadEventHandler"))(a,null,b("VideoDownloadLoggerEvent").DOWNLOAD_DELETED);e.sendServerDownloadEvent()}o.deleteCachedVideoFromStorage(a,c)},calculateTotalSize:function(a,b){a=JSON.parse(a);a=o.getStreamsForQuality(a,b);return a&&o.calculateTotalSizeInState(a,void 0)},getQualitiesFromResources:function(a){__p&&__p();a=JSON.parse(a);a=a&&a.streams;if(!a)return null;var b=null,c={};for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(m.video)){var g=Object.prototype.hasOwnProperty.call(e,"quality")&&String(e.quality);g&&(c[g]=e.size)}else f&&f.startsWith(m.audio)&&(b=e)}if(b)for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&c[h]&&(c[h]+=b.size);return c},deleteVideosByID:function(a,b,c){if(o.isSupported())for(var d=0;d<a.length;d++){var e=a[d];o.deleteVideoByID(e,function(){b(e)},c)}},isVideoDownloaded:function(a){if(o.isSupported()){a=o.getCachedVideoByID(a);if(a)return!0;else return!1}return!1},isVideoDownloading:function(a){return o.isSupported()?i&&i[a]:!1},getVideoSize:function(a,b,c){__p&&__p();if(o.isSupported()){var d=o.getTracking(a);if(d)return d.totalSize;d=o.getCachedVideoByID(a);if(d)return d.totalSize;if(b){a=o.calculateTotalSize(b,c);if(a&&a>0)return a}}return null},getVideoProgressByID:function(a){if(o.isSupported()){a=o.getTracking(a);if(a)return a.loaded}return 0},_fillMissingFieldsWithDefaults:function(a,c){for(var d=0;d<c.length;d++){var e=c[d];e===o.DOWNLOAD_STARTED_TIME&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.downloadStartedTime=0);e===o.DOWNLOAD_REASON&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.downloadReason=b("VideoDownloadReason").USER_INITIATED);e===o.OFFLINE_LIFESPAN&&!Object.prototype.hasOwnProperty.call(a,e)&&(a.offlineLifespan=b("MVideoDownloadConfig").cache_default_offline_lifespan_ms)}return a},getCachedVideoByID:function(a){__p&&__p();if(!b("MVideoDownloadConfig").enabled&&!b("MVideoDownloadConfig").simulate_legacy_ux)return null;var c=o.createPrefix(a),d=null;try{d=h.getLocalStorage().getItem(c)}catch(a){}c=d&&JSON.parse(d);c=c&&o._fillMissingFieldsWithDefaults(c,[o.DOWNLOAD_STARTED_TIME,o.DOWNLOAD_REASON,o.OFFLINE_LIFESPAN]);if(b("MVideoDownloadConfig").simulate_legacy_ux)return null;if(c&&c.chunked&&!b("MVideoDownloadConfig").cache_chunked_playback_enabled){setTimeout(function(){o.deleteVideoByID(a,b("emptyFunction"),b("VideoDownloadDeleteReason").CHUNKED_PLAYBACK_NOT_SUPPORTED)},0);return null}return c},getCachedVideosMetadata:function(a,c){__p&&__p();a===void 0&&(a=[]);c===void 0&&(c=!1);var d={};if(!o.isSupported())return d;var e=h.getLocalStorage(),f=Object.keys(e),g=b("MVideoCacheConfig").getUserPrefix();for(var i in f)if(Object.prototype.hasOwnProperty.call(f,i)&&f[i]&&f[i].startsWith(g)){var j=o.getVideoIDFromStorageKey(f[i]),k={};if(a.length>0){var l=null;try{l=e.getItem(f[i])}catch(a){if(!c)continue}l=l&&JSON.parse(l);if((!l||l.chunked&&!b("MVideoDownloadConfig").cache_chunked_playback_enabled)&&!c)continue;for(var m=0;m<a.length;m++){var n=a[m];l&&n in l&&(k[n]=l[n])}k=o._fillMissingFieldsWithDefaults(k,a)}d[j]=k}return d},getCachedVideoIDs:function(a){a===void 0&&(a=!1);return Object.keys(o.getCachedVideosMetadata([],a))},hasDownloadedVideos:function(){var a=o.getCachedVideoIDs();return a&&a.length&&a.length>0},getDownloadingVideos:function(){var a=Object.keys(i);return a},getVideoIDFromStorageKey:function(a){var c=b("MVideoCacheConfig").PREFIX_SEPARATOR;return a.split(c)[2]||""},getCachedVideo:function(a){a=b("MLegacyDataStore").get(a);return o.getCachedVideoByID(a.videoID)},getCachedVideoStream:function(a,b,c){o.getCachedStream(a,m.video,b,c)},getCachedAudioStream:function(a,b,c){o.getCachedStream(a,m.audio,b,c)},getCachedVideoStreamObject:function(a){return new n(a,m.video)},getCachedAudioStreamObject:function(a){return new n(a,m.audio)},getMaxCacheUsage:function(){var a=k;b("MVideoDownloadConfig")&&Object.prototype.hasOwnProperty.call(b("MVideoDownloadConfig"),"max_cache_usage")&&(a=b("MVideoDownloadConfig").max_cache_usage);return a},getMinFreeSpace:function(){var a=l;b("MVideoDownloadConfig")&&Object.prototype.hasOwnProperty.call(b("MVideoDownloadConfig"),"min_free_space")&&(a=b("MVideoDownloadConfig").min_free_space);return a},downloadPostQuotaCheck:function(a,b,c){if(!o.addTracking(a)){o.onError(a);return}b&&o.sendResourceRequest(a,b);c&&o.sendResourceRequest(a,c)},calculateTotalSizeInState:function(a,b){var c,d=0,e=a.length;for(c=0;c<e;c++){var f=a[c];(!b||f.state===b)&&(d+=f.size)}return d},isEmptyObject:function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)&&a[b])return!1;return!0},getTotalSizeOfLoadingResources:function(){var a=0;for(var b in i)if(Object.prototype.hasOwnProperty.call(i,b)&&i[b]){var c=i[b];a+=o.calculateTotalSizeInState(c.resources,o.RESOURCE_STATE.loading)}return a},deleteCachedVideoFromStorage:function(a,b){__p&&__p();a=o.createPrefix(a);try{h.getLocalStorage().removeItem(a)}catch(a){}o.getObjectKeysFromAsyncStorageByPrefix(a,function(a,c){if(a||!c){b();return}try{g.multiRemove(c,function(){b()})}catch(a){b()}})},flushAsyncStorage:function(a){__p&&__p();var b=o.createPrefix(0),c=["0"];c=new Blob(c,{type:"text/html"});try{g.setItem(b,c,function(){try{g.removeItem(b,function(){a()})}catch(b){a()}})}catch(c){try{g.removeItem(b,function(){a()})}catch(b){a()}}},getObjectKeysFromAsyncStorageByPrefix:function(a,b){__p&&__p();try{g.getAllKeys(function(c,d){if(c||!d){b(c);return}d=d.filter(function(b){return b.startsWith(a)});b(null,d)})}catch(a){b(a)}},getVideosFromAsyncStorage:function(a){__p&&__p();o.getObjectKeysFromAsyncStorageByPrefix(b("MVideoCacheConfig").getUserPrefix(),function(b,c){if(b||!c){a(b);return}b=c.map(o.getVideoIDFromStorageKey);c=b.reduce(function(a,b){a[b]=!0;return a},{});a(null,Object.keys(c))})},makeLocalAsyncStorageConsistent:function(a,c){__p&&__p();var d=o.getCachedVideoIDs(!0);o.getVideosFromAsyncStorage(function(e,f){__p&&__p();if(e||!f){a();return}var g={};e=d.concat(f);e.forEach(function(a){!g[a]?g[a]=1:g[a]++});g=Object.keys(g).filter(function(a){return g[a]===1});g.length>0&&o.deleteVideosByID(g,c,b("VideoDownloadDeleteReason").CONSISTENCY_CHECK);a()})},getCachedStream:function(a,b,c,d,e){b=o.createPrefix(a.videoID,b,e);try{g.getItem(b,function(b,e){b?(o.deleteVideoByID(a.videoID),d()):c(e)})}catch(b){o.deleteVideoByID(a.videoID),d()}},saveVideoInLocalStorage:function(a){var b=a.videoID&&o.createPrefix(a.videoID);try{h.getLocalStorage().setItem(b,JSON.stringify(a))}catch(a){throw a}},saveCachedVideo:function(a){__p&&__p();var b={};b.downloadStartedTime=a.downloadStartedTime;b.downloadReason=a.downloadReason;b.videoID=a.videoID;b.quality=a.quality;b.audioCodec=o.getResourceCodec(a,m.audio);b.videoCodec=o.getResourceCodec(a,m.video);b.totalSize=a.totalSize;b.offlineLifespan=a.offlineLifespan;b.viewCount=0;b.sessionID=a.sessionID;b.downloadOrigin=a.origin;b.chunked=a.chunked;b.videoChunkCount=a.videoChunkCount;b.audioChunkCount=a.audioChunkCount;o.saveVideoInLocalStorage(b)},logPlaybackRequest:function(a,c,d){__p&&__p();var e=null;if(c){c=o.getCachedVideoByID(a);var f=c.viewCount||0;c.viewCount=f+1;o.saveVideoInLocalStorage(c)}else e=o.ERROR.NO_ACCESS;f={};f[b("VideoDownloadLoggerFields").ERROR_CODE]=e;f[b("VideoDownloadLoggerFields").REASON]=d;o.logEvent(a,b("VideoDownloadLoggerEvent").REQUESTED_PLAYING,f)},createPrefix:function(a,c,d){a=b("MVideoCacheConfig").getUserPrefix()+a+b("MVideoCacheConfig").PREFIX_SEPARATOR+o.DEFAULT_QUALITY_TAG;c&&(a=a+b("MVideoCacheConfig").PREFIX_SEPARATOR+c);d!=void 0&&d!=null&&(a=a+b("MVideoCacheConfig").PREFIX_SEPARATOR+d);return a},createResource:function(a,b,c,d){var e={};e.src=a;e.type=b;e.state=o.RESOURCE_STATE.loading;e.codec=c;e.size=d;e.progress=0;return e},getDefaultVideoStream:function(a){__p&&__p();var b=null;for(var c=0;c<a.length;c++){var d=a[c],e=String(d.mimetype);if(e&&e.startsWith(m.video)){b=d;if(d["default"])return d}}return b},getStreamsForQuality:function(a,b){__p&&__p();var c=[];a=a&&a.streams;var d=!1,e=!1;for(var f=0;f<a.length;f++){var g=a[f],h=String(g.mimetype);if(h&&h.startsWith(m.video)&&!d){var i=String(g.quality);b&&i&&i===b&&(d=!!c.push(g))}else h&&h.startsWith(m.audio)&&!e&&(e=!!c.push(g))}if(!d){i=o.getDefaultVideoStream(a);i&&c.push(i)}return c},getUrlInfo:function(a,b,c){__p&&__p();a=o.getStreamsForQuality(a,c);if(!a)return null;c=null;for(var d=0;d<a.length;d++){var e=a[d],f=String(e.mimetype);if(f&&f.startsWith(b)){c=e;break}}return c},createVideoResource:function(a,b){a=o.getUrlInfo(a,m.video,b);return a&&o.createResource(a.url,m.video,a.codecs,a.size)},createAudioResource:function(a,b){a=o.getUrlInfo(a,m.audio,b);return a&&o.createResource(a.url,m.audio,a.codecs,a.size)},addTracking:function(a){if(i[a.videoID])return!1;i[a.videoID]=a;return!0},createTracking:function(a,c,d,e,f,g,h,i,j,k){__p&&__p();var l={};l.videoID=a;l.quality=h||o.DEFAULT_QUALITY_TAG;l.onDone=e;l.onError=f;l.onProgress=g;l.resources=[];l.deleted=!1;l.loaded=0;l.totalSize=c;l.offlineLifespan=d;l.sessionID=b("VideoDownloadLogger").generateSessionID();l.origin=i;l.logger=o.createLogger(l);l.downloadStartedTime=Date.now();l.chunked=b("MVideoDownloadConfig").cache_chunked_storage_enabled;l.loggingDataCallback=k;l.downloadReason=j;return l},getTracking:function(a){return i[a]},deleteTracking:function(a,c){__p&&__p();var d={};d[b("VideoDownloadLoggerFields").REASON]=a.downloadReason;if(!a.deleted){a.deleted=!0;i[a.videoID]=null;if(c){for(c=0;c<a.resources.length;c++)try{a.resources[c].downloader&&a.resources[c].downloader.abort()}catch(c){o.logEventTracking(a,b("VideoDownloadLoggerEvent").DOWNLOAD_FAILED,d)}}}},getResourceCodec:function(a,b){var c,d,e;e=a.resources.length;for(d=0;d<e;d++){c=a.resources[d];if(c.type===b)return c.codec}return null},updateTracking:function(a,b,c){__p&&__p();var d,e;if(a.deleted)return;c&&(b.state=c);b.state===o.RESOURCE_STATE.finished&&(b.type===m.video?a.videoChunkCount=b.chunkCount:b.type===m.audio&&(a.audioChunkCount=b.chunkCount));if(b.state===o.RESOURCE_STATE.loading)a.resources.push(b);else{c=o.RESOURCE_STATE.finished;b=a.resources.length;for(d=0;d<b;d++){e=a.resources[d];if(e.state===o.RESOURCE_STATE.loading){c=o.RESOURCE_STATE.loading;break}else e.state===o.RESOURCE_STATE.error&&(c=o.RESOURCE_STATE.error)}if(c===o.RESOURCE_STATE.error)o.deleteTracking(a),o.deleteCachedVideoFromStorage(a.videoID,function(){o.onError(a)});else if(c===o.RESOURCE_STATE.finished)try{o.saveCachedVideo(a),o.deleteTracking(a),o.onDone(a)}catch(b){o.deleteCachedVideoFromStorage(a.videoID,function(){o.onError(a)})}}},trackProgress:function(a){var c=0;for(var d in a.resources)Object.prototype.hasOwnProperty.call(a.resources,d)&&(c+=a.resources[d].progress);a.loaded=c;var e={};e[b("VideoDownloadLoggerFields").BYTES_DOWNLOADED]=a.loaded;o.logEventTracking(a,b("VideoDownloadLoggerEvent").DOWNLOAD_PROGRESS,e);return c},sendResourceRequest:function(a,c){__p&&__p();var d=new(b("URIDownloader"))(c.src,c.size);a.chunked?d.setChunkedResponseHandler(function(b){__p&&__p();try{var d=[];for(var e=0;e<b.length;e++){var f=[],h=o.createPrefix(a.videoID,c.type,e);f.push(h);h=b[e];f.push(h);d.push(f)}g.multiSet(d,function(d){c.chunkCount=b.length,o.updateTracking(a,c,d?o.RESOURCE_STATE.error:o.RESOURCE_STATE.finished)})}catch(b){o.updateTracking(a,c,o.RESOURCE_STATE.error)}}):d.setResponseHandler(function(b){try{var d=o.createPrefix(a.videoID,c.type);g.setItem(d,b,function(b){o.updateTracking(a,c,b?o.RESOURCE_STATE.error:o.RESOURCE_STATE.finished)})}catch(b){o.updateTracking(a,c,o.RESOURCE_STATE.error)}});d.setErrorHandler(function(){o.updateTracking(a,c,o.RESOURCE_STATE.error)});d.setProgressHandler(function(b){b.total&&(c.progress=b.loaded,a.onProgress(o.trackProgress(a),a.totalSize))});d.setAbortHandler(function(){setTimeout(function(){o.updateTracking(a,c,o.RESOURCE_STATE.error)},j)});o.updateTracking(a,c);c.downloader=d;d.sendRequest()},createLogger:function(a){var c={};c[b("VideoDownloadLoggerFields").DOWNLOAD_ORIGIN]=a.origin;c[b("VideoDownloadLoggerFields").QUALITY]=a.quality;c[b("VideoDownloadLoggerFields").SESSION_ID]=a.sessionID;c[b("VideoDownloadLoggerFields").TOTAL_SIZE]=a.totalSize;c[b("VideoDownloadLoggerFields").VIDEO_ID]=a.videoID;return new(b("VideoDownloadLogger"))(c)},getLogger:function(a){return!a.logger?null:a.logger},logEvent:function(a,c,d){var e=new(b("VideoDownloadLogger"))();d=d||{};d[b("VideoDownloadLoggerFields").VIDEO_ID]=a;a=o.getCachedVideoByID(a);a&&(d[b("VideoDownloadLoggerFields").DOWNLOAD_ORIGIN]=a.downloadOrigin,d[b("VideoDownloadLoggerFields").SESSION_ID]=a.sessionID,d[b("VideoDownloadLoggerFields").TOTAL_SIZE]=a.totalSize,d[b("VideoDownloadLoggerFields").QUALITY]=d[b("VideoDownloadLoggerFields").QUALITY]?d[b("VideoDownloadLoggerFields").QUALITY]:a.quality,d[b("VideoDownloadLoggerFields").SAVED_OFFLINE]=1);e.logEvent(c,d)},logEventTracking:function(a,c,d){var e=this.getLogger(a);d=d||{};Object.prototype.hasOwnProperty.call(d,b("VideoDownloadLoggerFields").REASON)||(d[b("VideoDownloadLoggerFields").REASON]=a.downloadReason);if(a.loggingDataCallback){var f=a.loggingDataCallback;d=f(d)}d[b("VideoDownloadLoggerFields").ELAPSED_TIME_MS]=Date.now()-a.downloadStartedTime;e.logEvent(c,d)},onError:function(a,c,d){var e={};e[b("VideoDownloadLoggerFields").ERROR_CODE]=c;e[b("VideoDownloadLoggerFields").ERROR]=d;o.logEventTracking(a,b("VideoDownloadLoggerEvent").DOWNLOAD_FAILED,e);a.onError(c)},onDone:function(a){o.logEventTracking(a,b("VideoDownloadLoggerEvent").DOWNLOAD_FINISHED),a.onDone()}};e.exports=o}),null);
__d("MVideoDownloadState",[],(function(a,b,c,d,e,f){a={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",DELETING:"deleting",NOTDOWNLOADED:"notdownloaded"};e.exports=a}),null);
__d("MVideoDownloadStateHandler",["MVideoCache","MVideoDownloadState"],(function(a,b,c,d,e,f){__p&&__p();var g=null;a=function(){"use strict";__p&&__p();function a(){this.$1={},this.$2={}}var c=a.prototype;c.addListener=function(a,b){this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b)};a.removeListeners=function(a){this.$3().$1[a]&&(this.$3().$1[a]=[])};c.setState=function(a,b){a.forEach(function(a){this.$2[a]=b;if(!this.$1[a])return;a=this.$1[a];a.forEach(function(a){try{a.call(window,b)}catch(a){}})},this)};c.getState=function(a){return this.$2[a]};a.$3=function(){g||(g=new a());return g};a.listen=function(a,b){this.$3().addListener(a,b),this.initializeState(a)};a.initializeState=function(c){b("MVideoCache").isVideoDownloaded(c)?a.downloaded([c]):b("MVideoCache").isVideoDownloading(c)?a.downloading([c],b("MVideoCache").getVideoProgressByID(c),b("MVideoCache").getVideoSize(c)):a.deleted([c])};a.getState=function(a){return this.$3().getState(a)};a.downloading=function(a,c,d){this.$3().setState(a,{state:b("MVideoDownloadState").DOWNLOADING,loaded:c,total:d})};a.downloaded=function(a){this.$3().setState(a,{state:b("MVideoDownloadState").DOWNLOADED})};a.cleanup=function(a){this.$3().setState(a,{state:b("MVideoDownloadState").DELETING})};a.deleted=function(a,c){this.$3().setState(a,{state:b("MVideoDownloadState").NOTDOWNLOADED,errorMessage:c})};return a}();e.exports=a}),null);
__d("MVideoPlaybackState",[],(function(a,b,c,d,e,f){a={NORMAL_PLAYBACK:"normalplayback",SLOW_PLAYBACK:"slowplayback",NOT_STARTED_PLAYBACK:"notstartedplayback"};e.exports=a}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f){__p&&__p();var g=!0,h=a.navigator.connection,i={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function c(){return g}function d(a){if(a==g)return;g=a;l.emit(a?"online":"offline")}function f(){return h?h.bandwidth:g?Infinity:0}function j(){return h?h.metered:!1}function k(){var a=h?String(h.type):"0";return i[a]||a}var l={getBandwidth:f,getType:k,isMetered:j,isOnline:c,setOnline:d};b("mixInEventEmitter")(l,{online:!0,offline:!0});l=l;a.addEventListener?(a.addEventListener("online",d.bind(null,!0)),a.addEventListener("offline",d.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",d.bind(null,!0)),a.attachEvent("offline",d.bind(null,!1)));e.exports=l}),null);
__d("MVideoUtils",["cx","Bootloader","CSS","DataAttributeUtils","DOM","MLegacyDataStore","Network","getViewportDimensions","performance"],(function(a,b,c,d,e,f,g){__p&&__p();var h=.5,i=0,j=null,k=null,l=null,m={PLAY_SIGIL:"playInlineVideo",INSERTION_POINT_SIGIL:"inlineVideo",LOADING_CLASS:"_2nmc",SHOWN_CLASS:"_53mu",SHOWN_CLASS_WITH_DOWNLOAD:"_2qoq",PLAYER_CLASS:"_53mv",FULL_WIDTH_PLAYER_CLASS:"_2c9v",SHOW_PAUSE_CLASS:"_3gzh",SHOW_PLAYING_CLASS:"_7bzf",SPHERICAL_CLASS:"_4a1j",DEBUGGER_CLASS:"_4551",PLAYER_STATE:{playing:"playing",paused:"paused"},API_INSTANCE_KEY:"m_video_player_api_instance_ref",createVideoNode:function(){var a={autobuffer:"true","x-webkit-airplay":"allow",controlslist:"nodownload",disablePictureInPicture:"true"};a=b("DOM").create("video",a);b("CSS").addClass(a,m.FULL_WIDTH_PLAYER_CLASS);b("CSS").addClass(a,m.PLAYER_CLASS);return a},getStoryNode:function(a){return a&&a.getNode("story-div")},_handleLoggingOnPlayWithBootload:function(a,c,d,f){__p&&__p();if(j.isLoggedIn()){f=this.getStoryNode(a)||f;if(f){a=b("DataAttributeUtils").getDataFt(f);if(a){f={ft:JSON.parse(a)};if(c){c=c.getLogger();c.setFTData(f)}d.fbid&&d.ownerID&&(a=k.parse(a,e.id),a.video_info={video_id:d.fbid,owner_id:d.ownerID},a=k.stringify(a));new l("/feedtracking/").setMethod("POST").setData({ft_data:a,clicked_uri:d.src,tn:d.trackingNodes}).send()}}}},handleLoggingOnPlay:function(a,c,d,e){b("Bootloader").loadModules(["CurrentUser","FBJSON","MRequest"],function(b,f,g){j=b,k=f,l=g,m._handleLoggingOnPlayWithBootload(a,c,d,e)},"MVideoUtils")},getHumanReadbleSize:function(a){var b=1e3,c=b*b;b=b*b*b;if(a>b)return this.formatNumber(a,b,2)+" GB";else return this.formatNumber(a,c,1)+" MB"},formatNumber:function(a,b,c){return Math.ceil(a/(b/Math.pow(10,c)))/Math.pow(10,c)},getDownloadProgressText:function(a,b){return m.getHumanReadbleSize(a)+" / "+m.getHumanReadbleSize(b)},getDownloadProgressPercentage:function(a,b){a=a/b*100;a=a.toFixed(1);return a.toString()},getConnectivityType:function(){var a=b("Network").getType(),c=null;a=="wifi"||a=="WIFI"?c="WIFI":(a=="cellular"||a=="2g"||a=="3g"||a=="wwan")&&(c="MOBILE");return c},getNetworkBandwidth:function(){var a=null;"connection"in navigator&&("downlinkMax"in navigator.connection&&(a=navigator.connection.downlinkMax));var b=null;try{b=parseFloat(a)}catch(a){}return typeof b!=="number"||isNaN(a)?null:b},getAvailableQualitiesString:function(a){return a&&a.join(", ")},isVisible:function(a){var c=b("getViewportDimensions")().height,d=b("getViewportDimensions")().width;if(a.height===0)return!1;var e=a.y-i+(1-h)*a.height,f=a.y+h*a.height,g=a.x+(1-h)*a.width;a=a.x+h*a.width;return e<0||f>=c||g<0||a>=d?!1:!0},getVideoDataFromMVideo:function(a){return b("MLegacyDataStore").get(a)},calculateBandwidth:function(){__p&&__p();var a=0,c=1e3,d=125e3;return function(){__p&&__p();if(a===0)for(var e=b("performance").getEntries(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;var i=h.responseEnd-h.responseStart;if(i>0){h=h.transferSize/i;i=h*(c/d);i>a&&(a=i)}}return a}}()};e.exports=m}),null);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.isVisible=function(){throw new Error("Should be overridden")};c.getDistanceToViewport=function(){throw new Error("Should be overridden")};c.playWithoutUnmute=function(a){throw new Error("Should be overridden")};c.prepareForPlay=function(){throw new Error("Should be overridden")};c.pause=function(a){throw new Error("Should be overridden")};c.isAutoplayable=function(){throw new Error("Should be overridden")};c.getDOMPosition=function(){throw new Error("Should be overridden")};c.isLooping=function(){throw new Error("Should be overridden")};c.isState=function(a){throw new Error("Should be overridden")};c.setLastActionReason=function(a){throw new Error("Should be overridden")};return b}(b("EventEmitter"));e.exports=a}),null);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("VideoPlayerLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AUTOPLAY_PREFERENCE_CHANGED:"autoplay_preference_changed",END_STALL_TIME:"end_stall_time",AUTOPLAY_PREFERENCE_STATUS:"autoplay_preference_status",ERROR_ALERT_SHOWN:"video_error_alert_shown",COMMERCIAL_BREAK_OFFSCREEN:"commercial_break_offscreen",COMMERCIAL_BREAK_ONSCREEN:"commercial_break_onscreen",NOT_AUTOPLAYING:"not_autoplaying",VIDEO_CHANNEL_NO_RELATED_VIDEO:"video_channel_no_related_video",VIDEO_ORIENTATION_CHANGED:"video_orientation_changed",AD_BREAK_STARTING_INDICATOR:"ad_break_starting_indicator",AD_BREAK_NON_INTERRUPTIVE_AD_START:"ad_break_non_interruptive_ad_start",AD_BREAK_NON_INTERRUPTIVE_AD_CLICK:"ad_break_non_interruptive_ad_click",AD_BREAK_PRE_ROLL_AD_START:"ad_break_pre_roll_ad_start",AD_BREAK_TAP_ON_TRAILER:"ad_break_tap_on_trailer",AD_BREAK_TAP_START_FROM_TRAILER:"ad_break_tap_start_from_trailer",ASSETS_LOADED:"assets_loaded",BUFFERED:"buffered",CANCELLED_REQUESTED_PLAYING:"cancelled_requested_playing",CAPTION_CHANGE:"caption_change",CAROUSEL_CHANGE:"carousel_change",CHROMECAST_AVAILABILITY_CHECKED:"chromecast_availability_checked",CHROMECAST_CAST_CLICKED:"chromecast_button_clicked",CHROMECAST_CAST_CONNECTED:"chromecast_connected",CHROMECAST_CAST_DISABLED:"chromecast_button_disabled",CHROMECAST_CAST_DISCONNECTED:"chromecast_disconnected",CHROMECAST_CAST_RECONNECTED:"chromecast_reconnected",CHROMECAST_CAST_VISIBLE:"chromecast_button_visible",CHROMECAST_NOT_SUPPORTED:"chromecast_not_supported",CLICK:"click",DISPLAYED:"displayed",REDISPLAYED:"redisplayed",ENTERED_FALLBACK:"entered_fallback",ENTERED_FS:"entered_fs",ENTERED_HD:"entered_hd",ERROR:"error",EXITED_FS:"exited_fs",EXITED_HD:"exited_hd",FINISHED_LOADING:"finished_loading",FINISHED_PLAYING:"finished_playing",HEADSET_CONNECTED:"headset_connected",HEADSET_DISCONNECTED:"headset_disconnected",HEART_BEAT:"heart_beat",HOST_ERROR:"host_error",HTTP_STATUS_UPDATE:"http_status_update",IMPRESSION:"impression",INVALID_URL:"invalid_url",MUTED:"muted",NO_SURFACE_UPDATE:"no_surface_update",PAUSED:"paused",PLAY_REQUESTED:"play_requested",PLAY_REQUESTED_OOB:"play_requested_oob",PLAYER_ALLOCATED:"player_allocated",PLAYER_FORMAT_CHANGED:"player_format_changed",PLAYER_LOADED:"player_loaded",PLAYING_LIVE_STARTED:"playing_live_started",PLAYING_LIVE_STOPPED:"playing_live_stopped",POP_FAILOVER:"pop_failover",PROGRESS:"progress",QUALITY_CHANGE:"quality_change",R2D2_SUMMARY:"r2d2_summary",R2D2_EVENT_VALIDATION:"r2d2_event_validation",READY_TO_PLAY:"ready_to_play",REPLAYED:"replayed",REPRESENTATION_ENDED:"representation_ended",REPRESENTATION_FIRST_ENDED:"representation_first_ended",REQUESTED:"requested",REQUESTED_PLAYING:"requested_playing",SCRUBBED:"scrubbed",SEEKED:"seeked",SPLASH_DISPLAYED:"splash_displayed",STALE:"stale",STARTED_PLAYING:"started_playing",STARTED_RECEIVING_BYTES:"started_receiving_bytes",STOPPED_PLAYING:"stopped_playing",STREAM_RESET:"stream_reset",SURFACE_UPDATED:"surface_updated",SWITCHED_IMPLEMENTATION:"switched_implementation",UNMUTED:"unmuted",UNPAUSED:"unpaused",USER_SELECTED_QUALITY:"user_selected_quality",VIDEO_CHAINING_IMPRESSION:"video_chaining_impression",VIDEO_CHAINING_TAP:"video_chaining_tap",VIDEO_CLICKED_WITHIN_PLAYER:"video_clicked_within_player",VIDEO_PLAYER_SERVICE_DISCONNECTED:"video_player_service_disconnected",VIDEO_PLAYER_SERVICE_RECONNECTED:"video_player_service_reconnected",VIDEO_PLAYER_SERVICE_UNAVAILABLE:"video_player_service_unavailable",VIDEO_PLAYING:"video_playing",VIDEO_SKIP_AD:"video_skip_ad",VOLUME_CHANGED:"volume_changed",VOLUME_DECREASE:"volume_decrease",VOLUME_INCREASE:"volume_increase",WATCH_AND_SCROLL_CHANNEL_ENTERED:"watch_and_scroll_channel_entered",WATCH_AND_SCROLL_EXITED:"watch_and_scroll_exited",WATCH_AND_SCROLL_ICON_HIGHLIGHTED:"watch_and_scroll_icon_highlighted",WATCH_AND_SCROLL_ICON_UNHIGHLIGHTED:"watch_and_scroll_icon_unhighlighted",WATCH_AND_SCROLL_PAUSED:"watch_and_scroll_paused",LIVE_SEGMENT_LOAD_ERROR:"live_segment_load_error",MANIFEST_DATA_TYPE_ERROR:"manifest_data_type_error",MANIFEST_LOAD_ERROR:"manifest_load_error",PLAYER_WARNING:"player_warning",PLAYHEAD_FELL_BEHIND_ERROR:"playhead_fell_behind_error",STREAM_SEGMENT_LOAD_ERROR:"stream_segment_load_error",UNEXPECTED_SEGMENT_ERROR:"unexpected_segment_error",NETWORK_TIMEOUT:"network_timeout",VIDEO_LOGGING_SESSION_TIMEOUT:"video_logging_session_timeout",RETRY_ON_ERROR:"retry_on_error",REPLICA_SWITCH:"replica_switch",REPLICA_SWITCH_SUCCESS:"replica_switch_success",REPLICA_SWITCH_FAILED:"replica_switch_failed",COMPLETION:"completion",VIEW:"view",PLAYED_FOR_THREE_SECONDS:"played_for_three_seconds",GUIDE_ENTERED:"guide_entered",GUIDE_EXITED:"guide_exited",HEADING_RESET:"heading_reset",SPHERICAL_FALLBACK_ENTERED:"spherical_fallback_entered",SPHERICAL_VIDEO_FALLBACK_CTA_CLICKED:"spherical_video_fallback_cta_clicked",VIEWPORT_ROTATED:"viewport_rotated",VIEWPORT_ZOOMED:"viewport_zoomed",BANZAI_OAUTH_GK_ERROR:"banzai_oauth_gk_error",BANZAI_OAUTH_PARSE_ERROR:"banzai_oauth_parse_error",BANZAI_OAUTH_SESSION_ERROR:"banzai_oauth_session_error",VIEWABILITY_CHANGED:"viewability_changed",PLAYER_SEEK:"player_seek",VIDEO_CDN_URL_EXPIRED:"video_cdn_url_expired",VIDEO_CDN_URL_REFRESHED:"video_cdn_url_refreshed",VIDEO_CDN_URL_REFRESH_ERROR:"video_cdn_url_refresh_error"})}),null);
__d("R2D2VideoMetadata",["uuid"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3,h=10;a=function(){"use strict";__p&&__p();function a(a){this.$1=a.video_id,this.$2=a.ad_client_token,this.$3=a.player_origin,this.$4=a.player_instance_key,this.$6=parseInt(a.playback_duration*g,h),this.$5=b("uuid")()}var c=a.prototype;c.toJSON=function(){return{video_id:this.$1,ad_client_token:this.$2,player_origin:this.$3,player_instance_key:this.$4,r2d2_session_id:this.$5,duration_ms:this.getDurationMs()}};c.getVideoId=function(){return this.$1};c.getDurationMs=function(){return parseInt(this.$6,h)};c.setDurationMs=function(a){this.$6=a};return a}();e.exports=a}),null);
__d("R2D2VideoEventValidationSummary",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$2=0,this.$1=new Map()}var b=a.prototype;b.addEvent=function(a){this.$1.has(a)||this.$1.set(a,0);var b=this.$1.get(a);this.$1.set(a,b+1);this.$2++};b.getEvents=function(){return this.$1};b.getEventsCount=function(){return this.$2};b.toJSON=function(){var a={},b=[];this.$1.forEach(function(c,d){a[d]=c,b.push(d)});return{events_count:JSON.stringify(a),events_name:"['"+b.join("','")+"']"}};return a}();e.exports=a}),null);
__d("R2D2VideoWatchTimeSegment",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getStartTimeMs=function(){return this.$1};b.getEndTimeMs=function(){return this.$2};return a}();e.exports=a}),null);
__d("R2D2VideoState",["R2D2VideoWatchTimeSegment"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b,this.reset()}var c=a.prototype;c.startPlaying=function(a){this.$3||(this.$3=!0,this.$6=a,this.$4||(this.$7=a))};c.stopPlaying=function(a){this.$3&&(this.$3=!1,this.addPlaySegment(this.$6,a),this.$4||this.addPlaySegmentWithSound(this.$7,a))};c.addPlaySegmentHelper=function(a,c,d){__p&&__p();if(c>=d)return;d=new(b("R2D2VideoWatchTimeSegment"))(c,d);var e=!1;for(var f=0;f<a.length;f++)if(a[f].getStartTimeMs()>c){a.splice(f,0,d);e=!0;break}e||a.push(d)};c.addPlaySegment=function(a,b){this.addPlaySegmentHelper(this.$8,a,b)};c.addPlaySegmentWithSound=function(a,b){this.addPlaySegmentHelper(this.$9,a,b)};c.setFinishedPlaying=function(){this.$5=!0};c.getFinishedPlaying=function(){return this.$5};c.setMuted=function(a){this.$4||(this.$4=!0,this.$3&&this.addPlaySegmentWithSound(this.$7,a))};c.setUnmuted=function(a){this.$4&&(this.$4=!1,this.$7=a)};c.getVideoId=function(){return this.$1};c.getDurationMs=function(){return this.$2};c.setDurationMs=function(a){this.$2=a};c.getWatchedSegments=function(){return this.$8};c.getWatchedSegmentsWithSound=function(){return this.$9};c.reset=function(){this.$3=!1,this.$4=!0,this.$5=!1,this.$6=0,this.$7=0,this.$8=[],this.$9=[]};return a}();e.exports=a}),null);
__d("R2D2VideoSession",["R2D2VideoState","R2D2VideoEventValidationSummary"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3,h=90*60*1e3;a=function(){"use strict";__p&&__p();function a(a,c,d){this.$4=new(b("R2D2VideoState"))(a.getVideoId(),a.getDurationMs()),this.$5=c,this.$6=d,this.$7=a,this.$8=[],this.$3=!1,this.$9=new(b("R2D2VideoEventValidationSummary"))()}var c=a.prototype;c.addEvent=function(a,b){if(this.$10(a,b))return;this.$11(b);this.$5.processEvent(a,b,this.$4);this.$2=new Date();this.$3=!0;this.$9.addEvent(a);this.$12(a,b)};c.$11=function(a){a=a.playback_duration*g;this.$7.setDurationMs(a);this.$4.setDurationMs(a)};c.$12=function(a,b){var c={};c.Name=a;c.ClientTime=new Date();c.seq_num=b.seq_num;c.video_time_position=b.video_time_position;b.video_last_start_time_position!==void 0&&(c.video_last_start_time_position=b.video_last_start_time_position);this.$8.push(c)};c.$10=function(a,b){if(this.$8.length<1)return!1;var c=this.$8[this.$8.length-1];return c.Name===a&&c.video_time_position==b.video_time_position};c.hasUpdates=function(){return this.$3};c.hasExpired=function(){return this.$2.getTime()<=Date.now()-h};c.recalculateDelta=function(){var a=this.$6.getVideoStateSummary(this.$4),b=this.$6.calculateDelta(a,this.$1);this.$8.forEach(function(a){b.addDebugInfo(a)});this.$8=[];this.$1=a;this.$3=!1;return b};c.getMetadata=function(){return this.$7};c.getDebugInfo=function(){return this.$8};c.getEventValidationSummary=function(){return this.$9};c.getStateVideoDurationMsForTesting=function(){return this.$4.getDurationMs()};return a}();e.exports=a}),null);
__d("R2D2VideoStateMachine",["VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.processEvent=function(a,c,d){__p&&__p();switch(a){case b("VideoPlayerLoggerEvent").STARTED_PLAYING:case b("VideoPlayerLoggerEvent").UNPAUSED:d.startPlaying(c.video_time_position*g);break;case b("VideoPlayerLoggerEvent").FINISHED_PLAYING:d.stopPlaying(c.video_time_position*g);d.setFinishedPlaying();break;case b("VideoPlayerLoggerEvent").PAUSED:d.stopPlaying(c.video_time_position*g);break;case b("VideoPlayerLoggerEvent").MUTED:d.setMuted(c.video_time_position*g);break;case b("VideoPlayerLoggerEvent").UNMUTED:d.setUnmuted(c.video_time_position*g);break}};return a}();e.exports=a}),null);
__d("R2D2FinishCountMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="finish_count";a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.compute=function(a){return a.getFinishedPlaying()?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2UniqueTimeSpentMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="unique_time_spent_ms";a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.compute=function(a){return this.$1(a)};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};b.$1=function(a){__p&&__p();var b=0,c=0;a=a.getWatchedSegments();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};return a}();e.exports=a}),null);
__d("R2D2PlayCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f){__p&&__p();var g="play_count";a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.compute=function(a){var c=new(b("R2D2UniqueTimeSpentMetric"))();return a.getWatchedSegments().length>0&&c.compute(a)>0?1:0};c.computeDelta=function(a,b){return a-b};c.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2VideoPlayRetention0to15s",[],(function(a,b,c,d,e,f){__p&&__p();var g="video_play_retention_0_to_15s",h=15,i=0,j=1e3;a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.compute=function(a){__p&&__p();var b=new Array(h-i+1);b.fill(0);a=a.getWatchedSegments();var c=10;for(var d=0;d<a.length;d++){var e=parseInt(a[d].getStartTimeMs()/j,c),f=parseInt(a[d].getEndTimeMs()/j,c);for(var e=e;e<=f;e++)if(e>=i&&e<=h)b[e-i]=1;else if(e>h)break}return b};b.computeDelta=function(a,b){var c=[];if(a.length!==b.length)return c;for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};b.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2VideoStateSummary",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$2=[],this.$1=new Map()}var b=a.prototype;b.getMetricValue=function(a){a=this.$1.get(a);return a===null||a===void 0?null:a};b.setMetricValue=function(a,b){b!==null&&this.$1.set(a,b)};b.toJSON=function(){var a=this,b={};this.$1.forEach(function(c,d){b[d]=a.$3(c)});if(this.$2.length>0){var c="debug_details";b[c]=JSON.stringify(this.$2)}return b};b.addDebugInfo=function(a){this.$2.push(a)};b.$3=function(a){return Array.isArray(a)?"["+a.toString()+"]":a};return a}();e.exports=a}),null);
__d("R2D2MetricsHelper",[],(function(a,b,c,d,e,f){__p&&__p();a={isPercentageCovered:function(a,b,c){if(b===0)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(e.getStartTimeMs()<=b*a&&e.getEndTimeMs()>=b*a)return!0}return!1}};e.exports=a}),null);
__d("R2D2ViewCountPercentage",["R2D2MetricsHelper"],(function(a,b,c,d,e,f){__p&&__p();var g="view_count_";a=function(){"use strict";__p&&__p();function a(a){this.percentFactor=a}var c=a.prototype;c.compute=function(a){return b("R2D2MetricsHelper").isPercentageCovered(this.percentFactor/100,a.getDurationMs(),a.getWatchedSegments())?1:0};c.computeDelta=function(a,b){return a-b};c.getMetricName=function(){return g+this.percentFactor};return a}();e.exports=a}),null);
__d("R2D2ViewCount100Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f){var g=100;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,g)||this}return b}(b("R2D2ViewCountPercentage"));e.exports=a}),null);
__d("R2D2ViewCount10Metric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f){__p&&__p();var g="true_view_count",h=10*1e3,i=.97;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.compute=function(a){var c=new(b("R2D2UniqueTimeSpentMetric"))();return c.compute(a)>=h||a.getDurationMs()>0&&c.compute(a)>=a.getDurationMs()*i?1:0};c.computeDelta=function(a,b){return a-b};c.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2ViewCount25Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f){var g=25;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,g)||this}return b}(b("R2D2ViewCountPercentage"));e.exports=a}),null);
__d("R2D2ViewCount50Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f){var g=50;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,g)||this}return b}(b("R2D2ViewCountPercentage"));e.exports=a}),null);
__d("R2D2ViewCount75Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f){var g=75;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,g)||this}return b}(b("R2D2ViewCountPercentage"));e.exports=a}),null);
__d("R2D2ViewCount95Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f){var g=95;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,g)||this}return b}(b("R2D2ViewCountPercentage"));e.exports=a}),null);
__d("R2D2ViewCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f){__p&&__p();var g="view_count",h=3e3,i=.97;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.compute=function(a){var c=new(b("R2D2UniqueTimeSpentMetric"))();return c.compute(a)>=h||a.getDurationMs()>0&&c.compute(a)>=a.getDurationMs()*i?1:0};c.computeDelta=function(a,b){return a-b};c.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2ViewCountRetentionGraphMetric",["R2D2ViewCountMetric"],(function(a,b,c,d,e,f){__p&&__p();var g="retention_graph",h=4,i=40,j=1e3,k=10;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.computeDelta=function(a,b){if(a.length!==b.length)return[];var c=[];for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};c.getMetricName=function(){return g};c.compute=function(a){__p&&__p();var c=a.getDurationMs();if(isNaN(c)||c<=0)return[];c=new(b("R2D2ViewCountMetric"))().compute(a);var d=a.getDurationMs(),e=parseInt(((d-1)/(j*h)+1)*h,k);e=Math.min(e,i);var f=new Array(e+1);f.fill(0);if(c==0)return f;c=a.getWatchedSegments();for(var a=0;a<c.length;a++){var g=c[a],l=parseInt(e*g.getStartTimeMs()/d,k);g=parseInt(e*g.getEndTimeMs()/d,k);if(l<=g&&l>=0&&g<=e)for(var l=l;l<=g;l++)f[l]=1}return f};return a}();e.exports=a}),null);
__d("R2D2UniqueTimeSpentWithSoundMetric",[],(function(a,b,c,d,e,f){__p&&__p();var g="unique_time_spent_with_sound_ms";a=function(){"use strict";__p&&__p();function a(){}var b=a.prototype;b.compute=function(a){return this.$1(a)};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};b.$1=function(a){__p&&__p();var b=0,c=0;a=a.getWatchedSegmentsWithSound();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};return a}();e.exports=a}),null);
__d("R2D2ViewCountWithSoundMetric",["R2D2UniqueTimeSpentWithSoundMetric"],(function(a,b,c,d,e,f){__p&&__p();var g="view_count_with_sound_on",h=3e3,i=.97;a=function(){"use strict";__p&&__p();function a(){}var c=a.prototype;c.compute=function(a){var c=new(b("R2D2UniqueTimeSpentWithSoundMetric"))();return c.compute(a)>=h||a.getDurationMs()>0&&c.compute(a)>=a.getDurationMs()*i?1:0};c.computeDelta=function(a,b){return a-b};c.getMetricName=function(){return g};return a}();e.exports=a}),null);
__d("R2D2VideoStateSummaryCalculator",["R2D2FinishCountMetric","R2D2PlayCountMetric","R2D2UniqueTimeSpentMetric","R2D2VideoPlayRetention0to15s","R2D2VideoStateSummary","R2D2ViewCount100Metric","R2D2ViewCount10Metric","R2D2ViewCount25Metric","R2D2ViewCount50Metric","R2D2ViewCount75Metric","R2D2ViewCount95Metric","R2D2ViewCountMetric","R2D2ViewCountRetentionGraphMetric","R2D2ViewCountWithSoundMetric"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=[new(b("R2D2UniqueTimeSpentMetric"))(),new(b("R2D2PlayCountMetric"))(),new(b("R2D2ViewCountMetric"))(),new(b("R2D2VideoPlayRetention0to15s"))(),new(b("R2D2FinishCountMetric"))(),new(b("R2D2ViewCountRetentionGraphMetric"))(),new(b("R2D2ViewCount25Metric"))(),new(b("R2D2ViewCount50Metric"))(),new(b("R2D2ViewCount75Metric"))(),new(b("R2D2ViewCount95Metric"))(),new(b("R2D2ViewCount100Metric"))(),new(b("R2D2ViewCountWithSoundMetric"))(),new(b("R2D2ViewCount10Metric"))()]}var c=a.prototype;c.getVideoStateSummary=function(a){var c=new(b("R2D2VideoStateSummary"))();this.$1.forEach(function(b){return c.setMetricValue(b.getMetricName(),b.compute(a))});return c};c.calculateDelta=function(a,c){var d=new(b("R2D2VideoStateSummary"))();this.$1.forEach(function(b){var e=a.getMetricValue(b.getMetricName());if(c!==void 0){var f=c.getMetricValue(b.getMetricName());e=b.computeDelta(e,f)}d.setMetricValue(b.getMetricName(),e)});return d};return a}();e.exports=a}),null);
__d("R2D2Logger",["Banzai","R2D2VideoMetadata","R2D2VideoSession","R2D2VideoStateMachine","R2D2VideoStateSummaryCalculator","VideoPlayerStateBasedLoggingEvents","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g=10*1e3,h="video_player",i="r2d2_summary",j="r2d2_event_validation";a=function(){"use strict";__p&&__p();function a(a){this.$4=a,this.$2=new(b("R2D2VideoStateSummaryCalculator"))(),this.$1=new Map()}var c=a.prototype;c.setScriptPath=function(a){this.$3=a};c.$5=function(a,b){return a+":"+b};c.addEvent=function(a,c){var d=this;if(this.shouldNotLogEvent(a))return;var e=this.$5(c.player_instance_key,c.video_id),f=this.$1.get(e);f==null&&(f=new(b("R2D2VideoSession"))(new(b("R2D2VideoMetadata"))(c),new(b("R2D2VideoStateMachine"))(),this.$2),this.$1.set(e,f));f.addEvent(a,c);setTimeout(function(){return d.$6()},g)};c.$6=function(){var a=this,c=[];this.$1.forEach(function(d,e){var f=null;d.hasUpdates()?f=a.createR2D2SummaryLoggingData(d.getMetadata(),d.recalculateDelta(),i):d.hasExpired()&&(c.push(e),f=a.createR2D2SummaryLoggingData(d.getMetadata(),d.getEventValidationSummary(),j));f!==null&&b("Banzai").post(h,f)});c.forEach(function(b){a.$1["delete"](b)})};c.createR2D2SummaryLoggingData=function(a,b,c){a=Object.assign(a.toJSON(),b.toJSON());return{event:c,logData:a,scriptPath:this.$3,source:this.$4}};c.shouldLogForR2D2=function(){return b("gkx")("676938")};c.shouldNotLogEvent=function(a){var c=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);return!c.has(a)};return a}();e.exports=a}),null);
__d("VideoPlayerLoggerErrorStates",[],(function(a,b,c,d,e,f){e.exports={PLAYBACK_FAILURE:"playback_failure",PLAYER_FAILURE:"player_failure"}}),null);
__d("VideoPlayerLoggerErrors",[],(function(a,b,c,d,e,f){e.exports={ENTERED_FALLBACK:"entered_fallback",ERROR_CALLING_FLASH:"error_calling_flash"}}),null);
__d("VideoPlayerLoggerFallbackReasons",[],(function(a,b,c,d,e,f){e.exports={TIMEOUT:"timeout",FLASH_ERROR:"flash_error",FLASH_UNAVAILABLE:"flash_unavailable"}}),null);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){e.exports={STARTED:"started",UNPAUSED:"unpaused"}}),null);
__d("VideoPlayerLoggerSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ADS:"ads",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",AYMT:"aymt",BALLOT:"ballot",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",CAMERA_POST:"camera_post",CANDIDATE_VIDEOS:"candidate_videos",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",CORPORATE_CARD_APPLICATION:"corporate_card_application",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_VERSE_DESTINATION:"games_verse_destination",GAMES_VIDEO_LIVE_RECOMMENDATION:"games_video_live_recommendation",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_HOME_STREAMER_HUB:"games_video_home_streamer_hub",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GAMES_VIDEO_TOP_WEEKLY_CLIPS_STREAMER_PAGE:"games_video_top_weekly_clips_streamer_page",GAMES_VIDEO_HIGHLIGHTED_CLIPS_STREAMER_PAGE:"games_video_highlighted_clips_streamer_page",GAMES_VIDEO_SEARCH_UNIT:"games_video_search_unit",GAMES_VIDEO_SOCIAL_PLUGIN:"games_video_social_plugin",GAMES_VIDEO_HUB:"games_video_hub",GAMES_VIDEO_HUB_REDIRECT_NOTIFICATION:"games_video_hub_redirect_notification",GAMES_VIDEO_HUB_REDIRECT_UNKNOWN:"games_video_hub_redirect_unknown",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",HTML5:"html5",INLINE:"inline",INSIGHTS:"insights",INTERN_CURATION:"intern_curation",INTERN_EXAMPLE:"intern_example",ISSUES_MODULE:"issues_module",LIVE_BEEPER:"live_beeper",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_LINEAR:"live_linear",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LIVING_ROOM_COMMENTATING:"living_room_commentating",LIVING_ROOM_RECAP_FULLSCREEN:"living_room_recap_fullscreen",LIVING_ROOM_RECAP_INLINE:"living_room_recap_inline",LOOKBACK:"lookback",MEDIA_COLLAGE:"media_collage",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MISC:"misc",MOBILE:"mobile",NOT_SPECIFIED_PLEASE_FIX:"not_specified_please_fix",OFFERS_DETAIL:"offers_detail",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_VIDEO_SET:"pages_video_set",PAGES_MESSAGING_VIDEO:"pages_messaging_video",PAGES_COVER:"pages_cover",PAGES_TIMELINE_PAGES_COVER:"pages_timeline_pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_HOME_HERO:"pages_home_hero",VIDEO_PAGE_SPOTLIGHT_UNIT:"video_page_spotlight_unit",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",PERMALINK:"permalink",PROFILE_OVERVIEW:"profile_overview",PROFILE_COVER:"profile_cover",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",REPORT_FLOW:"report_flow",REVIEW:"review",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SERP_VIDEOS_TAB:"serp_videos_tab",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SRT_REVIEW:"srt_review",TAHOE:"tahoe",TOPIC_CHANNEL_LIVING_ROOM:"topic_channel_living_room",TOPIC_GAMING:"topic_gaming",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TRIVIA_GAME_ADMIN_DASHBOARD:"trivia_game_admin_dashboard",TV:"tv",USER_VIDEO_TAB:"user_video_tab",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_CATALOG:"video_home_catalog",VIDEO_HOME_EXPLORE:"discover",VIDEO_HOME_WATCHLIST:"watchlist",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",WATCH_SCROLL:"watch_scroll",UFI_COMMENT_ATTACHMENT:"ufi_comment_attachment",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll",GAMES_VIDEO_STREAMER_SEARCH_UNIT:"games_video_streamer_unit",GAMES_STREAMER_DASHBOARD:"games_streamer_dashboard",ADS_PREVIEW:"ads_preview",VIDEO_PAGE_UNSPECIFIED:"video_page_unspecified",SPOTLIGHT_LIVE:"spotlight_live",SPOTLIGHT_FEATURED:"spotlight_featured",SPOTLIGHT_POPULAR:"spotlight_popular",SPOTLIGHT_UNKNOWN:"spotlight_unknown",VIDEOS_CARD:"videos_card",VIDEOS_TAB:"videos_tab",PLAYLISTS_TAB:"playlists_tab",PLAYLISTS_CARD:"playlists_card",PLAYLIST_PAGE:"playlist_page",CIVIC_PROPOSAL:"civic_proposal",BUSINESS_FEED:"business_feed",REDIRECTED_WATCH_SERP:"redirected_watch_serp",SOTTO_CONSIDERATION_PAGE:"sotto_consideration_page",RESULTS:"results",SERIES_CARD:"series_card",WATCH_HISTORY:"watch_history",WATCH:"watch",VIDEO_LIST:"video_list"})}),null);
__d("VideoPlayerLogger",["invariant","Banzai","FBLogger","R2D2Logger","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerLoggerErrors","VideoPlayerLoggerErrorStates","VideoPlayerLoggerEvent","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VideoPlayerHTML5Experiments").useBanzaiVitalForLive,i=b("VideoPlayerHTML5Experiments").discerningAbandonStallLogging,j="video_player",k=5e3,l=function(){return b("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?b("performanceAbsoluteNow")():Date.now()};a=function(){__p&&__p();function a(a,c){this.$2=a,this.$3=null,this.$6={},this.$4=c,this.$8=0,this.$9=0,this.$10=0,this.$11=0,this.$7=[],this.$20=0,this.$21=0,this.$12=0,this.$28=!1,this.$17=!1,this.$30(),this.$31(),this.$29=new(b("R2D2Logger"))(this.$2)}var c=a.prototype;c.updateSource=function(a){this.$2=a};c.getSource=function(){return this.$2};c.logEvent=function(a,c){__p&&__p();c=babelHelpers["extends"]({},c,this.$4);c.initial_event=!Object.prototype.hasOwnProperty.call(this.$6,a);Object.prototype.hasOwnProperty.call(c,"time_ms")||(c.time_ms=l());Object.prototype.hasOwnProperty.call(c,"time")||(c.time=Math.round(c.time_ms/1e3));c.is_stalling=this.$32();c.error_user_info=this.$33(c.error_user_info);this.$3&&Object.assign(c,this.$3);switch(a){case b("VideoPlayerLoggerEvent").PAUSED:case b("VideoPlayerLoggerEvent").FINISHED_PLAYING:if(this.$25){var d=this.$25,e=d.getABREvaluation();c.ideal_samples=e.idealSamples;c.conservative_samples=e.conservativeSamples;c.aggressive_samples=e.aggressiveSamples;c.conservative_resolution_constrained_samples=e.conservativeResolutionConstrainedSamples;c.last_quality_switch_reason=e.lastQualitySwitchReason;c.reason&&d.setLastQualitySwitchReason(c.reason)}e=typeof this.$26==="function"&&this.$26();d=typeof this.$27==="function"&&this.$27();typeof d==="number"&&typeof e==="number"&&(c.dropped_frame_count=e,c.total_frame_count=d);break}switch(a){case b("VideoPlayerLoggerEvent").STARTED_PLAYING:case b("VideoPlayerLoggerEvent").UNPAUSED:this.$28=!0;break;case b("VideoPlayerLoggerEvent").FINISHED_PLAYING:case b("VideoPlayerLoggerEvent").ERROR:case b("VideoPlayerLoggerEvent").PAUSED:this.$28=!1;break}switch(a){case b("VideoPlayerLoggerEvent").REQUESTED_PLAYING:this.$30();this.$34();this.$6[b("VideoPlayerLoggerEvent").STARTED_PLAYING]?c.state=b("VideoPlayerLoggerPlayerStates").UNPAUSED:c.state=b("VideoPlayerLoggerPlayerStates").STARTED;break;case b("VideoPlayerLoggerEvent").STARTED_PLAYING:case b("VideoPlayerLoggerEvent").UNPAUSED:case b("VideoPlayerLoggerEvent").FINISHED_PLAYING:case b("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING:case b("VideoPlayerLoggerEvent").ERROR:case b("VideoPlayerLoggerEvent").PAUSED:case b("VideoPlayerLoggerEvent").REPRESENTATION_ENDED:case b("VideoPlayerLoggerEvent").HEART_BEAT:if(a===b("VideoPlayerLoggerEvent").ERROR&&b("VideoPlayerExperiments").disableStallLoggingForError)break;if(a==b("VideoPlayerLoggerEvent").REPRESENTATION_ENDED&&!this.$6[b("VideoPlayerLoggerEvent").STARTED_PLAYING])break;if(a===b("VideoPlayerLoggerEvent").HEART_BEAT&&(!this.$6[b("VideoPlayerLoggerEvent").STARTED_PLAYING]||!b("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTimeV2||this.$32()))break;a===b("VideoPlayerLoggerEvent").HEART_BEAT&&(c.v2_heart_beat=!0);(a===b("VideoPlayerLoggerEvent").STARTED_PLAYING||a===b("VideoPlayerLoggerEvent").UNPAUSED)&&(this.$12=c.time_ms,this.$35());if(a===b("VideoPlayerLoggerEvent").ERROR&&c.state!==b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)break;a===b("VideoPlayerLoggerEvent").CANCELLED_REQUESTED_PLAYING&&(this.$6[b("VideoPlayerLoggerEvent").STARTED_PLAYING]?c.state=b("VideoPlayerLoggerPlayerStates").UNPAUSED:c.state=b("VideoPlayerLoggerPlayerStates").STARTED);this.$36();this.$37();(a===b("VideoPlayerLoggerEvent").PAUSED||a===b("VideoPlayerLoggerEvent").FINISHED_PLAYING)&&(i&&a===b("VideoPlayerLoggerEvent").FINISHED_PLAYING&&this.$35(),c.recent_stalls_count=this.$38());this.$39();this.$40(c);this.$41(c);this.$31();i&&this.$35();this.$30();break}e={logData:c,event:a,scriptPath:this.$1,source:this.$2};a||b("FBLogger")("video").warn("Missing event name");this.$6[a]=!0;if(this.$2===b("VideoPlayerLoggerSource").ANIMATED_IMAGE_SHARE)return null;c.ad_client_token||b("VideoPlayerHTML5Experiments").useVitalForEverything||h&&c.playback_is_live_streaming||b("VideoPlayerHTML5Experiments").useVitalForClosing&&(a===b("VideoPlayerLoggerEvent").PAUSED||a===b("VideoPlayerLoggerEvent").FINISHED_PLAYING||a===b("VideoPlayerLoggerEvent").HEART_BEAT)||b("VideoPlayerHTML5Experiments").useVitalForOpening&&(a===b("VideoPlayerLoggerEvent").UNPAUSED||a===b("VideoPlayerLoggerEvent").STARTED_PLAYING)?b("Banzai").post(j,e,b("Banzai").VITAL):b("Banzai").post(j,e);this.$29.shouldLogForR2D2()&&this.$29.addEvent(a,c);return e};c.setScriptPath=function(a){this.$1=a,this.$29.setScriptPath(a)};c.setFTData=function(a){this.$3=a};c.setABRQualityTracker=function(a){this.$25=a};c.setFrameCountGetters=function(a,b){this.$26=a,this.$27=b};c.startBuffering=function(a){this.$34(a)};c.endBuffering=function(){this.$37(),this.$42(),this.$36(),this.$39()};c.startInterrupt=function(){this.$43()};c.endInterrupt=function(){this.$37(),this.$42()};c.$32=function(){return this.$16>0};c.$34=function(a){if(this.$32())return;this.$17=this.$28;this.$16=Date.now();a!==void 0&&this.$6[b("VideoPlayerLoggerEvent").STARTED_PLAYING]&&(this.$18=a)};c.$43=function(){if(this.$44())return;this.$22=Date.now()};c.$44=function(){return this.$22>0};c.$45=function(){return!this.$44()?0:Date.now()-this.$22};c.$46=function(){return this.$32()?Date.now()-this.$16:0};c.$37=function(){if(this.$44()){var a=this.$45();this.$23+=a;this.$21+=a;this.$24+=1;this.$20+=1}};c.$42=function(){this.$44()&&(this.$22=0)};c.$31=function(){this.$23=0,this.$24=0,this.$42()};c.$36=function(){__p&&__p();if(this.$32()){var a=this.$46();this.$18!==null&&(this.$19=a);this.$15+=a;this.$9+=a;this.$13++;a>200&&this.$14++;this.$8++;this.$17&&(this.$11+=a,this.$10++,this.$17=!1);i&&this.$7.push(l())}};c.$39=function(){this.$32()&&(this.$16=0)};c.$33=function(a){return a&&typeof a==="object"?JSON.stringify(a):a};c.getCumulativeStallCount=function(){return this.$8};c.getCumulativeInPlayStallCount=function(){return this.$10};c.getStallCount=function(){return this.$13};c.getCumulativeStallTime=function(){return this.$9+this.$46()};c.getCumulativeInPlayStallTime=function(){return this.$11+(this.$17?this.$46():0)};c.getCumulativeInterruptCount=function(){return this.$20};c.getCumulativeInterruptTime=function(){return this.$21+this.$45()};c.$40=function(a){a.stall_time=Math.max(0,this.$15),a.stall_count=this.$13,a.stall_count_200_ms=this.$14,this.$19&&(a.first_stall_time=this.$19,a.first_stall_start_position=this.$18)};c.$41=function(a){a.interrupt_time=Math.max(0,this.$23),a.interrupt_count=this.$24};c.$38=function(){var a=l(),b=a-k;this.$7=this.$7.filter(function(a){return a>=b});i||this.$13>0&&this.$7.push(a);return this.$7.length};c.$30=function(){this.$15=0,this.$16=0,this.$13=0,this.$14=0,this.$18=null,this.$19=0};c.$35=function(){this.$7=[]};c.getFTdata=function(){return this.$3};return a}();a.Sources=b("VideoPlayerLoggerSource");a.Errors=b("VideoPlayerLoggerErrors");a.FallbackReasons=b("VideoPlayerLoggerFallbackReasons");a.ErrorStates=b("VideoPlayerLoggerErrorStates");a.PlayerStates=b("VideoPlayerLoggerPlayerStates");e.exports=a}),null);
__d("VideoPlayerLoggerEventField",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ABANDON_IN_STALL:"abandon_in_stall",ACCESS_TOKEN:"access_token",AD_CLIENT_TOKEN:"ad_client_token",AD_ID:"ad_id",API_CONFIG:"api_config",APP_ID:"app_id",APP_VERSION:"app_version",AUDIO_CHANNEL_LAYOUT:"audio_ch_conf",AUTH_FLAG:"auth_flag",AUTOPLAY_ELIGIBLE:"autoplay_eligible",AUTOPLAY_FAILURE_REASONS:"autoplay_failure_reasons",AUTOPLAY_SETTING:"autoplay_setting",AVAILABLE_QUALITIES:"available_qualities",BATTERY_LEVEL:"battery_level",BROADCASTER_ORIGIN:"broadcaster_origin",BUILD_VERSION:"build_version",CAPTION_STATE:"caption_state",CAST_CLIENT_APP_ID:"cast_client_app_id",CAST_CLIENT_APP_VERSION:"cast_client_app_version",CAST_SESSION_ID:"cast_session_id",CHANNEL_ELIGIBILITY:"channel_eligibility",CHROMECAST_RECEIVER_AVAILABLE:"chromecast_receiver_available",CONNECTIVITY_SUBTYPE:"connectivity_subtype",CONNECTIVITY_TYPE:"connectivity_type",CREATOR_APP_ID:"creator_app_id",CURRENT_VIEWABILITY_PERCENTAGE:"current_viewability_percentage",VIEWABILITY_DEBUG_REASON:"viewability_debug_reason",CURRENT_VOLUME:"current_volume",DATA_CONNECTION_QUALITY:"data_connection_quality",DEBUG_REASON:"debug_reason",DEVICE_ID:"device_id",DURATION:"duration",ERROR:"error",ERROR_CODE:"error_code",ERROR_DESCRIPTION:"error_description",ERROR_DOMAIN:"error_domain",ERROR_USER_INFO:"error_user_info",EVENT_NAME:"name",EVENT_BATCH:"batch",EXTERNAL_LOG_ID:"external_log_id",EXTERNAL_LOG_TYPE:"external_log_type",FB_BANDWIDTH:"fb_bandwidth",FEED_POSITION:"feed_position",FIRST_STALL_START_POSITION:"first_stall_start_position",FIRST_STALL_TIME:"first_stall_time",FT:"ft",GKS:"gks",HAS_BEEN_LIVE:"has_been_live",HD:"hd",HEADSET_STATE:"headset_state",HLS_CURRENT_SEGMENT_URI:"current_segment_uri",HLS_LOADING_SEGMENT_URI:"loading_segment_uri",HLS_SEGMENT_URI:"segment_uri",HLS_STREAM_DATA:"stream_data",HOST_VIDEO_ID:"host_video_id",INLINE:"inline",INSTREAM_VIDEO_AD_BREAK_INDEX:"instream_video_ad_break_index",INSTREAM_VIDEO_AD_BREAK_VIDEO_ID:"instream_video_ad_break_video_id",INTERRUPT_COUNT:"interrupt_count",INTERRUPT_TIME:"interrupt_time",IS_ABR_ENABLED:"is_abr_enabled",IS_AUTO_ADVANCED:"is_auto_advanced",IS_FREE:"is_free",IS_HDS:"is_hds",IS_LIVE_STREAMING:"is_live_streaming",IS_SHOW_VIDEO:"is_show_video",IS_STALLING:"is_stalling",IS_TEMPLATED_MANIFEST:"is_templated_manifest",LAST_VIEWABILITY_PERCENTAGE:"last_viewability_percentage",NEXT_REPRESENTATION_ID:"next_representation_id",ORIGINAL_VIDEO_ID:"original_video_id",OUTER_STORY_IDENTIFIER:"outer_story_identifier",PLAYBACK_BROADCAST_STATUS:"playback_broadcast_status",PLAYBACK_DURATION:"playback_duration",PLAYBACK_IS_LIVE_STREAMING:"playback_is_live_streaming",PLAYER_FORMAT:"player_format",PLAYER_ORIGIN:"player_origin",PLAYER_STATE:"player_state",PLAYER_SUBORIGIN:"player_suborigin",PLAYER_VERSION:"player_version",POSITION_IN_CHANNEL:"position_in_channel",POSITION_IN_UNIT:"position_in_unit",PROJECTION:"projection",QES:"qes",REACTION_VIDEO_CHANNEL_ID:"reaction_video_channel_id",REACTION_VIDEO_CHANNEL_TYPE:"reaction_video_channel_type",REACTION_VIDEO_CHANNEL_SUBTYPE:"reaction_video_channel_subtype",REASON:"reason",RECENT_STALLS_COUNT:"recent_stalls_count",RECENT_STALLS_TOTAL_COUNT:"recent_stalls_total_count",REFERRER:"referrer",REPRESENTATION_ID:"representation_id",RESOURCE_URL:"resource_url",SAVED_OFFLINE:"saved_offline",SEQ_NUM:"seq_num",SESSION_START_TIME:"session_start_time",SHOW_VIDEO_TYPE:"show_video_type",SOURCE:"source",SPHERICAL_FALLBACK_TYPE:"spherical_fallback_type",STALL_COUNT:"stall_count",STALL_INFO_JSON:"stall_info_json",STALL_TIME:"stall_time",STATE:"state",STREAM_TYPE:"stream_type",STREAMING_FORMAT:"streaming_format",TIME:"time",TIME_DELTA:"time_delta",TIME_MS:"time_ms",TIME_SINCE_CREATION:"time_since_creation",TIME_SPENT_ID:"time_spent_id",TIME_UNTIL_INTERRUPT:"time_until_interrupt",TOTAL_STALL_TIME:"total_stall_time",TRACKING:"tracking",TV_SESSION_ID:"tv_session_id",UNIQUE_TIME_SPENT_MS:"unique_time_spent_ms",UNIT_POSITION:"unit_position",UPSTREAM_PLAYER_SOURCE:"upstream_player_source",USER_ASN:"user_asn",USER_ID:"user_id",V2_HEART_BEAT:"v2_heart_beat",VIDEO_BANDWIDTH:"video_bandwidth",VIDEO_CHAINING_DEPTH_LEVEL:"video_chaining_depth_level",VIDEO_CHAINING_SESSION_ID:"video_chaining_session_id",VIDEO_CHANNEL_ID:"video_channel_id",VIDEO_CHANNEL_TYPE:"video_channel_type",VIDEO_HOME_SESSION_ID:"video_home_session_id",VIDEO_ID:"video_id",VIDEO_LAST_START_TIME_POSITION:"video_last_start_time_position",VIDEO_PLAY_REASON:"video_play_reason",VIDEO_PLAYER_HEIGHT:"video_player_height",VIDEO_PLAYER_WIDTH:"video_player_width",VIDEO_QUALITY:"video_quality",VIDEO_TIME_POSITION:"video_time_position",VIDEO_BUFFER_END_POSITION:"video_buffer_end_position",VIDEO_TIME_RATIO:"video_time_ratio",VIEWABILITY_PERCENTAGE:"viewability_percentage",WATCH_AND_GO_SESSION_ID:"watch_and_go_session_id",FEED_AGGREGATION_TYPE:"feed_aggregation_type",HAS_BLOCKED_PAUSED_REPRESENTATION_ENDED:"has_blocked_paused_representation_ended",IS_LIVE_VIDEO_REWOUND:"is_live_video_rewound",PLAYER_INSTANCE_KEY:"player_instance_key",SOURCE_CREATION_TIME:"source_creation_time",TRANSCODING_METHOD:"transcoding_method",VIDEO_INIT_SEQ_ID:"video_init_seq_id",VIDEO_PLAY_SUBREASON:"video_play_subreason",IS_DEEPLINK_USER:"is_deeplink_user",IS_FIRST_TIME_USER:"is_first_time_user",VIDEO_CLIP_START_TIME_MS:"video_clip_start_time_ms",AD_BREAK_VIEWER_SESSION_ID:"ad_break_viewer_session_id",SEEK_FROM_VIDEO_TIME_POSITION:"seek_from_video_time_position",LIVING_ROOM_SESSION_ID:"living_room_session_id",VIOLATION_FOUND:"violation_found",EVENT_SEQ_NUM:"event_seq_num",DETECTION_ID:"detection_id",ACTUAL_VIEWABILITY_VALUE:"actual_viewability_value",DROPPED_FRAME_COUNT:"dropped_frame_count",TOTAL_FRAME_COUNT:"total_frame_count",VISITATION_ID:"visitation_id",PIGEON_SESSION_ID:"pigeon_session_id",IS_FBMS:"is_fbms",FORCE_SAMPLE_LOGGING:"force_sample_logging",IS_ADS_PREVIEW:"is_ads_preview",IS_INJECTED_ADS:"is_injected_ads",AD_BREAK_AD_ID:"ad_break_ad_id",DASH_MANIFEST_AVAILABLE:"dash_manifest_available",IS_SERVABLE_VIA_FBMS:"is_servable_via_fbms",PLAYER_SUBORIGIN_DERIVED:"player_suborigin_derived",DEVICE_TYPE:"device_type",IFRAME_EMBED_REFERRER:"iframe_embed_referrer",AUDIO_REPRESENTATION_ID:"audio_representation_id",PLAYBACK_IS_FIRST_VIDEO:"playback_is_first_video",LAST_SCROLL_DIRECTION:"last_scroll_direction",BLACKSCREEN_DURATION_MS:"blackscreen_duration_ms",IS_CHAINED_LIVING_ROOM:"is_chained_living_room",PSR_TIME_MANIFEST:"psr_time_manifest",PSR_TIME_VIDEO_INIT:"psr_time_video_init",PSR_TIME_AUDIO_INIT:"psr_time_audio_init",PSR_TIME_VIDEO_DATA:"psr_time_video_data",PSR_TIME_AUDIO_DATA:"psr_time_audio_data",PSR_TIME_UNSTALL:"psr_time_unstall",STALL_COUNT_200_MS:"stall_count_200_ms",SEGMENT_TYPE:"segment_type",DEVICE_ORIENTATION:"device_orientation",NUM_EVENT_COPIES:"num_event_copies",LIVE_TRACE_STREAM_ID:"live_trace_stream_id",LIVE_TRACE_STREAM_TYPE:"live_trace_stream_type",LIVE_TRACE_SOURCE_ID:"live_trace_source_id",VPTS:"vpts",LIVE_LINEAR_CHANNEL_ID:"live_linear_channel_id",RELIABILITY_LABEL:"reliability_label",IS_REPLAY_LIVING_ROOM:"is_replay_living_room",VIDEO_LIST_ID:"video_list_id"})}),null);
__d("guid",[],(function(a,b,c,d,e,f){function a(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}e.exports=a}),null);
__d("MaybeNativePromise",["Promise"],(function(a,b,c,d,e,f){"use strict";c=a.Promise||b("Promise");b("Promise").resolve();e.exports=c}),null);
__d("VideoAkamaiRequestHelper",["URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return a.toLowerCase().indexOf("akamai")!==-1}function g(a){var b=a.startByte;a=a.endByte;if(b!=void 0&&!(b===0&&a==void 0)){b="bytes="+b+"-"+(a==void 0?"":a);return{Range:b}}return null}function c(a){var c=new(b("URI"))(a);c=c.getQueryData();var d=c.startByte;c=c.endByte;return g({baseUrl:a,startByte:d,endByte:c})}e.exports={isAkamai:a,getRequestHeaders:g,getRequestHeadersFromUrl:c}}),null);
__d("MVideoDashPrefetchCache",["regeneratorRuntime","Promise","BanzaiODS","Deferred","MaybeNativePromise","MOzExperiments","Run","URI","VideoAkamaiRequestHelper","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){__p&&__p();var g={maxPrefetchVideosNum:0,consolidateFragmentedPrefetchRequest:!1,fixPrefetchCacheAbort:!0,disablePrefetchCache:!1,enableGlobalSchedulerForPrefetch:!1,prefetchPriority:1,switchPrefetchTaskToHighPriWhenPlayed:!1};function h(a,b,c){var d=a.errorCode;a={name:a.errorType,message:a.errorMsg,type:c,url:b,status:d};return a}function i(a){return a.audio.length+a.video.length+a.manifest.length}function j(a,c){b("BanzaiODS").bumpEntityKey("mtouch_video_playback","prefetch."+a,c)}function k(a){var b="aborted",c={status:0},d=new Error("Prefetch request aborted.");return Object.assign(d,{type:b,url:a,xhr:c})}function l(a){var c=a.getURI(),d=c.toString();if(b("VideoAkamaiRequestHelper").isAkamai(d)){var e=b("VideoAkamaiRequestHelper").getRequestHeadersFromUrl(d);d=c.removeQueryData(["bytestart","byteend"]);a.setURI(d);e&&Object.keys(e).forEach(function(b){a.setRequestHeader(b,e[b])})}return a}var m=null,n=new Map();function o(a){a=new(b("URI"))(a);a=a.getDomain();return a.endsWith("fbcdn.net")&&!a.startsWith("interncache")&&!a.endsWith("ak.fbcdn.net")}function p(a,c){c===void 0&&(c=!1);return c&&o(a)?b("getCrossOriginTransport").withCredentials:b("getCrossOriginTransport")}function q(a){return o(a.url)}function r(a,b,c){return{response:a.slice(b.start+0,b.end+1),responseTime:c}}function s(a){__p&&__p();var c=new(b("URI"))(a);if(c.getDomain()){c=c.removeQueryData(["oh"]);c=c.removeQueryData("__gda__");var d=Object.keys(c.getQueryData());for(var e=0;e<d.length;e++){var f=d[e];f.startsWith("_nc")&&(c=c.removeQueryData(f))}return c.toString()}return a}a=function(){"use strict";__p&&__p();function a(){this.$2=new Map(),this.$1=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=g.maxPrefetchVideosNum,this.$7=g.consolidateFragmentedPrefetchRequest}var c=a.prototype;c.$9=function(a,c){__p&&__p();var d=this;c===void 0&&(c=!1);var e=a,f=new(b("XHRRequest"))(e).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(p(e,c));l(f);var i=new(b("MaybeNativePromise"))(function(b,c){f.setErrorHandler(function(a){d.$10(f),c(h(a,e,"preload"))}),f.setResponseHandler(function(a){f.response=a,d.$10(f),b(f)}),f.setAbortHandler(function(){if(g.fixPrefetchCacheAbort){d.$10(f);var b=k(a);c(b)}else c(i,new Error("Request promise aborted"))})});this.$11(a,i);this.$3.push(f);this.$8?this.$8.push(f):f.send();return i};c.genPrefetchMpdNow=function(a){__p&&__p();return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!this.has(a)){b.next=2;break}return b.abrupt("return",null);case 2:return b.abrupt("return",this.$9(a));case 3:case"end":return b.stop()}},null,this)};c.$12=function(b,c,d){__p&&__p();c===void 0&&(c=!1);d===void 0&&(d=null);var e=[];for(var f=0;f<b.length;f++){var g=a.createQueryStringURL(b[f]);this.has(g)||(e.push(this.$9(g,c).then(function(a){j("received",1);return a})),d!=null&&this.$2.set(g,d))}j("sent",e.length);return e};c.$13=function(c){__p&&__p();var d=this,e=a.getConsolidatedURL(c);if(e==null)return this.$12(c);var f=new(b("XHRRequest"))(e).setMethod("GET").setResponseType("arraybuffer").setTransportBuilder(p(e));l(f);var g=Date.now(),i=[];for(var k=0;k<c.length;k++){var m=a.createQueryStringURL(c[k]),n=new(b("Deferred"))();this.has(m)||this.$11(m,n.getPromise());i.push(n)}f.setErrorHandler(function(b){d.$10(f);for(var a=0;a<i.length;a++)i[a].reject(h(b,e,"preload"))});f.setResponseHandler(function(b){var e=Date.now()-g;for(var a=0;a<c.length;a++){var h=i[a],j=c[a];h.resolve(r(b,j,e))}d.$10(f)});f.setAbortHandler(function(){for(var a=0;a<c.length;a++){var b=i[a];b.reject(new Error("Request aborted."))}});this.$3.push(f);f.send();j("consolidated.sent",1);j("sent",i.length);m=i.map(function(a){return a.getPromise().then(function(a){j("received",1);return a})});b("Promise").all(m).then(function(){return j("consolidated.received",1)});return m};c.$14=function(a){__p&&__p();var c=this,d=a.useCredentials,e=a.connectionQualityLevel;this.$5++;var f=this.$7&&!d;g.enableGlobalSchedulerForPrefetch&&(this.$8=[]);var h=f?this.$13(a.video):this.$12(a.video,d,e);f=f?this.$13(a.audio):this.$12(a.audio,d,e);e=this.$12(a.manifest,d);var i=h.concat(f,e);if(this.$8){var j=this.$8||[];this.$8=null;var k=""+a.videoID;d={name:"prefetch task, "+k,run:function(){k&&n["delete"](k);j.forEach(function(a){return a.send()});return b("MaybeNativePromise").all(i).then(function(){})["catch"](function(){})},cancel:function(){}};d.run();b("MaybeNativePromise").all(i).then(function(){return c.$15()})["catch"](function(){return c.$15()})}else b("MaybeNativePromise").all(i).then(function(){return c.$15()})["catch"](function(){return c.$15()})};c.$11=function(a,c){__p&&__p();var d=this;a=s(a);this.$1.values().next().done&&b("Run").onLeave(function(){for(var a=0;a<d.$3.length;a++)d.$3[a].abort();d.$3=[];d.$4=[];d.$5=0;d.$1.clear()});this.$1.set(a,c)};c.$10=function(a){a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};c.$15=function(){this.$5--;var a=this.$4.shift();a&&this.$14(a)};c.has=function(a){a=s(a);return this.$1.has(a)};c.getConnectionQualityLevel=function(a){return this.$2.get(a)};c.get=function(a){a=s(a);var c=this.$1.get(a);c?j("cache.hit",1):j("cache.miss",1);b("MOzExperiments").mtouch_reuse_cache_values||this.$1["delete"](a);j("retrieve",1);return c};c.$16=function(a){a=s(a);a=this.$1.get(a);return a};c.queueRequestBatch=function(a){this.$6===0||this.$5<this.$6?this.$14(a):(j("queued",i(a)),this.$4.push(a))};a.getInstance=function(){m===null&&(m=new a());return m};a.createQueryStringURL=function(a){var c=a.url,d=a.start;a=a.end;d!==null&&d!==void 0&&a!==null&&a!==void 0&&(c=new(b("URI"))(c).addQueryData({bytestart:d,byteend:a}));return c.toString()};a.getConsolidatedURL=function(b){__p&&__p();var c="",d=Infinity,e=0;for(var f=0;f<b.length;f++){var g=b[f],h=g.url,i=g.start;g=g.end;if(h==null||i==null||g==null)return null;if(c==="")c=h;else if(c!==h)return null;d=Math.min(d,i);e=Math.max(e,g)}return a.createQueryStringURL({url:c,start:d,end:e})};a.loadVideo=function(c,d,e){d=!!d;if(g.disablePrefetchCache||b("MOzExperiments").disable_prefetch)return;var f=a.getInstance();c.manifest||(c.manifest=[]);f.queueRequestBatch({manifest:c.manifest.filter(q),video:c.video.filter(q),audio:c.audio.filter(q),videoID:c.videoID,useCredentials:d,connectionQualityLevel:e})};a.getCacheValue=function(b){var c=a.getInstance().get(b),d=!1;b=b.match(/bytestart=(\d+)/);if(b){b=parseInt(b[1],10);b<5e3&&(d=!0)}d&&j("consume."+(c?"hit":"miss"),1);return c};a.getConnectionQualityLevel=function(b){return a.getInstance().getConnectionQualityLevel(b)};a.hasCacheValue=function(b){return a.getInstance().has(b)};a.getPrefetchTaskByID=function(a){a=n.get(a)||null;return a};return a}();e.exports=a}),null);
__d("MVideoPrefetcher",["Promise","MVideoAutoplayConfig","Run"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=500;a=function(){"use strict";__p&&__p();function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}var c=a.prototype;c.$7=function(a,c,d){d.lastProgressValue*1e3>b("MVideoAutoplayConfig").autoplay_prefetch_duration_threshold_ms||d.video.duration&&d.lastProgressValue>.9*d.video.duration?(clearInterval(d.watchdog),this.$8(d),this.$2.set(d.url,!0),a()):(clearInterval(d.watchdog),this.$8(d),c(new Error("Insufficient data received for a video preload")))};c.$9=function(a){__p&&__p();var c=this,d=document.createElement("video");d.setAttribute("src",a);d.setAttribute("preload","auto");var e={};e.video=d;e.lastProgressTime=Date.now();e.lastProgressValue=0;e.url=a;var f=new(b("Promise"))(function(a,f){e.watchdog=setInterval(function(){var d=Date.now();d>e.lastProgressTime+b("MVideoAutoplayConfig").autoplay_prefetch_waiting_time_ms&&c.$7(a,f,e)},h),d.addEventListener("progress",function(){var a=d.buffered&&d.buffered.end&&d.buffered.length>0?d.buffered.end(0):0;a>e.lastProgressValue&&(e.lastProgressValue=a,e.lastProgressTimestamp=Date.now())})});this.$10(a,f);this.$3.push(e);d.load();return f};c.$11=function(b){var c=[];for(var d=0;d<b.length;d++){var e=a.createQueryStringURL(b[d]);this.$1.has(e)||c.push(this.$9(e))}return c};c.$12=function(a){var c=this;this.$5++;a=this.$11(a.video);b("Promise").all(a).then(function(){c.$13()})["catch"](function(){return c.$13()})};c.$10=function(a,c){var d=this,e=!!this.$1.values().next().done;e&&b("Run").onLeave(function(){for(var a=0;a<d.$3.length;a++)d.$14(d.$3[a]);d.$3=[];d.$4=[];d.$5=0;d.$1.clear()});this.$1.set(a,c)};c.$14=function(a){a=a.video;a.setAttribute("src","");a.load&&a.load()};c.$8=function(a){this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};c.$13=function(){this.$5--;var a=this.$4.shift();a&&this.$12(a)};c.getAndDelete=function(a){var b=this.$1.get(a);this.$1["delete"](a);return b};c.getPreloadCache=function(a){return this.$2.get(a)};c.queueRequestBatch=function(a){this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};a.getInstance=function(){g===null&&(g=new a());return g};a.createQueryStringURL=function(a){return a.url};a.loadVideo=function(b){var c=a.getInstance();c.queueRequestBatch({video:[{url:b}]})};a.isVideoPreloaded=function(b){return!!a.getInstance().getPreloadCache(b)};return a}();e.exports=a}),null);
__d("MVideoPlayerController",["EventEmitter","MInlineVideo","MLegacyDataStore","MOzExperiments","MOzVideoPlayerApi","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPrefetcher","Stratcom","destroyOnUnload","getElementPosition","shouldUseOzPlayer"],(function(a,b,c,d,e,f){__p&&__p();b("MVideoPlayerApiBase").MVideoPlayerApiBase;var g="MVideoPlayerController_instance",h=null,i=null;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(d,e,f,g){__p&&__p();var h;h=a.call(this)||this;h.$MVideoPlayerController2=e.video_ids;h.$MVideoPlayerController3=d.video_element;h.$MVideoPlayerController1=d.root_element;h.$MVideoPlayerController6=f;h.$MVideoPlayerController7=g;!b("MOzExperiments").no_prefetch_for_ctp&&!b("MOzExperiments").no_quickstarter_for_ctp&&(h.prefetch(),h.prepareMVideoPlayerApi());h.$MVideoPlayerController4="ready";h.$MVideoPlayerController8(h.$MVideoPlayerController3);h.$MVideoPlayerController5=null;c.$MVideoPlayerController9();return h}var d=c.prototype;d.prepareMVideoPlayerApi=function(a){b("MOzVideoPlayerApi").prepare(this.$MVideoPlayerController3,this.$MVideoPlayerController6,a)};d.prefetch=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;if(!this.$MVideoPlayerController6)return;this.$MVideoPlayerController6.connection_quality_level?b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials,this.$MVideoPlayerController6.connection_quality_level):b("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials)};d.isFullscreen=function(){return!1};d.getVideoID=function(){return this.$MVideoPlayerController2[0]};d.play=function(a){this.emit("playRequested",a),this.sendPlayRequest(a)};d.prepareForPlay=function(){};d.sendPlayRequest=function(a){var c=!0;c=b("MInlineVideo").showPlayer(null,this.$MVideoPlayerController3,c,a);(!c||!b("MVideoExperiments").mtouch_no_double_play)&&b("MInlineVideo").play(a)};d.pause=function(a){this.emit("pauseRequested",a),b("MInlineVideo").pause(a)};d.isAutoplayable=function(){return!1};d.getDOMPosition=function(){return b("getElementPosition")(this.getRootNode())};d.setState=function(a){this.$MVideoPlayerController4=a,this.emit("stateChange")};d.isState=function(a){return this.$MVideoPlayerController4===a};d.getVideoNode=function(){return this.$MVideoPlayerController3};d.getRootNode=function(){return this.$MVideoPlayerController1};d.setLastActionReason=function(a){this.$MVideoPlayerController5=a,a&&b("MInlineVideo").setLastActionReason(a)};d.getLastActionReason=function(){return this.$MVideoPlayerController5};d.preload=function(){if(b("MVideoExperiments").do_not_prefetch_autoplay)return;var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3),c=a&&a.src;c&&!b("shouldUseOzPlayer")(a)&&b("MVideoPrefetcher").loadVideo(c)};d.isPreloaded=function(){var a=b("MLegacyDataStore").get(this.$MVideoPlayerController3);a=a&&a.src;return a&&b("MVideoPrefetcher").isVideoPreloaded(a)};c.$MVideoPlayerController9=function(){__p&&__p();if(h)return;h=[b("Stratcom").listen("m:video:player:play",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiBeginPlayback(a);!i&&b("MVideoExperiments").refresh_browser_autoplay_settings&&(i=null)}),b("Stratcom").listen("m:video:player:pause",null,function(a){var b=c.$MVideoPlayerController10(a);a=!!(a.getData()&&a.getData().destroyed);c.handleApiPausePlayback(b,a)}),b("Stratcom").listen("m:video:player:ended",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFinishPlayback(a)}),b("Stratcom").listen("m:video:player:volumechange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiVolumeChange(a)}),b("Stratcom").listen("m:video:player:fullscreenchange",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiFullScreenChange(a)}),b("Stratcom").listen("m:video:player:prepare",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiPrepare(a)}),b("Stratcom").listen("m:video:player:destroy",null,function(a){a=c.$MVideoPlayerController10(a);c.handleApiDestroyed(a)})];b("destroyOnUnload")(function(){h&&(h.forEach(function(a){return a.remove()}),h=null)})};c.handleApiBeginPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController11()};c.handleApiPausePlayback=function(a,c){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController12(c)};c.handleApiFinishPlayback=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController13()};c.handleApiVolumeChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController14()};c.handleApiFullScreenChange=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController15()};c.handleApiDestroyed=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController16()};c.handleApiPrepare=function(a){a=b("MLegacyDataStore").get(a)[g];a&&a.$MVideoPlayerController17()};d.$MVideoPlayerController11=function(){this.setState("playing")};d.$MVideoPlayerController12=function(a){!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};d.$MVideoPlayerController13=function(){this.setState("finished")};d.$MVideoPlayerController14=function(){this.emit("volumeChange")};d.$MVideoPlayerController15=function(){this.emit("fullscreenChange")};d.$MVideoPlayerController16=function(){this.setState("ready"),this.emit("destroyed")};d.$MVideoPlayerController17=function(){this.emit("prepare")};d.$MVideoPlayerController8=function(a){var c={};c[g]=this;b("MLegacyDataStore").set(a,c)};c.$MVideoPlayerController10=function(a){a=a.getData();return a&&a.videoElement};c.isBrowserAutoplayEnabled=function(){if(i===null){var a=document.createElement("video");a.muted=!0;a.play();i=!a.paused;a.pause()}return i};return c}(b("EventEmitter"));e.exports=a}),null);
__d("VideoAutoplayValues",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ON:"on",OFF:"off",DOWNLOADED_ONLY:"downloaded_only",WIFI_ONLY:"wifi_only",DEFAULT_AUTOPLAY:"default_autoplay"})}),null);
__d("MFeedVideoPlayerController",["KaiOSAutoplayModule","KaiOSLogger","MFullScreen","MOzExperiments","MVideoAutoplayConfig","MVideoAutoplayPlayerBase","MVideoCache","MVideoDownloadState","MVideoDownloadStateHandler","MVideoExperiments","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","VideoAutoplayValues","VideoPlayerReason","destroyOnUnload","getViewportDimensions"],(function(a,b,c,d,e,f){__p&&__p();var g=.5;c=function(c){"use strict";__p&&__p();babelHelpers.inheritsLoose(d,c);function d(a,d){__p&&__p();var e;e=c.call(this)||this;e.$MFeedVideoPlayerController1=d;e.$MFeedVideoPlayerController2=a;e.$MFeedVideoPlayerController3=d.controller;e.$MFeedVideoPlayerController5=!1;e.$MFeedVideoPlayerController4=[];b("destroyOnUnload")(function(){e.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),e.$MFeedVideoPlayerController4=[]});e.$MFeedVideoPlayerController6();if(b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_quickstarter_for_ctp){a=e.isAutoplayable();(!b("MOzExperiments").no_prefetch_for_ctp||b("MOzExperiments").no_prefetch_for_ctp&&a)&&e.$MFeedVideoPlayerController3.prefetch();e.$MFeedVideoPlayerController3.prepareMVideoPlayerApi(babelHelpers.assertThisInitialized(e))}e.$MFeedVideoPlayerController1.should_autoplay&&e.$MFeedVideoPlayerController7();return e}var e=d.prototype;e.$MFeedVideoPlayerController7=function(){b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};e.$MFeedVideoPlayerController8=function(){__p&&__p();var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a===b("VideoAutoplayValues").OFF)return!1;else if(b("MVideoCache").isVideoDownloaded(this.getVideoID()))return!1;else if(a===b("VideoAutoplayValues").WIFI_ONLY&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a===b("VideoAutoplayValues").ON&&this.$MFeedVideoPlayerController9())return!0;return!1};e.$MFeedVideoPlayerController9=function(c){var d=b("MVideoUtils").getNetworkBandwidth();if(!d)if(b("MVideoExperiments").desktop_no_bandwidthmax)return!0;else d=0;var e=b("MVideoUtils").getConnectivityType(),f=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:b("MVideoAutoplayConfig").autoplay_bandwidth_threshold_mbps;b("KaiOSAutoplayModule").gkResult&&d===0&&(d=b("MVideoUtils").calculateBandwidth(),b("KaiOSLogger").logAutoplay({bandwidth:d.toFixed(2),threshold:f.toFixed(2),detectedConnectivityType:a.navigator.connection?a.navigator.connection.type===void 0?"undefined":a.navigator.connection.type:"missing connection"}));e=(!c||e===c)&&d>=f;return e};e.isVisible=function(){return this.$MFeedVideoPlayerController3.isFullscreen()||b("MFullScreen").isFullScreen()?!0:b("MVideoUtils").isVisible(this.getDOMPosition())};e.getDistanceToViewport=function(){if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=b("getViewportDimensions")().height,c=this.getDOMPosition();if(c.height===0)return-Infinity;c=c.y+(1-g)*c.height;return c-a/2};e.playWithoutUnmute=function(a){this.$MFeedVideoPlayerController3.play(a)};e.prepareForPlay=function(){!b("MVideoCache").isVideoDownloaded(this.getVideoID())&&b("MVideoAutoplayConfig").autoplay_prefetch_enabled&&b("MVideoAutoplayConfig").autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};e.pause=function(a){this.$MFeedVideoPlayerController3.pause(a)};e.isAutoplayable=function(){var a=!1,c=this.getVideoID();b("MVideoPlayerController").isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(b("MVideoCache").isVideoDownloaded(c)?a=!1:this.$MFeedVideoPlayerController8()&&(b("MVideoAutoplayConfig").autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};e.getDOMPosition=function(){return this.$MFeedVideoPlayerController3.getDOMPosition()};e.isLooping=function(){return!1};e.getVideoID=function(){return this.$MFeedVideoPlayerController3.getVideoID()};e.$MFeedVideoPlayerController6=function(){var a=this,c=[["stateChange",function(b){return a.$MFeedVideoPlayerController10(b)}]],d=function(b){return a.emit.bind(a,b)};this.$MFeedVideoPlayerController4=c.map(function(b){return a.$MFeedVideoPlayerController3.addListener(b[0],b[1])}).concat(b("MVideoPlayerApiEvents").map(function(b){return a.$MFeedVideoPlayerController3.addListener(b,d(b))}));b("MVideoDownloadStateHandler").listen(this.getVideoID(),function(b){return a.$MFeedVideoPlayerController11(b)})};e.$MFeedVideoPlayerController10=function(){this.$MFeedVideoPlayerController12()};e.$MFeedVideoPlayerController12=function(){(!this.isState("playing")&&this.getLastActionReason()===b("VideoPlayerReason").USER||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};e.$MFeedVideoPlayerController11=function(a){a.state===b("MVideoDownloadState").DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};e.isState=function(a){return this.$MFeedVideoPlayerController3.isState(a)};e.getLastActionReason=function(){return this.$MFeedVideoPlayerController3.getLastActionReason()};e.setLastActionReason=function(a){this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};return d}(b("MVideoAutoplayPlayerBase"));e.exports=c}),null);
__d("MVideoAutoplayControllerBase",["Stratcom","SubscriptionsHandler","VideoPlayerReason","Visibility","destroyOnUnload","throttle"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){var c=this;this.$3=null;this.$2=null;this.$6=[];this.$1=a;this.$4=null;this.$5=new(b("SubscriptionsHandler"))();b("destroyOnUnload")(function(){c.$6=[],c.$3=null,c.$4&&(c.$4.remove(),c.$4=null),c.$5.release()})}var c=a.prototype;c.getVideoUnits=function(){return this.$6};c.addVideoUnit=function(a){this.$6.push(a)};c.getPlayingVideoUnit=function(){return this.$3};c.setPlayingVideoUnit=function(a){this.$3=a};c.playVideo=function(a,b){this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};c.addSubscriberVideoUnit=function(){this.getVideoUnits().length||(this.$5.addSubscriptions(b("Stratcom").listen("resize",null,this.updateAutoplay.bind(this)),b("Stratcom").listen("blur",null,this.$8.bind(this)),b("Stratcom").listen("focus",null,this.$9.bind(this)),b("Visibility").addListener(b("Visibility").HIDDEN,this.$8.bind(this)),b("Visibility").addListener(b("Visibility").VISIBLE,this.$9.bind(this)),b("Stratcom").listen("MScrollArea:scrollend",null,b("throttle")(this.updateAutoplay.bind(this),this.$1)),b("Stratcom").listen("MScrollArea:scroll",null,b("throttle")(this.updateAutoplay.bind(this),this.$1)),b("Stratcom").listen("MScrollArea:create",null,b("throttle")(this.updateAutoplay.bind(this),this.$1)),b("Stratcom").listen("MScrollArea:reflow",null,b("throttle")(this.updateAutoplay.bind(this),this.$1))),this.$10()||this.$11())};c.$8=function(){this.autoplayActive()&&!this.$2&&(this.$2=this.getPlayingVideoUnit(),this.pausePlayingVideo(b("VideoPlayerReason").PAGE_VISIBILITY))};c.$9=function(){this.autoplayActive()&&this.$2&&(this.playVideo(this.$2,b("VideoPlayerReason").PAGE_VISIBILITY),this.$2=null)};c.$11=function(){this.$4&&(this.$4.remove(),this.$4=null),this.$7=b("throttle")(this.updateAutoplay.bind(this),this.$1),this.$4=b("Stratcom").listen("scroll",null,this.$12.bind(this))};c.$12=function(){this.$7()};c.$10=function(){return!!this.$4};c.getClosestVideoUnits=function(a,b){return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};c.getVisibleUnits=function(){var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};c.pausePlayingVideo=function(a){var b=this.$3;b&&(b.pause(a),this.$3=null)};c.updateAutoplay=function(){throw new Error("Should be overridden")};c.autoplayActive=function(){throw new Error("Should be overridden")};return a}();e.exports=a}),null);
__d("MVideoAutoplayControllerX",["MVideoAutoplayControllerBase","SubscriptionsHandler","VideoPlayerReason","destroyOnUnload","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=500;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,h)||this;c.$MVideoAutoplayControllerX1=!0;c.$MVideoAutoplayControllerX2=new(b("SubscriptionsHandler"))();c.$MVideoAutoplayControllerX3=null;b("destroyOnUnload")(function(){c.$MVideoAutoplayControllerX4(),babelHelpers.assertThisInitialized(c)===g&&(g=null)});return c}c.registerVideoUnit=function(a){g==null&&(g=new c()),g.addSubscriberVideoUnit(),g.addVideoUnit(a),g.$MVideoAutoplayControllerX5(a),a.isVisible()&&g.updateAutoplay()};c.setShouldAutoplay=function(a){g==null&&(g=new c()),g.$MVideoAutoplayControllerX1=a,g.updateAutoplay()};var d=c.prototype;d.$MVideoAutoplayControllerX4=function(){this.$MVideoAutoplayControllerX2.release()};d.$MVideoAutoplayControllerX6=function(a){a&&(a.setLastActionReason(b("VideoPlayerReason").USER),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};d.$MVideoAutoplayControllerX5=function(a){__p&&__p();var b=this;if(!a.addListener)return;var c=function(){b.getPlayingVideoUnit()==a&&a.isState("paused")||b.getPlayingVideoUnit()!=a&&a.isState("playing")?b.$MVideoAutoplayControllerX6(a):a==b.$MVideoAutoplayControllerX3&&a.isState("finished")&&b.$MVideoAutoplayControllerX6(null)},d=function(){(a.isState("playing")||a.isState("paused"))&&b.$MVideoAutoplayControllerX6(a)},e=function(){b.getPlayingVideoUnit()!=a&&b.$MVideoAutoplayControllerX6(a)},f=function(){b.updateAutoplay()},g=function(){b.$MVideoAutoplayControllerX3&&b.$MVideoAutoplayControllerX3==a&&b.$MVideoAutoplayControllerX6(null)};this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",c),this.$MVideoAutoplayControllerX7(a,"prepare",e),this.$MVideoAutoplayControllerX7(a,"volumeChange",d),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",d),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",f),this.$MVideoAutoplayControllerX7(a,"destroyed",g))};d.$MVideoAutoplayControllerX7=function(a,c,d){a=a.addListener(c,function(){b("setImmediate")(function(){d()})});return a};d.autoplayActive=function(){this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};d.updateAutoplay=function(){__p&&__p();if(!this.autoplayActive())return;if(!this.$MVideoAutoplayControllerX1){this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY);return}var a=this.getVisibleUnits(),c=a.length,d=null;if(c==1)d=a[0],d=d.isAutoplayable()?d:null;else if(c>1){var e=b("getViewportDimensions")().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-e);a.playPriority=b;(!d||typeof d.playPriority==="number"&&a.playPriority<d.playPriority)&&(d=a)})}this.getPlayingVideoUnit()?d!=this.getPlayingVideoUnit()&&(this.pausePlayingVideo(b("VideoPlayerReason").AUTOPLAY),this.playVideo(d,b("VideoPlayerReason").AUTOPLAY)):d&&this.playVideo(d,b("VideoPlayerReason").AUTOPLAY);c=this.getClosestVideoUnits(2,!0);a=c.length;var f=null;for(var g=0;g<a;g++)if(c[g]!==d){f=c[g];break}f&&f.prepareForPlay()};return c}(b("MVideoAutoplayControllerBase"));e.exports=a}),null);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f){a={registerVideoUnit:function(a,c){a=new(b("MFeedVideoPlayerController"))(a,c);b("MVideoAutoplayControllerX").registerVideoUnit(a)}};e.exports=a}),null);