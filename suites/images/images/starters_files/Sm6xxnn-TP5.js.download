if (self.CavalryLogger) { CavalryLogger.start_js(["s\/1Tl"]); }

__d("MGenericJewel",["CSS","Event","MHistory","MJewels","MParent","MViewport","ScriptPath","Stratcom","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();var g={};function a(a,c,d,e){__p&&__p();if(g[a])return;var f=new(b("SubscriptionsHandler"))();g[a]=f;var h,i;f.addSubscriptions(b("Event").listen(c,"click",function(c){b("MParent").bySigil(c.target,"icon")&&(c.preventDefault(),!h?(b("MHistory").pushSoftState(a),b("Stratcom").invoke("MGenericJewel::clicked",a,{open:!0})):a===b("MJewels").SEARCH&&b("Stratcom").invoke("m:chrome:tab:show",a,{open:!0}),b("ScriptPath").set("topbar_"+a))}),b("Stratcom").listen("m:history:change",null,function(e){var f=e.getData().soft===a;!f&&(h||i)&&b("Stratcom").invoke("m:chrome:tab:hide",a);b("CSS").conditionClass(c,"popoverOpen",f);d&&!j&&(b("CSS").conditionClass(d,"popover_hidden",!f),b("CSS").conditionClass(d,"popover_visible",f),f&&(d.style.minHeight=b("MViewport").getUseableHeight()+"px"));f&&!h&&(b("Stratcom").invoke("m:chrome:tab:show",a),b("CSS").addClass(c,"noCount"),b("CSS").removeClass(c,"hasCount"));i=e.getData().soft===void 0;h=f}));var j=!1;a===b("MJewels").SEARCH&&d&&f.addSubscriptions(b("Stratcom").listen("m:graph-search:rendered",null,function(){b("CSS").conditionClass(d,"popover_hidden",!0),j=!0}));e&&f.addSubscriptions(b("Stratcom").listen("m:page:unload",null,function(){f.release(),g[a]=void 0}))}e.exports={init:a}}),null);
__d("MJewelLinkFetcher",["DOM","MLinkHack","$"],(function(a,b,c,d,e,f){"use strict";var g="mJewelNav";function a(a){a=b("DOM").find(b("$")(g),"div",a);if(!a)return null;a=b("DOM").find(a,"a","icon");return!a?null:b("MLinkHack").getHref(a)}e.exports={get:a}}),null);
__d("MJewelSet",["MViewport","Popover","ScriptPath","Stratcom"],(function(a,b,c,d,e,f){__p&&__p();var g={_haveInitializedJewels:!1,init:function(){if(g._haveInitializedJewels)return;g._haveInitializedJewels=!0;b("Stratcom").listen("m:viewport:orientation-change",null,g._onOrientationChange);b("Stratcom").listen("m:jewel:flyout:open",null,g._onJewelOpen)},_onJewelOpen:function(a){a=a.getData();b("ScriptPath").set("topbar_"+a.jewel)},_onOrientationChange:function(){setTimeout(function(){var a=b("Popover")._activePopover;if(!a)return;b("MViewport").getHeight()+"px"!==a.flyout.style.minHeight&&a.refreshConstraints()},800)}};e.exports=g}),null);
__d("MJewelsLogger",["MFullPageLoadState","NavigationQuickLogModule","QuickPerformanceLogger","Stratcom","SubscriptionsHandler","performanceAbsoluteNow","performanceNavigationStart","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("NavigationQuickLogModule").JEWEL_OPEN_MTOUCH,h=null,i=new(b("SubscriptionsHandler"))();function a(a,c){h!==null&&j(a),b("QuickPerformanceLogger").markerStart(g),k("jewelName",a),k("isFirstClick",c.isFirstClick),k("badgeCount",c.badgeCount),k("jewelBehavior",c.jewelBehavior),k("fullPageLoadState",b("MFullPageLoadState").get()),k("isPrefetching",c.isPrefetching),c.initialPrefetchPhase&&k("initialPrefetchPhase",c.initialPrefetchPhase),b("performanceNavigationStart")()>0&&k("timeSinceNavigationStart",b("performanceAbsoluteNow")()-b("performanceNavigationStart")()),b("setTimeoutAcrossTransitions")(function(){i.addSubscriptions(b("Stratcom").listen("m:history:change",null,function(){h===a&&j(a)}))},1),h=a}function j(a){b("QuickPerformanceLogger").markerEnd(g,"CANCEL"),i.release(),i.engage(),h=null}function c(a){b("setTimeoutAcrossTransitions")(function(){b("QuickPerformanceLogger").markerEnd(g,"SUCCESS"),i.release(),i.engage(),h=null},1)}function k(a,c){typeof c==="string"?b("QuickPerformanceLogger").annotateMarkerString(g,a,c):typeof c==="boolean"?b("QuickPerformanceLogger").annotateMarkerInt(g,a,c?1:0):typeof c==="number"&&b("QuickPerformanceLogger").annotateMarkerDouble(g,a,c)}e.exports={markJewelClick:a,markJewelDisplayed:c,markJewelCanceled:j}}),null);
__d("MJewelsSafePageletLoader",["MRequest","PageletEventConstsJS","PageletEventsHelper","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function h(a,c){var d=null,e=function(){d&&d.remove(),d=null};d=b("Stratcom").listen("m:page:unload",null,function(){e(),c()});b("PageletEventsHelper").subscribeToPageletEvents(function(c,d,f,g){c===a&&d===b("PageletEventConstsJS").JS_END&&e()})}function i(a,c){b("Stratcom").listen(["m:chrome:tab:show","m:jewel:flyout:open"],a,function(){new(b("MRequest"))(c).send(),b("Stratcom").removeCurrentListener()})}function a(a){if(g[a.jewelSigil])return;g[a.jewelSigil]=!0;h(a.pageletID,i.bind(null,a.jewelSigil,a.retryUri))}e.exports={trackJewel:a}}),null);
__d("MBookmarksJewelClickTracking",["DOM","Event","MJewelsLogger","Stratcom","ge"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=!1,i=!0;function a(a){__p&&__p();if(g)return;g=!0;var c=b("DOM").find(b("ge")("mJewelNav"),"div","bookmarks"),d=!!a.noFlyout;b("Event").listen(c,"click",function(){i&&(b("MJewelsLogger").markJewelClick("bookmarks",{isFirstClick:!h,badgeCount:0,jewelBehavior:d?"permalink":"flyout",isPrefetching:!1,initialPrefetchPhase:null}),i=!1),h=!0});b("Stratcom").listen("m:side-area:show",null,function(){b("MJewelsLogger").markJewelDisplayed("bookmarks")});b("Stratcom").listen("m:side-area:hide",null,function(){i=!0})}e.exports={init:a}}),null);
__d("XFeedNewStoriesBadgeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/feed/badge/",{})}),null);
__d("MOutOfFeedNewStoriesPolling",["Arbiter","ArbiterToken","MPageController","MRequest","Stratcom","TimeSlice","XFeedNewStoriesBadgeController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=0,i=!1,j=new(b("Arbiter"))(),k=9,l=15e3;function m(){if(h>k)return;clearTimeout(g);g=b("setTimeoutAcrossTransitions")(b("TimeSlice").guard(function(){n()},"Feed jewel count polling",{propagationType:b("TimeSlice").PropagationType.ORPHAN}),l)}function n(){var a=b("XFeedNewStoriesBadgeController").getURIBuilder().getURI();a=new(b("MRequest"))(a);a.listen("done",function(a){p(a.payload.count)});a.listen("finally",function(){a=null,m()});a.send()}function o(){p(0),clearTimeout(g),g=null}function p(a){h=a,j.inform("MOutOfFeedNewStoriesPolling/updateCount",{count:a},"state")}function a(a){q();return j.subscribe("MOutOfFeedNewStoriesPolling/updateCount",a)}function q(){if(i)return;i=!0;b("Stratcom").listen("m:homepage:load",null,function(){o()});b("Stratcom").listen("m:homepage:unload",null,function(){m()});b("MPageController").isHomeishPath(location.href)||m()}e.exports={addPollingListener:a,MAX_COUNT:k}}),null);
__d("formatNumber",["fbt","intlNumUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a,c){return b("intlNumUtils").formatNumber(a,c)}function h(a,c){c=g._({"*":"{number}+"},[g._param("number",b("intlNumUtils").formatNumberWithThousandDelimiters(a,c),[0,a])]);return c.toString()}function i(a,c){c=g._({"*":"\u003C{number}"},[g._param("number",b("intlNumUtils").formatNumberWithThousandDelimiters(a,c),[0,a])]);return c.toString()}function c(a,c,d){return a>c?h(c,d):b("intlNumUtils").formatNumberWithThousandDelimiters(a,d)}function d(a,c,d){return a<c?i(c,d):b("intlNumUtils").formatNumberWithThousandDelimiters(a,d)}a.withThousandDelimiters=b("intlNumUtils").formatNumberWithThousandDelimiters;a.withMaxLimit=c;a.withMinLimit=d;e.exports=a}),null);
__d("MFeedJewel",["CSS","DOM","MHistory","MHome","MJewel","MJewelLinkFetcher","MJewels","MOutOfFeedNewStoriesPolling","MPageController","MURI","Stratcom","SubscriptionsHandler","URI","$","formatNumber","gkx"],(function(a,b,c,d,e,f){__p&&__p();var g,h,i,j;function k(a){b("CSS").conditionClass(j,"popoverOpen",!0)}function l(a){b("CSS").conditionClass(j,"popoverOpen",!1)}function m(){if(i)return;i=new(b("SubscriptionsHandler"))();i.addSubscriptions(b("Stratcom").listen("m:history:change",null,o))}function n(){i&&i.release(),i=null}function o(a){a=a.getData().soft;for(var c=0,d=Object.keys(b("MJewels"));c<d.length;c++)if(b("MJewels")[d[c]]===a){l();return}k()}function p(a){return new(b("MURI"))(a).normalize().toString()}function q(a){var c=b("MJewelLinkFetcher").get("feed");if(!c)return;c=p(c);var d=p(b("MHistory").getPath());c===d&&(a.kill(),b("MPageController").reload())}function r(a){var c=b("formatNumber").withMaxLimit(a,b("MOutOfFeedNewStoriesPolling").MAX_COUNT);b("DOM").setContent(g,c);b("CSS").conditionClass(j,"noCount",a===0);b("CSS").conditionClass(j,"hasCount",a>0);b("CSS").conditionClass(j,"largeCount",c.length>1);b("Stratcom").invoke("m:feed:jewel:badge-count-change",null,{jewel:j,count:a})}function s(a){b("Stratcom").listen("m:homepage:load",null,function(){k(),m()}),b("Stratcom").listen("m:homepage:unload",null,function(){l(),n()}),a&&m()}function t(a){b("Stratcom").listen("m:history:change",null,function(a){var c=new(b("URI"))(a.getData().path);c=c.getPath();a=a.getData().soft;b("MHome").isHome(c)&&!a?k():l()})}function a(a,c,d){if(h)return;h=!0;j=a;g=b("DOM").find(j,"span","count");b("gkx")("812549")?t(c):s(c);b("DOM").listen(b("$")(b("MJewel").JEWEL_NAV_NODE_ID),"click","feed",q);g&&b("MOutOfFeedNewStoriesPolling").addPollingListener(function(a,b){return r(b.count)})}e.exports={init:a}}),null);
__d("XFBConfirmationCliffTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:XFBConfirmationCliffLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:XFBConfirmationCliffLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:XFBConfirmationCliffLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCliffCaller=function(a){this.$1.cliff_caller=a;return this};c.setError=function(a){this.$1.error=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={cliff_caller:!0,error:!0,surface:!0,time:!0,weight:!0};e.exports=a}),null);
__d("XMessagesJewelContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/messages/jewel/content/",{spinner_id:{type:"String",required:!0}})}),null);
__d("MMessagesJewel",["fbt","invariant","Arbiter","ChannelEventType","DOM","EventListener","MessagingEvent","MJewel","MJewelFlyout","MJewelLinkFetcher","MJewels","MJewelsLogger","MLogState","MMessagesThreadRowID","MPageCache","MPageFetcher","MRequest","MURI","Popover","Stratcom","XFBConfirmationCliffTypedLogger","XMessagesJewelContentController","ge","onAfterDisplay","onAfterTTI","qex","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="mJewelMsgThreadContents",j="msg_",k,l,m=!1,n=!1,o=null,p,q=!1,r=!0,s=!1,t=0,u=!1;function v(){k||h(0,2795),b("Arbiter").subscribe("m:jewels:init-counts",y,"all"),k.listen("cleared",A),q||(q=!0,b("Stratcom").listen(b("ChannelEventType").MESSAGE,null,E),b("Stratcom").listen(b("ChannelEventType").MESSAGE,null,B),b("Stratcom").listen("m:jewel:flyout:open",null,z),b("Stratcom").listen("m:history:change",null,w),l&&b("EventListener").listen(l,"click",x))}function w(a){var c=new(b("MURI"))(a.getData().path).normalize().toString();a=a.getData().soft;var d=new(b("MURI"))(b("MJewelLinkFetcher").get("messages")).normalize().toString();m&&c!==d?r=!0:!m&&a!=="messages"&&(r=!0)}function x(){r&&(b("MJewelsLogger").markJewelClick("messages",{isFirstClick:!s,badgeCount:t,jewelBehavior:m?"permalink":"flyout",isPrefetching:n,initialPrefetchPhase:o}),t=0,r=!1,m&&k&&k.getCount()>0&&(k&&k.setCount(0))),s=!0}function y(a,b){__p&&__p();a=b.viewer_id;var c=b.unseen_thread_ids;b=b.unread_thread_ids;a&&(J.viewerID=a);c&&(J.unseenThreadIDs=c.reduce(function(a,b){a[b]=1;return a},{}));b&&(J.unreadThreadIDs=b.reduce(function(a,b){a[b]=1;return a},{}));c&&k&&(k.reregisterListeners(),t=c.length,k.updateCount(c.length,A))}function z(a){a=a.getData();if(!k||a.jewel!=="messages")return;J.messengerCliff&&new(b("XFBConfirmationCliffTypedLogger"))().setSurface("messenger_seen").log();a=k.getCount();k.setCount(a);D();u&&b("setTimeoutAcrossTransitions")(function(){return b("MJewelsLogger").markJewelDisplayed("messages")},1)}function A(){var a=new(b("MRequest"))(new(b("MURI"))("/a/jewel_messages_read.php").toString());a.send()}function B(a){__p&&__p();a=a.getData();if(!a||!k)return;if(a.event===b("MessagingEvent").READ&&a.message.folder==="inbox"){var c=a.message.thread_fbid||a.message.other_user_fbid;delete J.unseenThreadIDs[c];delete J.unreadThreadIDs[c]}else if(a.event===b("MessagingEvent").UNREAD&&a.message.folder==="inbox"){c=a.message.thread_fbid||a.message.other_user_fbid;J.unreadThreadIDs[c]=1}else if(a.event===b("MessagingEvent").MARK_ALL_READ&&a.message.folder==="inbox")J.unreadThreadIDs={},J.unseenThreadIDs={};else if(a.event===b("MessagingEvent").MARK_ALL_SEEN&&a.message.folder==="inbox")J.unseenThreadIDs={};else if(a.parsedPayload&&a.folder==="inbox"){c=a.parsedPayload;if(!C(J.viewerID,c)||c.isUnread()===!1||a.message.is_muted)return;a=c.getThreadFBID()||c.getOtherUserFBID();J.unseenThreadIDs[a]=1;J.unreadThreadIDs[a]=1}else return;c=Object.keys(J.unseenThreadIDs).length;a=Object.keys(J.unreadThreadIDs).length;var d=t;!k.isOpen()&&c!==k.getCount()&&(t=c,k.setCount(c));c=a>0?g._("Messages ({unread_message_count})",[g._param("unread_message_count",a)]):g._("Messages");a=k.getFlyout();a&&a.setHeaderText("messages_jewel_header_text",c.toString());I(d<t)}function C(a,b){if(!b.getParticipantIDs())return!1;if(b.getParticipantIDs().indexOf(a)>-1)return!0;if(a)return b.getParticipantIDs().indexOf(a.toString())>-1;else return!1}function D(){k||h(0,2795);var a="messages-flyout-loading";a=b("DOM").scry(l,"*",a);if(a.length>0){a=b("XMessagesJewelContentController").getURIBuilder().setString("spinner_id",a[0].getAttribute("id")).getURI();p||(p=new(b("MRequest"))(a),p.listen("finally",function(){p=null}),p.send())}}function E(a){__p&&__p();a=a.getData();if(!a||!k)return;if(a.parsedPayload){var c=a.parsedPayload;if(!c.getFolder||c.getFolder()!=="inbox"||!C(J.viewerID,c))return;k.isInitialized()&&(b("MJewelFlyout").removeMenuContent(F(c.getOtherUserFBID(),c.getThreadFBID())),k.isOpen()&&A());m||D()}else a.event===b("MessagingEvent").READ&&a.is_sync&&b("MJewelFlyout").updateMenuColor(F(a.message.other_user_fbid,a.message.thread_fbid),!0,!1)}function F(a,c){return b("MMessagesThreadRowID").getThreadRowID(j,a,c)}function G(a){var c=function(){s||H(!1)};switch(a){case"asap":c();break;case"after-tti":b("onAfterTTI")(c);break;case"after-dd":b("onAfterDisplay")(c);break}}var H=b("throttle")(function(a){var c=b("MJewelLinkFetcher").get("messages");if(!c)return;a&&b("MPageCache").removeCachedPage(c);b("MPageFetcher").prefetch(c)},100);function I(a){if(n){var c=b("qex")._("820092");(a||!c)&&H(!0)}}var J={unseenThreadIDs:{},unreadThreadIDs:{},viewerID:null,messengerCliff:!1,initJewel:function(a){m=!!a.noFlyout,k=b("MJewel").create("messages",{contentsSigil:i,pos:b("MLogState").CLICK_POSITION_MESSAGES_FLYOUT,softState:b("MJewels").MESSAGES,noPopover:m,additionalPaths:["/messages/"]}),l=b("DOM").find(b("ge")(b("MJewel").JEWEL_NAV_NODE_ID),"div","messages"),n=!!a.shouldPrefetch,o=a.initialPrefetchPhase,a.shouldPrefetch&&G(a.initialPrefetchPhase),v()},setMessengerCliff:function(a,b,c){J.messengerCliff=a},refreshMessagesConstraints:function(){b("Popover").getInstance("messages_flyout").refreshConstraints()},onFlyoutContentDisplayed:function(){if(u)return;u=!0;k&&k.isOpen()&&b("MJewelsLogger").markJewelDisplayed("messages")}};e.exports=J}),null);
__d("MJewelLite",["invariant","CSS","DOM","EventEmitter","MHistory","MLinkHack","MURI","Stratcom","$","intlNumUtils"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){__p&&__p();var e;e=a.call(this)||this;e.$MJewelLite1=c;var f=b("$")("mJewelNav");e.$MJewelLite2=b("DOM").find(f,"div",c);e.$MJewelLite3=b("DOM").find(e.$MJewelLite2,"span","count");e.$MJewelLite4=b("DOM").find(e.$MJewelLite2,"a","icon");e.$MJewelLite6=d.jewelActivePaths;e.$MJewelLite5=d.initialCount;e.$MJewelLite7=d.keepBadgeOnActive||!1;return e}var d=c.prototype;d.init=function(){var a=this;this.$MJewelLite8();this.$MJewelLite9();b("Stratcom").listen("m:history:change",null,function(){a.$MJewelLite9()});b("DOM").listen(this.$MJewelLite2,"click",null,function(){return a.$MJewelLite10()})};d.isActive=function(){return b("CSS").hasClass(this.$MJewelLite2,"popoverOpen")};d.getBadgeCount=function(){return this.$MJewelLite5};d.setBadgeCount=function(a,b){b===void 0&&(b=!1);if(this.$MJewelLite5===a||a<0)return;if(this.isActive()&&!b)return;b=this.$MJewelLite5;this.$MJewelLite5=a;this.$MJewelLite8();this.emit("badge-updated",{previousBadgeCount:b,newBadgeCount:a})};d.$MJewelLite8=function(){b("DOM").setContent(this.$MJewelLite3,b("intlNumUtils").formatNumberWithThousandDelimiters(this.$MJewelLite5)),b("CSS").conditionClass(this.$MJewelLite2,"noCount",!this.$MJewelLite5),b("CSS").conditionClass(this.$MJewelLite2,"hasCount",this.$MJewelLite5>0)};d.$MJewelLite9=function(){var a=this.isActive(),c=new(b("MURI"))(b("MHistory").getPath()).getPath();c=!b("MHistory").hasSoftState()&&this.$MJewelLite6.includes(c);b("CSS").conditionClass(this.$MJewelLite2,"popoverOpen",c);!a&&c&&this.$MJewelLite11()};d.$MJewelLite11=function(){this.$MJewelLite7||this.setBadgeCount(0,!0)};d.$MJewelLite10=function(){this.emit("jewel-click")};d.getLink=function(){var a=b("MLinkHack").getHref(this.$MJewelLite4);a!=null||g(0,13524,this.$MJewelLite1);return new(b("MURI"))(a)};d.getSigil=function(){return this.$MJewelLite1};return c}(b("EventEmitter"));e.exports=a}),null);
__d("MJewelLiteLogging",["MJewelsLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[];function a(a,c){if(g.includes(a))return;g.push(a);var d=!1;a.addListener("jewel-click",function(){a.isActive()||b("MJewelsLogger").markJewelClick(a.getSigil(),{isFirstClick:!d,badgeCount:a.getBadgeCount(),jewelBehavior:"permalink",isPrefetching:c.isPrefetching,initialPrefetchPhase:c.prefetchOnStart?"after-tti":null}),d=!0})}e.exports={trackJewelClick:a}}),null);
__d("MJewelLitePrefetcher",["MPageCache","MPageFetcher","onAfterTTI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c){a=a.getLink().toString();c&&b("MPageCache").removeCachedPage(a);b("MPageFetcher").prefetch(a)}function a(a){a.addListener("badge-updated",function(b){b=b.previousBadgeCount<b.newBadgeCount;b&&g(a,!0)})}function c(a){b("onAfterTTI")(function(){return g(a,!1)})}e.exports={prefetchOnStart:c,prefetchOnBadgeUpdate:a}}),null);
__d("MJewelLiteReload",["MPageController","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=3*1e3,h=0;function a(a){if(!b("qex")._("832134"))return;a.isActive()&&(h=Date.now());a.addListener("jewel-activated",function(){h=Date.now()});a.addListener("jewel-click",function(){var c=Date.now()-h;!a.isActive()?h=Date.now():c>g&&(b("MPageController").reload(),h=Date.now())})}e.exports={enableReloadOnActiveClick:a}}),null);
__d("MJewelSetLite",["Bootloader","MJewelLite","MJewelLiteLogging","MJewelLitePrefetcher","MJewelLiteReload"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a,c){if(g[a])return;var d=new(b("MJewelLite"))(a,c);d.init();g[a]=d;c.shouldPrefetch&&(c.prefetchOnStart===!0&&b("MJewelLitePrefetcher").prefetchOnStart(d),b("MJewelLitePrefetcher").prefetchOnBadgeUpdate(d));b("MJewelLiteLogging").trackJewelClick(d,{isPrefetching:c.shouldPrefetch,prefetchOnStart:c.prefetchOnStart});b("MJewelLiteReload").enableReloadOnActiveClick(d)}function c(a){return g[a]}e.exports={initJewel:a,getJewel:c}}),null);
__d("MFriendingJewelChannelUpdates",["ChannelEventType","MJewels","MJewelSetLite","MTouchChannelManagerBootloader","Stratcom","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;function a(){__p&&__p();if(g)return;g=!0;b("MTouchChannelManagerBootloader").init();b("Stratcom").listen(b("ChannelEventType").FRIEND_REQUESTS_COUNT,null,function(a){a=a.getData();var c=a.num_unseen;a=a.num_friend_confirmed_unseen;if(c==null||a==null)return;c=c;b("qex")._("891285")&&(c+=a);a=b("MJewelSetLite").getJewel(b("MJewels").REQUESTS);a.setBadgeCount(c)})}e.exports={start:a}}),null);
__d("MMessagesJewelChannelUpdates",["ChannelEventType","MJewels","MJewelSetLite","MTouchChannelManagerBootloader","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1;function a(){__p&&__p();if(g)return;g=!0;b("MTouchChannelManagerBootloader").init();b("Stratcom").listen([b("ChannelEventType").INBOX],null,function(a){a=a.getData();a=a.unseen;if(a===null||a===void 0)return;var c=b("MJewelSetLite").getJewel(b("MJewels").MESSAGES);c.setBadgeCount(a)})}e.exports={start:a}}),null);
__d("MNotificationsJewelChannelUpdates",["ChannelEventType","MJewels","MJewelSetLite","MTouchChannelManagerBootloader","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=0,i=[];function a(){__p&&__p();if(g)return;g=!0;var a=b("MJewelSetLite").getJewel(b("MJewels").NOTIFICATIONS);h=a.getBadgeCount();b("MTouchChannelManagerBootloader").init();b("Stratcom").listen(b("ChannelEventType").NOTIFICATIONS_NEW,null,function(b){b=b.getData();b=b.data;b.alert_id&&!i.includes(b.alert_id)&&i.push(b.alert_id);a.setBadgeCount(i.length+h)});b("Stratcom").listen(b("ChannelEventType").NOTIFICATIONS_SEEN,null,function(b){i=[],h=0,a.setBadgeCount(i.length+h)})}e.exports={start:a}}),null);
__d("XBookmarksFlyoutBodyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/bookmarks/flyout/body/",{id:{type:"String",required:!0}})}),null);
__d("MChromeTabsBootloader",["MJewels","MRequest","Stratcom","XBookmarksFlyoutBodyController"],(function(a,b,c,d,e,f){a={bootloadBookmarks:function(a){b("Stratcom").listen(["m:chrome:tab:show","m:jewel:flyout:open"],b("MJewels").BOOKMARKS,function(){b("Stratcom").removeCurrentListener(),new(b("MRequest"))(b("XBookmarksFlyoutBodyController").getURIBuilder().setString("id",a).getURI()).send()})}};e.exports=a}),null);
__d("MTitleListener",["FBLogger","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=null,i="",j=!0;function k(){__p&&__p();if(h)return h;var a=document.getElementsByTagName("head");if(!a||!a.length)return null;a=a[0].getElementsByTagName("title");if(!a||!a.length)return null;a=a[0];if(a){a=a.childNodes;a&&a.length&&(h=a[0])}return h}function l(){var a=k();return!a?i:a.nodeValue||i}function m(a){i=a||"";typeof i!=="string"&&(i=String(i));a=k();a&&(a.nodeValue=i);b("Stratcom").invoke("MDocument:title",null,i)}e.exports={getTitle:function(){var a=document.title||i||"";a=typeof a==="string"?a:String(a);return a},getTitleAsString:function(a){a=a===null||a===void 0||typeof a==="object"?this.getTitle():a;a=typeof a==="string"?a:String(a);return a||""},init:function(){__p&&__p();if(g)return j;i=document.title||"";var a={get:function(){return l()},set:function(a){m(a)},enumerable:!0};try{Object.defineProperty(document,"title",a),j=!0}catch(a){j=!1}g=!0;return j}}}),null);
__d("MBackToNewsFeed",["JavelinHistory","MHistory","MHome","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=[];function i(){if(!h||!h.length)return;h.forEach(function(a){a.remove()});h=[]}var j={init:function(){j.updateHistory()},updateHistory:function(a){__p&&__p();a===void 0&&(a=!1);if(a&&g)return;g=!0;if(!j._isBrowserSupported())return;if(b("MHistory").hasSoftState())return;if(history.state&&history.state.addedNewsFeed)return;a=location.href;var c=document.title;document.title="Facebook";window.history.replaceState({},"Facebook",b("MHome").HOME_PATH);window.history.pushState({addedNewsFeed:1},"Current",a);document.title=c},updateHistoryOnNav:function(a){__p&&__p();i();a=a.pattern;if(a.length){var c=new RegExp(a);h.push(b("Stratcom").listen("history:change",null,function(a){i();a=a.getData();if(!a||!a.path)return;a=a.path;c.test(a)&&j.updateHistory()}),b("Stratcom").listen("history:change-default",null,i),b("Stratcom").listen("m:homepage:load",null,i))}},_isBrowserSupported:function(){return b("JavelinHistory").CAN_USE_PUSH_STATE}};e.exports=j}),null);
__d("UnicodeBidiDirection",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b="NEUTRAL";var h="LTR",i="RTL";function j(a){return a===h||a===i}function k(a){j(a)||g(0,3045);return a===h?"ltr":"rtl"}function a(a,b){j(a)||g(0,3045);j(b)||g(0,3046);return a===b?null:k(a)}c={NEUTRAL:b,LTR:h,RTL:i,isStrong:j,getHTMLDir:k,getHTMLDirIfDifferent:a};e.exports=c}),null);
__d("UnicodeBidiGlobalDirectionCore",["invariant","UnicodeBidiDirection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null;function i(a){h=a}function a(){i(b("UnicodeBidiDirection").LTR)}function c(){h||this.initDir();h||g(0,548);return h}d={setDir:i,initDir:a,getDir:c};e.exports=d}),null);
__d("UnicodeBidiGlobalDirection",["Locale","UnicodeBidiDirection","UnicodeBidiGlobalDirectionCore"],(function(a,b,c,d,e,f){"use strict";b("UnicodeBidiGlobalDirectionCore").initDir=function(){b("UnicodeBidiGlobalDirectionCore").setDir(b("Locale").isRTL()?b("UnicodeBidiDirection").RTL:b("UnicodeBidiDirection").LTR)},e.exports=b("UnicodeBidiGlobalDirectionCore")}),null);
__d("UnicodeBidi",["invariant","UnicodeBidiDirection","UnicodeBidiGlobalDirection"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();d={L:"A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u02bb-\u02c1\u02d0\u02d1\u02e0-\u02e4\u02ee\u0370-\u0373\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0482\u048a-\u052f\u0531-\u0556\u0559-\u055f\u0561-\u0587\u0589\u0903-\u0939\u093b\u093d-\u0940\u0949-\u094c\u094e-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd-\u09c0\u09c7\u09c8\u09cb\u09cc\u09ce\u09d7\u09dc\u09dd\u09df-\u09e1\u09e6-\u09f1\u09f4-\u09fa\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3e-\u0a40\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd-\u0ac0\u0ac9\u0acb\u0acc\u0ad0\u0ae0\u0ae1\u0ae6-\u0af0\u0b02\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0b5c\u0b5d\u0b5f-\u0b61\u0b66-\u0b77\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd0\u0bd7\u0be6-\u0bf2\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c41-\u0c44\u0c58\u0c59\u0c60\u0c61\u0c66-\u0c6f\u0c7f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd-\u0cc4\u0cc6-\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0cde\u0ce0\u0ce1\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d4e\u0d57\u0d60\u0d61\u0d66-\u0d75\u0d79-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dcf-\u0dd1\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df4\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e4f-\u0e5b\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edf\u0f00-\u0f17\u0f1a-\u0f34\u0f36\u0f38\u0f3e-\u0f47\u0f49-\u0f6c\u0f7f\u0f85\u0f88-\u0f8c\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce-\u0fda\u1000-\u102c\u1031\u1038\u103b\u103c\u103f-\u1057\u105a-\u105d\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108c\u108e-\u109c\u109e-\u10c5\u10c7\u10cd\u10d0-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1360-\u137c\u1380-\u138f\u13a0-\u13f4\u1401-\u167f\u1681-\u169a\u16a0-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1735\u1736\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17b6\u17be-\u17c5\u17c7\u17c8\u17d4-\u17da\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a16\u1a19\u1a1a\u1a1e-\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1a80-\u1a89\u1a90-\u1a99\u1aa0-\u1aad\u1b04-\u1b33\u1b35\u1b3b\u1b3d-\u1b41\u1b43-\u1b4b\u1b50-\u1b6a\u1b74-\u1b7c\u1b82-\u1ba1\u1ba6\u1ba7\u1baa\u1bae-\u1be5\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1bfc-\u1c2b\u1c34\u1c35\u1c3b-\u1c49\u1c4d-\u1c7f\u1cc0-\u1cc7\u1cd3\u1ce1\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200e\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u214f\u2160-\u2188\u2336-\u237a\u2395\u249c-\u24e9\u26ac\u2800-\u28ff\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d70\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u302e\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u3190-\u31ba\u31f0-\u321c\u3220-\u324f\u3260-\u327b\u327f-\u32b0\u32c0-\u32cb\u32d0-\u32fe\u3300-\u3376\u337b-\u33dd\u33e0-\u33fe\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua60c\ua610-\ua62b\ua640-\ua66e\ua680-\ua69d\ua6a0-\ua6ef\ua6f2-\ua6f7\ua722-\ua787\ua789-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua824\ua827\ua830-\ua837\ua840-\ua873\ua880-\ua8c3\ua8ce-\ua8d9\ua8f2-\ua8fb\ua900-\ua925\ua92e-\ua946\ua952\ua953\ua95f-\ua97c\ua983-\ua9b2\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9cd\ua9cf-\ua9d9\ua9de-\ua9e4\ua9e6-\ua9fe\uaa00-\uaa28\uaa2f\uaa30\uaa33\uaa34\uaa40-\uaa42\uaa44-\uaa4b\uaa4d\uaa50-\uaa59\uaa5c-\uaa7b\uaa7d-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaaeb\uaaee-\uaaf5\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5f\uab64\uab65\uabc0-\uabe4\uabe6\uabe7\uabe9-\uabec\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ue000-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",R:"\u0590\u05be\u05c0\u05c3\u05c6\u05c8-\u05ff\u07c0-\u07ea\u07f4\u07f5\u07fa-\u0815\u081a\u0824\u0828\u082e-\u0858\u085c-\u089f\u200f\ufb1d\ufb1f-\ufb28\ufb2a-\ufb4f",AL:"\u0608\u060b\u060d\u061b-\u064a\u066d-\u066f\u0671-\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u0710\u0712-\u072f\u074b-\u07a5\u07b1-\u07bf\u08a0-\u08e3\ufb50-\ufd3d\ufd40-\ufdcf\ufdf0-\ufdfc\ufdfe\ufdff\ufe70-\ufefe"};var h=new RegExp("["+d.L+d.R+d.AL+"]"),i=new RegExp("["+d.R+d.AL+"]");function j(a){a=h.exec(a);return a==null?null:a[0]}function k(a){a=j(a);return a==null?b("UnicodeBidiDirection").NEUTRAL:i.exec(a)?b("UnicodeBidiDirection").RTL:b("UnicodeBidiDirection").LTR}function l(a,c){c=c||b("UnicodeBidiDirection").NEUTRAL;if(!a.length)return c;a=k(a);return a===b("UnicodeBidiDirection").NEUTRAL?c:a}function m(a,c){c||(c=b("UnicodeBidiGlobalDirection").getDir());b("UnicodeBidiDirection").isStrong(c)||g(0,451);return l(a,c)}function a(a,c){return m(a,c)===b("UnicodeBidiDirection").LTR}function c(a,c){return m(a,c)===b("UnicodeBidiDirection").RTL}f={firstStrongChar:j,firstStrongCharDir:k,resolveBlockDir:l,getDirection:m,isDirectionLTR:a,isDirectionRTL:c};e.exports=f}),null);
__d("isElementPartiallyInViewport",["getElementRect","getViewportDimensions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=b("getViewportDimensions")();if(!c.width||!c.height)return!1;a=b("getElementRect")(a);if(!a.width||!a.height)return!1;var d=a.top<=c.height&&a.top+a.height>=0;c=a.left<=c.width&&a.left+a.width>=0;return d&&c}e.exports=a}),null);
__d("MBackNavbar",["cx","fbt","CSS","DOM","Event","MAnimator","MArrays","MBackToNewsFeed","MHeaderLogger","MHistory","MHome","MPageCache","MPageController","MPageFetcher","MStoriesUIConstants","MTitleListener","MURI","MViewport","Stratcom","UnicodeBidi","UnicodeBidiDirection","Vector","getViewportDimensions","gkx","isElementPartiallyInViewport","onAfterTTI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=!1,j=!1,k=!1,l=[],m=!1,n=!1,o=!1,p=[],q=[],r=null,s=null,t=b("UnicodeBidiDirection").LTR,u=!1,v=!1,w=!0,x=null,y=!1,z=!1,A=!1,B=!1,C=!1,D=[],E=!1;function F(a){return a.split(",").map(function(a){a=a.toLowerCase();a.startsWith("/")||(a="/"+a);return a})}function G(){if(u||!m)return;b("MBackToNewsFeed").updateHistory(!0);!b("MHome").isHome()&&C&&b("onAfterTTI")(function(){!b("MHome").isHome()&&E&&b("MPageFetcher").prefetch(b("MHome").HOME_PATH)})}function H(a){try{a=new(b("MURI"))(a);a=a.getDomain()}catch(b){a=""}return a}function I(){var a=M();if(!a)return!1;a=H(a);return a.length>0&&!a.endsWith(".facebook.com")}function J(a,c,d){__p&&__p();d=b("MTitleListener").getTitleAsString(d);if(!d||typeof d.split!=="function")return;d=d.split("\n").join(" ");c.innerText=d;t=b("UnicodeBidi").getDirection(d,t);switch(t){case b("UnicodeBidiDirection").RTL:b("CSS").addClass(a,"rtl");break;default:b("CSS").removeClass(a,"rtl")}}function K(a,c,d,e){__p&&__p();var f=[];if(w){c.innerText="";f.push(b("Stratcom").listen("MDocument:title",null,function(b){var d=null;b&&(d=b.getData());J(a,c,d)}));var g=null;N()&&(g=h._("Facebook").toString());J(a,c,g)}g=function(){y=!0,history.go(-1)};v?(d&&f.push(b("Event").listen(d,"click",g)),e&&f.push(b("Event").listen(e,"click",g))):f.push(b("Event").listen(a,"click",g));var i=!1;return function(){if(i)return;i=!0;f.forEach(function(a){a.remove()})}}var L=!0;function M(){if(L){L=!1;return document.referrer}return""}function N(){if(!D.length)return!1;if(!b("MHistory").hasSoftState)return!1;var a=b("MHistory").getState();return!a?!1:D.indexOf(a)!==-1}function O(a){return b("MHistory").hasSoftState()&&D.length?!1:b("MArrays").findPrefix(q,a)}function P(a){a=a||b("MHistory").getPath();var c="";if(a)try{a=new(b("MURI"))(a).normalize();c=a.getPath().toLowerCase()}catch(a){c=""}return c}function Q(a){__p&&__p();var b=I();if(n&&!b)return!1;b=P(a);if(O(b))return!1;if(o)return!0;if(!p.length)return!1;for(var a=0;a<p.length;a++)if(b.indexOf(p[a])!==-1)return!0;return!1}function R(){__p&&__p();s&&(s(),s=null);if(!r)return;var a=r;b("setTimeoutAcrossTransitions")(function(){__p&&__p();var c=b("MHistory").getPath(),d=b("MHome").isHome()&&!b("MHistory").hasSoftState(),e=null,f=null;v&&(e=document.getElementById("MBackNavBarLeftArrow"),f=document.getElementById("MBackNavBarRightArrow"));var g=d||b("MHistory").hasSoftState()&&!N()||v&&!e&&!f||!Q(c);if(g){b("CSS").removeClass(a,"show");if(j&&q.length&&l.length){g=P();O(g)&&b("MArrays").findPrefix(l,g)&&b("MHeaderLogger").logExposure(!0)}if(d&&A&&y){y=!1;g=document.getElementById("page");if(g){d=b("DOM").scry(g,"article","story-div");var h=null;for(var g=d.length-1;g>=0;g--)if(b("isElementPartiallyInViewport")(d[g]))break;else h=d[g];if(h){b("CSS").show(h);var i=b("getViewportDimensions")();b("setTimeoutAcrossTransitions")(function(){var a=b("MViewport").getScrollTop(),c=b("Vector").getPos(h).y-i.height+300,d=Math.abs(c-a),e=a;b("MAnimator").play(a,c,500,function(a){var c=b("MAnimator").easeInOutCubic((a-e)/d);c=Math.round((a-e)*c+e);e=a;b("MViewport").scrollToY(c)})},800)}}}b("Stratcom").invoke("m:backnav:show-jewels")}else{if(j){d=!1;if(k){g=P(c);(l.length===0||b("MArrays").findPrefix(l,g))&&(d=!0)}b("MHeaderLogger").logExposure(d)}if(!m)return;x&&(v?s=K(a,x,e,f):s=K(a,x));b("CSS").addClass(a,"show");z&&G();b("Stratcom").invoke("m:backnav:show-backbar")}},1)}function S(a){__p&&__p();if(i)return;i=!0;r=a.element;m=a.enabled;j=a.logExposure;k=a.qeExposure;n=a.enabledForExternalReferer;o=a.allPages;u=a.backToFeedDisabled;v=a.backOnArrowClick;x=a.linkElement;var c=a.forceRefreshFeed;A=c?!1:a.scrollToNextFeedItem;z=a.modifyHistoryOnNav;C=a.isPageLoggingAllowed;E=a.enableFeedPrefetch;!o?p=F(a.pages):a.excludedPages.length&&(q=F(a.excludedPages));var d=a.enableBackbarForSoftNav||"";d.length&&(D=d.split(","));a.exposurePages&&(l=F(a.exposurePages));q.length?q=q.concat(b("MStoriesUIConstants").HIDE_HEADER_URLS):q=b("MStoriesUIConstants").HIDE_HEADER_URLS;b("Stratcom").listen("history:change",null,R);b("Stratcom").listen("m:homepage:load",null,R);w=!a.staticTitle;m&&w&&(w=b("MTitleListener").init());w||b("CSS").addClass(x,"_6sow");if(!z){d=P();a=O(d);a||G()}R();c&&m&&(b("Stratcom").listen("m:page:beforeloading",null,function(a){__p&&__p();var c=y;y=!1;if(!a)return;a=a.getData();if(!a)return;var d=b("MPageController").getRenderedPath();d=d&&b("MHome").isHome(d);if(d){B=!1;d=String(a).indexOf("?");if(d===-1)return;try{d=new(b("MURI"))(a);d=d.getQueryData()||{}}catch(a){d={}}d=d._bb_norefresh;d==="1"&&(B=!0)}else{d=b("MHome").isHome(a);var e=B;B=!1;c&&a&&d&&!e&&b("MPageCache").removeCachedPage(a)}}),b("Stratcom").listen("m:backnav:invalidate-cached-feed",null,function(){B=!1}))}e.exports={init:function(a){S(a)}}}),null);
__d("MBackToTop",["JavelinHistory","MPageController","MPageControllerPath","MStopNGo","MViewport","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MViewport").getScreenHeight(),h={init:function(a){__p&&__p();if(!h._isBrowserSupported())return;if(h._initialized)return;h._initialized=!0;h._reload=a.reload;b("MStopNGo").listen("go",h._pushScrollingStateIfNeeded);b("MStopNGo").listen("stop",function(){return setTimeout(h._pushScrollingStateIfNeeded,1e3)});b("Stratcom").listen("popstate",null,h._onpopstate)},_onpopstate:function(a){h._lastpop=Date.now();if(!h._isPathSupported())return;if(h._isScrollingState())return;b("MPageControllerPath").isRequestPath(location.href)&&b("MViewport").getScrollTop()>g&&(window.setTimeout(function(){b("MViewport").scrollToTop(),h._reload==="full"&&b("MPageController").reload()},1),a.stop())},_pushScrollingStateIfNeeded:function(){if(!h._isPathSupported())return;if(h._isScrollingState())return;b("MViewport").getScrollTop()>g&&Date.now()-h._lastpop>1e3&&window.history.pushState({scrolling:1},null)},_initialized:!1,_lastpop:0,_reload:null,_isScrollingState:function(){var a=window.history.state;return a&&a.scrolling},_isBrowserSupported:function(){return b("JavelinHistory").CAN_USE_PUSH_STATE},_isPathSupported:function(){return b("MPageController").isHomeishPath(location.href)}};e.exports=h}),null);
__d("MBeeperController",["cx","Bootloader","CSS","DOM","MHistory","Stratcom","URI","$","getActiveElement","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i,j,k,l=[],m,n=3e3;function a(a){m=a,b("setTimeoutAcrossTransitions")(function(){b("Stratcom").listen("m_notification",null,o),b("Stratcom").listen("blur",null,p),b("Stratcom").listen("m:history:change",null,u)},n)}function o(a){a=a.getData();if(!a||!a.data||m&&!a.data.type||m&&m.indexOf(a.data.type)===-1)return;a={notification:a.data};t(a);!h&&!i?b("Bootloader").loadModules(["ReactComponentRenderer","MBeeper.react"],function(a,b){h=a,i=b,u()},"MBeeperController"):u()}function p(a){a=a.getTarget();a instanceof HTMLElement&&r(a)&&setTimeout(u,50)}function q(){l.shift(),u()}function r(a){var b=a.tagName;return b==="INPUT"||b==="TEXTAREA"||a.contentEditable==="true"}function s(){return!r(b("getActiveElement")())&&b("$")("root").offsetHeight!==0}function t(a){var b=l.find(function(b){return b.notification.alert_id===a.notification.alert_id});b||l.push(a)}function u(){__p&&__p();if(!s())return;var a=new(b("URI"))(b("MHistory").getPath());if(a.getQueryData().soft==="notifications"){l=[];return}a=l[0];if(!a)return;j||(j=b("DOM").create("div"),b("CSS").addClass(j,"_3hy8"),b("$")("page").appendChild(j));!k?h&&(k=new h(i,j),k.setProps(babelHelpers["extends"]({},a,{onHide:q}))):k.component.isReady()&&k.setProps(a)}f.init=a}),null);
__d("MPageletTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHROME:"chrome",CONTENT:"content"})}),null);
__d("MFirstPageRecorder",["Arbiter","DOM","MDeepCopy","MPageCache","MPageController","MPageHeaderRight","MPageletTypes","MPageTitle","MRequestConfig","MResponseData","MURI","ScriptPath","ServerJS","Stratcom","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g,h=!1,i=!1,j=[],k=new(b("MURI"))(b("MPageController").getRenderedPath()),l,m=[],n=[];({});var o=["m:chrome:schedulable-graph-search","first_response","last_response","MNotificationFlyoutContent","MMessegesFlyoutContent","MFriendRequestsFlyoutContent"];function p(){if(!l)return;b("MPageCache").setCachedPage(k,l);b("MPageCache").clearCachedIUIResponses(k);m.forEach(function(a){b("MPageCache").addCachedIUIResponse(k,a)});i=!0}function q(){__p&&__p();if(h)return;h=!0;var a={ajax_response_token:b("MRequestConfig").ajaxResponseToken.secret,js:[],css:[],ixData:null,bxData:null,actions:[]},c=b("$")("root").cloneNode(!0),d=[];l=new(b("MResponseData"))({ajax_response_token:b("MRequestConfig").ajaxResponseToken.secret,js:[],css:[],ixData:[],bxData:[],actions:[{cmd:"script",type:"immediate",fn:function(){b("DOM").replace(b("$")("root"),c.cloneNode(!0))}}]});var e=b("MPageHeaderRight").getChromeHeaderRightContent();e&&e.length>0&&d.push(function(){var a=document.createDocumentFragment();for(var c=0;c<e.length;c++)a.appendChild(e[0]);b("MPageHeaderRight").setup({node:a})});var f=document.title;d.push(function(){b("MPageTitle").setTitle(f)});var g=b("ScriptPath").getPageInfo();g&&d.push(function(){b("ScriptPath").set(g.scriptPath,g.categoryToken,g.extraData)});a.actions=d.map(function(a){return{cmd:"script",type:"onload",fn:a}});m.push(new(b("MResponseData"))(a))}function r(a,c,d){var e={ajax_response_token:b("MRequestConfig").ajaxResponseToken.secret,js:[],css:[],ixData:null,bxData:null,actions:[]};e.actions=Object.keys(a).map(function(b){return{cmd:"replace",target:b,html:a[b],replaceifexists:!1,allownull:!1}});c&&e.actions.push({cmd:"append",target:"static_templates",html:c,replaceifexists:!0});d&&e.actions.push({cmd:"script",type:"onload",fn:function(){new(b("ServerJS"))().handle(b("MDeepCopy")(d))}});q();m.push(new(b("MResponseData"))(e))}function s(a,c){if(!a||o.includes(a.id))return;i?(r(a.contentMap,a.staticTemplates,a.jsmods),b("MPageCache").addCachedIUIResponse(k,m.pop())):n.push(a)}function t(){l=null,h=!0}function u(){for(var a=0,b=n.length;a<b;a++)r(n[a].contentMap,n[a].staticTemplates,n[a].jsmods);p();n=[];m=[]}function a(a){__p&&__p();if(g)return;g=!0;a;b("MPageCache").setPageCacheComplete(k,!0);var c=b("Arbiter").subscribe(["pagelet_performing_replayable_actions","pagelet_performing_replayable_actions_failed","all_pagelets_loaded"],function(b,c){switch(b){case"pagelet_performing_replayable_actions":s(c,a);break;case"pagelet_performing_replayable_actions_failed":t();break;case"all_pagelets_loaded":u();break}}),d=b("Arbiter").subscribe(["MRenderingScheduler/pageletSchedule","MRenderingScheduler/dd"],function(a,c){switch(a){case"MRenderingScheduler/pageletSchedule":if(c.pageletConfig.type===b("MPageletTypes").CONTENT){a=(a={},a[c.id]=c.element?b("ge")(c.element).innerHTML:c.content.__html,a);r(a,c.pageletConfig.templates.__html,b("MDeepCopy")(c.pageletConfig.serverJSData))}break;case"MRenderingScheduler/dd":p();break}});j=[c,d]}b("Stratcom").listen("m:page:unload",null,function(){j.forEach(function(a){a&&a.unsubscribe()}),j=[],g=!0,l=null,m=[],n=[],b("Stratcom").removeCurrentListener()});f.startPageletCaching=a}),null);
__d("BanzaiLooper",["Banzai"],(function(a,b,c,d,e,f){var g={retry:!0};function h(a,c){b("Banzai").post("banzai_looper:"+a,c,g)}a={labelBinaryClassificationExample:function(a){h("binary_classification_example",babelHelpers["extends"]({operation:"label"},a))}};e.exports=a}),null);
__d("MLinkPredictionLabeling",["BanzaiLooper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("BanzaiLooper").labelBinaryClassificationExample,h=new Set();a={label:function(a){__p&&__p();if(a===null||typeof a!=="object")return;var b=a.trace;b=b===void 0?null:b;var c=a.loopName;c=c===void 0?null:c;a=a.label;a=a===void 0?null:a;if(typeof b!=="string"||typeof c!=="string"||typeof a!=="string")return;var d=c+":"+b;h.has(d)||(h.add(d),g({trace:b,loopName:c,label:a}))}};e.exports=a}),null);
__d("MLink",["DOM","ErrorUtils","FBLogger","MLegacyDataStore","MLinkHack","MLinkPredictionLabeling","MLynx","MPageCache","MPageController","Stratcom","URI"],(function(a,b,c,d,e,f){__p&&__p();var g="standalone"in window.navigator&&window.navigator.standalone,h=!1;function a(){__p&&__p();if(h)return;h=!0;b("DOM").listen(document.documentElement,"click",null,function(a){__p&&__p();if(a.getPrevented())return;b("ErrorUtils").applyWithGuard(function(){__p&&__p();var c=a.getNode("tag:a");if(c===null||c===void 0)return;var d=a.getRawEvent();if(c.getAttribute("onclick")||(d.which||d.button)>=2)return;b("MLinkHack").remove(c);d=c.getAttribute("href")||null;var e=new(b("URI"))(d),f=e.getProtocol();if(f&&f!="http"&&f!="https")return;var h=e.getDomain();h=h&&!/\.facebook.com$/i.test(h);h&&!b("MLynx").isShimmedLink(c)&&b("FBLogger")("FIXME").mustfix("Loading an external URL without shimming: %s",d);var i=c.getAttribute("target")||null;if((i==="_blank"||h)&&g)return;if(c.hasAttribute("data-disable-mlink"))return;if(i==="_blank")window.open(d,"_blank");else if(e.getPath().toLowerCase().indexOf("/dialog/oauth")>-1)return;else if(i||f&&f+":"!==location.protocol||b("Stratcom").hasSigil(c,"no_mpc")||h)window.location=d;else if(d)if(d.indexOf("#")===0){e=document.getElementById(d.substr(1));e&&e.scrollIntoView()}else{i=b("MLegacyDataStore").get(c);i.fromCache&&b("MPageCache").setScrollHistory(d,0);b("MPageController").load(d,{replace:i.behavior==="replace-state",expiration:i.fromCache?i.shortCache?b("MPageController").EXPERIMENTAL_USER_EXPIRE_MS:b("MPageController").HISTORY_EXPIRE_MS:null,noAutoScroll:i.noAutoScroll,prefetchHref:i.prefetchHref});b("MLinkPredictionLabeling").label(i.predictionLabeling)}else{if(c.hasAttribute("data-sigil"))return;f="";h=a.getTarget();while(h&&h!=document.body)f=f+" <"+h.nodeName,typeof h.id==="string"&&h.id!==""&&(f=f+" id="+h.id),typeof h.className==="string"&&h.className!==""&&(f=f+" class="+h.className),f+=" >",h=h.parentNode;b("FBLogger")("FIXME").warn('handleClick: unknown link action: <a id="%s" class="%s" /> Path: %s',c.id,c.className,f);return}a.prevent()},null,[],null,"LinkController")})}f.setupListener=a}),null);