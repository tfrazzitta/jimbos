if (self.CavalryLogger) { CavalryLogger.start_js(["XQgVj"]); }

__d("MInitJewelCounts",["Arbiter"],(function(a,b,c,d,e,f){"use strict";function a(a){b("Arbiter").inform("m:jewels:init-counts",a,"persistent")}e.exports={main:a}}),null);
__d("isNodeWithinRect",[],(function(a,b,c,d,e,f){function a(a,b){if(!a.getBoundingClientRect)return!1;a=a.getBoundingClientRect();return a.bottom>=b.top&&a.top<=b.bottom&&a.right>=b.left&&a.left<=b.right}e.exports=a}),null);
__d("MTabbable",["MAria","MJSEnvironment","MViewport","isNodeWithinRect"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c){while(a&&a!==c){if(b("MAria").isHidden(a))return!0;a=a.parentNode}return!1}function h(a,b){if(a.offsetHeight===0||a.offsetWidth===0||window.getComputedStyle(a).visibility==="hidden"||parseInt(a.tabIndex,10)<0||g(a,b))return!1;if(a.tabIndex>=0)return!0;switch(a.tagName){case"A":return a.href&&a.rel!="ignore";case"INPUT":return a.type!="hidden"&&a.type!="file"&&!a.disabled;case"BUTTON":case"SELECT":case"TEXTAREA":return!a.disabled}return!1}function a(a){__p&&__p();if(!a.getBoundingClientRect)return;var c=b("MJSEnvironment").IS_APPLE_WEBKIT_IOS&&parseFloat(b("MJSEnvironment").OS_VERSION)>=8||b("MJSEnvironment").BROWSER_NAME==="Safari"&&!b("MJSEnvironment").IS_APPLE_WEBKIT_IOS;c=c?a.querySelectorAll("a, button, select, [tabindex]"):a.querySelectorAll("a, button, input, select, textarea, [tabindex]");var d=b("MViewport").getBoundingRect();for(var e=0,f;f=c[e];e++)if(h(f,a)&&b("isNodeWithinRect")(f,d)){f.focus();return}}f.focusTabbable=a}),null);
__d("MHeaderGating",["CurrentUser","qex"],(function(a,b,c,d,e,f){"use strict";a={isStickyHeaderEnabled:function(){return b("CurrentUser").isWorkUser()?!!b("qex")._("829069"):!!b("qex")._("817052")}};e.exports=a}),null);
__d("Popover",["cx","CSS","DOM","MAria","MHeaderGating","MViewport","Stratcom","Vector","$","eventsMixinDeprecated","nullthrows","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h=40;a=function(){"use strict";__p&&__p();function a(c){__p&&__p();var d=c.flyout;d=typeof d==="string"?b("$")(d):d;this.flyout=d;this.content=b("DOM").scry(this.flyout,"div","flyout-content")[0];this.content&&b("CSS").addClass(this.content,"_7i2z");this.options=c;this._onOrientationChange=this._reposition.bind(this);b("CSS").conditionClass(this.flyout,"popover_flyout",!0);d=c.button;d&&(d=typeof d==="string"?b("$")(d):d,this.buttonClickListener=b("DOM").listen(d,"click",null,this._openHandler.bind(this)),d.setAttribute("role","button"),b("MAria").setupPopup(d,this.flyout),this.button=d);d=c.flyoutAnchor;d?this.flyoutAnchor=typeof d==="string"?b("$")(d):d:this.flyoutAnchor=this.button;this.options.flyoutFromRoot&&(this.flyoutClickListener=b("DOM").listen(this.flyout,"click",null,this._openHandler.bind(this)));this.options.touchstart_callback&&(this.flyoutTouchStartListener=b("DOM").listen(this.flyout,"touchstart",null,this._touchStartHandler.bind(this)));this.options.touchmove_callback&&(this.flyoutTouchMoveListener=b("DOM").listen(this.flyout,"touchmove",null,this._touchMoveHandler.bind(this)));this.options.touchend_callback&&(this.flyoutTouchEndListener=b("DOM").listen(this.flyout,"touchend",null,this._touchEndHandler.bind(this)));a._instances[this.flyout.id]=this}var c=a.prototype;c.isOpen=function(){return!!this._isOpen};c.open=function(){__p&&__p();if(this.isOpen())return;a._activePopover&&a._activePopover.close();a._activePopover=this;this._isOpen=!0;this.constraint=null;b("CSS").conditionClass(this.flyout,"popover_hidden",!1);this.options.flyoutFromRoot&&this._absolutePositionFlyout();this._position();this.options.heightConstraint||(b("CSS").conditionClass(b("nullthrows")(document.body),"disableClicks",!0),this.globalListener=b("Stratcom").listenCapture("click",null,this._closeHandler.bind(this)));window.addEventListener("orientationchange",this._onOrientationChange,!1);b("MAria").showPopup(this.button,this.flyout);if(this.options.ensureVisible){var c=b("MViewport").getScrollTop(),d=this._getElementPosition(this.flyout).y,e=d+this.flyout.offsetHeight;e=e-(c+b("MViewport").getUseableHeight());if(e>0){e=Math.min(e,Math.max(d-c-h,0));b("MViewport").scrollTo(0,c+e)}}this.invoke("open")};c.close=function(c){__p&&__p();if(!this.isOpen())return;a._activePopover=null;this._isOpen=!1;b("CSS").conditionClass(this.flyout,"popover_hidden",!0);this.options.flyoutFromRoot&&this.flyoutParent&&(this.flyoutParent.appendChild(this.flyout),delete this.flyoutParent);b("setTimeoutAcrossTransitions")(function(){b("CSS").conditionClass(b("nullthrows")(document.body),"disableClicks",!1)}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener("orientationchange",this._onOrientationChange,!1);this._releaseConstraint();b("MAria").hidePopup(this.button,this.flyout);c||this.invoke("close")};c.clear=function(){this.globalListener&&this.globalListener.remove(),this.buttonClickListener&&this.buttonClickListener.remove(),this.flyoutClickListener&&this.flyoutClickListener.remove(),this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove(),this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove(),this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove(),delete a._instances[this.flyout.id]};c.refreshConstraints=function(){__p&&__p();if(!this._isOpen)return!1;var c=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){var d=b("MHeaderGating").isStickyHeaderEnabled();c.style.minHeight=b("MViewport").getUseableHeight(d)+"px";this.constraint=b("MViewport").addHeightConstraint(b("Vector").getDim(this.content).y+this._getElementPosition(c).y)}else this.constraint=b("MViewport").addMinHeightConstraint(b("Vector").getDim(c).y+this._getElementPosition(c).y+a._MARGIN)};c._getTouchPoint=function(a){var b;a=a.getRawEvent();a instanceof TouchEvent&&(b=a.targetTouches[0]);a={x:b?b.screenX:0,y:b?b.screenY:0};return a};c._touchStartHandler=function(a){var b=this.options.touchstart_callback;b&&b(this._getTouchPoint(a))};c._touchMoveHandler=function(a){if(this.isOpen()){var b=this.options.touchmove_callback;b&&b(this._getTouchPoint(a))}};c._touchEndHandler=function(a){var b=this.options.touchend_callback;b&&b(this._getTouchPoint(a))};c._openHandler=function(a){__p&&__p();a.prevent();a=this.isOpen();if(a&&!this.options.preventClose)this.close();else if(!a){a=b("DOM").scry(document,"input");for(var c=0;c<a.length;c++)a[c].blur();this.open()}};c._closeHandler=function(a){a.getNode("popover")||this.close()};c._getElementPosition=function(a){__p&&__p();a=a;var c=a.offsetLeft,d=a.offsetTop;a=a.offsetParent;while(a&&a!==document.documentElement){c+=a.offsetLeft;d+=a.offsetTop;var e=window.getComputedStyle(a);c+=parseInt(e.getPropertyValue("border-left-width").slice(0,-2),10);d+=parseInt(e.getPropertyValue("border-top-width").slice(0,-2),10);a=a.offsetParent}return new(b("Vector"))(c,d)};c._absolutePositionFlyout=function(){this.flyoutParent=this.flyout.parentNode;b("$")("root").appendChild(this.flyout);var a=this._getElementPosition(this.flyout.parentNode),c=this._getElementPosition(this.flyoutAnchor),d=b("Vector").getDim(this.flyoutAnchor);c=c.y-a.y+d.y;this.flyout.style.position="absolute";this.flyout.style.top=c+"px"};c._position=function(){var a=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var c=this._getElementPosition(this.flyoutAnchor),d=b("DOM").find(this.flyout,"*","nub"),e=b("Vector").getDim(d).x,f=b("Vector").getDim(this.flyoutAnchor).x;a=this._getElementPosition(a);new(b("Vector"))(c.x-a.x+(f-e)/2,0).setPos(d)}this.refreshConstraints()};c._reposition=function(){b("setTimeoutAcrossTransitions")(this._position.bind(this),0)};c._releaseConstraint=function(){this.constraint&&(this.constraint.release(),this.constraint=null)};a.getInstance=function(b){return a._instances[b]};a.clearAll=function(){for(var b=0;b<a._instances.length;b++)a._instances[b].clear()};return a}();a._activePopover=null;a._MARGIN=40;a._instances={};b("eventsMixinDeprecated")(a,["open","close"]);e.exports=a}),null);
__d("MJewelFlyout",["CSS","DOM","EventEmitter","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="acw",h="aclb",i=3e3;a=function(){__p&&__p();function a(a,c,d){this.$1=c,this.$2=a,this.$3=d,this.$7=new(b("EventEmitter"))()}var c=a.prototype;c.isOpen=function(){return!!this.$9&&this.$9.isOpen()};c.open=function(){this.$9&&this.$9.open()};c.close=function(){this.$9&&this.$9.close()};c.$10=function(){var a=new(b("Popover"))({button:b("DOM").find(this.$2,"*","icon"),flyout:this.$1,ensureVisible:!1,heightConstraint:!0,preventClose:!0});this.$9=a;this.$4=a.listen("open",this.$11.bind(this));this.$5=a.listen("close",this.$12.bind(this));this.$6=b("DOM").listen(this.$1,"click",null,this.$13.bind(this));b("MJSEnvironment").IS_ANDROID&&b("MJSEnvironment").GET_OS_VERSION>=4&&(this.$8=b("DOM").scry(this.$1,"div","scroll-area")[0])};c.clear=function(){this.$4&&this.$4.remove(),this.$5&&this.$5.remove(),this.$6&&this.$6.remove(),this.$9&&this.$9.clear()};c.reregisterListeners=function(){var a=this.isOpen();this.clear();this.$10();a&&this.open()};c.addOpenListener=function(a){return this.$7.addListener("open",a)};c.$11=function(){if(this.$8){b("MViewport").scrollToHeader();var a=document.documentElement;a&&(b("CSS").conditionClass(a,"hide-scroll",!0),this.$8.style.maxHeight=a.offsetHeight-200+"px")}b("MHistory").pushSoftState(this.$3.softState);this.$7.emit("open");b("Stratcom").invoke("m:jewel:flyout:open",this.$3.sigil,{jewel:this.$3.sigil});b("MTabbable").focusTabbable(this.$1)};c.$12=function(){if(this.$8){this.$8.style.minHeight="";var a=document.documentElement;a&&b("CSS").conditionClass(a,"hide-scroll",!1)}b("Stratcom").invoke("m:jewel:flyout:close",this.$3.sigil,{jewel:this.$3.sigil});b("MHistory").popSoftState(this.$3.softState)};c.$13=function(a){b("MLogState").updateLink(a,this.$3.pos)};c.$14=function(a){a.kill()};c.setHeaderText=function(a,c){if(!a||!c)return;a=b("DOM").scry(this.$1,"*",a)[0];if(!a)return;var d=a.cloneNode(!0);d.innerText=c;b("DOM").replace(a,d)};a.removeMenuContent=function(a){a=document.getElementById(a);a&&b("DOM").remove(a)};a.updateMenuColor=function(c,d,e){e?b("setTimeoutAcrossTransitions")(a.$15.bind(this,c,d),i):a.$15(c,d)};a.$15=function(a,c){a=document.getElementById(a);a&&(b("CSS").conditionClass(a,h,!c),b("CSS").conditionClass(a,g,c))};a.create=function(b,c,d){b=new a(b,c,d);b.$10();return b};return a}();e.exports=a}),null);
__d("MJewel",["CSS","DOM","MJewelFlyout","Stratcom","URI","$","eventsMixinDeprecated","intlNumUtils"],(function(a,b,c,d,e,f){__p&&__p();var g=0;a=function(){"use strict";__p&&__p();a.create=function(b,c){b=new a(b,c);b._init();return b};function a(c,d){this._count=0,this._sigil=c,this.options=d||{},this._jewelNode=b("$")(a.JEWEL_NAV_NODE_ID),this._softState=d.softState||"jewel="+g++,this._contentsSigil=d.contentsSigil||"contents",this._additionalPaths=d.additionalPaths||[],this._noPopover=!!d.noPopover,this._preventClearBadge=!!d.preventClearBadge,this._count=d.count||0}var c=a.prototype;c._init=function(){if(!this._noPopover){var a=b("MJewelFlyout").create(this._getJewelElement(),this._getFlyoutElement(),{sigil:this._sigil,softState:this._softState,pos:this.options.pos});a.addOpenListener(this.handleViewedContent.bind(this));this._flyout=a}b("Stratcom").listen("m:history:change",null,this._updateJewelsOnHistoryChange.bind(this))};c._updateJewelsOnHistoryChange=function(a){a.getData().soft===this._softState?this._flyout&&this._flyout.open():this._flyout&&this._flyout.close(),this._updateIsJewelActive(a)};c.isInitialized=function(){return!!b("DOM").scry(this._jewelNode,"*",this._contentsSigil)[0]};c._getJewelElement=function(){return b("DOM").find(this._jewelNode,"div",this._sigil)};c._getCountElement=function(){return b("DOM").find(this._getJewelElement(),"span","count")};c._getContentsElement=function(){return b("DOM").find(this._getJewelElement(),"*",this._contentsSigil)};c._getFlyoutElement=function(){return b("DOM").find(this._getJewelElement(),"*","flyout")};c.getCount=function(){return this._count};c.getFlyout=function(){return this._flyout};c._updateCountElement=function(){var a=this._getJewelCount();b("DOM").setContent(this._getCountElement(),b("intlNumUtils").formatNumberWithThousandDelimiters(a));a=this._getJewelElement();var c=this._count>0;b("CSS").conditionClass(a,"noCount",!c);b("CSS").conditionClass(a,"hasCount",c)};c._updateIsJewelActive=function(a){var c=new(b("URI"))(a.getData().path);c=c.getPath();a=a.getData().soft;c=!a&&this._additionalPaths.includes(c);a=a===this._softState;b("CSS").conditionClass(this._getJewelElement(),"popoverOpen",a||c)};c.setCount=function(a){if(a<0)return;this._count=a;this._updateCountElement()};c.updateCount=function(a,b){!this.isOpen()?this.setCount(a):a&&b()};c.handleViewedContent=function(){this.getCount()>0&&this.isInitialized()?(this._preventClearBadge||this.setCount(0),this.invoke("cleared")):this.invoke("jewel_click")};c._getJewelCount=function(){if(this._count>0)return this._count;else return 0};c.isOpen=function(){return!!this._flyout&&this._flyout.isOpen()};c.reregisterListeners=function(){var a=this._flyout;a&&a.reregisterListeners()};return a}();a.JEWEL_NAV_NODE_ID="mJewelNav";b("eventsMixinDeprecated")(a,["cleared","jewel_click"]);e.exports=a}),null);
__d("MJewels",[],(function(a,b,c,d,e,f){e.exports={REQUESTS:"requests",MESSAGES:"messages",NOTIFICATIONS:"notifications",SEARCH:"search",MORE:"more",NEWS_FEED:"news-feed",BOOKMARKS:"bookmarks",VIDEOS:"videos",CASUAL_GROUPS:"casual_groups",MARKETPLACE:"marketplace"}}),null);
__d("MRedirectToNative",["Event","MPageController","QE2Logger","URI","goURI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h=null;function i(){h&&(h.remove(),h=null)}function j(){if(g)return;g=!0;b("QE2Logger").logExposureForUser("mtouch_messenger_diode_post_return")}function k(){j(),i(),b("setTimeoutAcrossTransitions")(function(){b("MPageController").load("/home.php")},5)}function l(){h=b("Event").listen(window,"blur",function(){i(),k()}),b("setTimeoutAcrossTransitions")(i,5e3)}function a(a,c){j();i();if(c&&c.returnToFeed===!0){c=!!c.newTab;var d=a.toString();l();c?b("URI").goURIOnNewWindow(d):b("goURI")(d)}else a.go()}function c(a,c){c=!!(c&&c.returnToFeed===!0);c&&a.setAttribute("target","_blank");c=c?l:j;b("Event").listen(a,"click",c)}e.exports={redirect:a,setReturnToFeed:c}}),null);
__d("MSiteDiodeSourceGroup",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER:"messenger",MLITE:"mlite"})}),null);
__d("MSiteMessengerDiodeLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({FAST_APP_SWITCH_ATTEMPT:"fast_app_switch_attempt",FAST_APP_SWITCH_FAIL:"fast_app_switch_fail",DIODE_ROADBLOCK_QP_LOAD_FAIL:"diode_roadblock_qp_load_fail",DIODE_ROADBLOCK_QP_LOAD_SUCCESS:"diode_roadblock_qp_load_success"})}),null);
__d("MessengerLiteDiodeEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PLAY_STORE_INSTALL_CLICK:"play_click",SIDELOAD_INSTALL_CLICK:"sideload_click",FAST_SWITCH_ATTEMPT:"fastswitch_attempt",FAST_SWITCH_FAIL:"fastswitch_fail"})}),null);
__d("MessengerLiteDiodeTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerLiteDiodeLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setMsiteDiodePromotableApp=function(a){this.$1.msite_diode_promotable_app=a;return this};c.setMsiteDiodeStateFromClient=function(a){this.$1.msite_diode_state_from_client=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,msite_diode_promotable_app:!0,msite_diode_state_from_client:!0,source:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("XMSiteDiodeMessengerLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/messenger/log/",{log:{type:"Bool",defaultValue:!1}})}),null);
__d("MessagesJewelNativeAppRedirect",["DOM","Event","MessengerLiteDiodeEvent","MessengerLiteDiodeTypedLogger","MHistory","MJewel","MJewels","MRedirectToNative","MRequest","MSiteDiodeSourceGroup","MSiteMessengerDiodeLoggerEvent","MSiteMessengerDiodeTypedLogger","Run","Stratcom","URI","XMSiteDiodeMessengerLoggingController","$"],(function(a,b,c,d,e,f){__p&&__p();function g(a){function c(b){b.getData().jewel==="messages"&&a()}b("Stratcom").listen("m:jewel:flyout:open",null,c)}function h(a){var c=b("$")(b("MJewel").JEWEL_NAV_NODE_ID);c=b("DOM").find(c,"div","messages");if(!c)return;c=b("DOM").find(c,"*","icon");b("Event").listen(c,"click",a)}function i(a,c,d,e,f,g,h,i){var j=b("XMSiteDiodeMessengerLoggingController").getURIBuilder().setBool("log",!0).getURI();new(b("MRequest"))(j).send();i=!!(i&&!f);if(d){h===b("MSiteDiodeSourceGroup").MLITE?new(b("MessengerLiteDiodeTypedLogger"))().setEvent(b("MessengerLiteDiodeEvent").FAST_SWITCH_ATTEMPT).setMsiteDiodeStateFromClient(e).setMsiteDiodePromotableApp(g).log():new(b("MSiteMessengerDiodeTypedLogger"))().setEvent(b("MSiteMessengerDiodeLoggerEvent").FAST_APP_SWITCH_ATTEMPT).setMessagingEntryPoint(c).setMsiteDiodeStateFromClient(e).log();j=new(b("URI"))(a);b("MRedirectToNative").redirect(j,{returnToFeed:i,newTab:f});f&&b("MHistory").popSoftState(b("MJewels").MESSAGES)}}a={registerRedirect:function(a,c,d,e,f,j,k,l,m,n){var o=function(){return i(a,c,d,e,f,j,k,l)},p=function(){m?h(o):g(o)};n?b("Run").onAfterLoad(p):p()}};e.exports=a}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/qp/action/log/",{qp_id:{type:"Int",required:!0},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}})}),null);
__d("MQuickPromotionEmbeddedInterstitial",["DOM","MRequest","Stratcom","XQuickPromotionSimpleLoggingController"],(function(a,b,c,d,e,f){__p&&__p();var g=!1;a=function(a,c,d){__p&&__p();if(g)return;g=!0;function e(c){b("Stratcom").removeCurrentListener();var d=c.getNode(a.promo);b("DOM").hide(d);d=b("DOM").find(c.getNode(a.jewel),"div",a.sibling);b("DOM").show(d);b("Stratcom").invoke("m:qp:embedded-interstitial:close")}function f(e){if(e.getData().jewel==a.jewel){b("Stratcom").removeCurrentListener();e=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",c).setStringToStringMap("qp_instance_log_data",d).setString("qp_event","view").getURI();e=new(b("MRequest"))(e);e.send()}}b("Stratcom").listen("click",a.close,e);b("Stratcom").listen("m:jewel:flyout:open",null,f)};f.main=a}),null);
__d("MPopoverClose",["Popover"],(function(a,b,c,d,e,f){a=function(){b("Popover")._activePopover&&b("Popover")._activePopover.close()};f.main=a}),null);