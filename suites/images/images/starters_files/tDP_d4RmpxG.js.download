if (self.CavalryLogger) { CavalryLogger.start_js(["oZZt6"]); }

__d("MHeadMeta",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={isExistsByName:function(a){return!!this.getByName(a)},getByName:function(a){__p&&__p();if(document.querySelector)return document.querySelector('head meta[name="'+a+'"]');var b=document.head||document.getElementsByTagName("head")[0];if(!b)return null;b=b.getElementsByTagName("meta");for(var c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("name");if(e===a)return d}return null}};e.exports=a}),null);
__d("MBrowserTheme",["MHeadMeta"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=!1,i=null;function j(){if(g)return g;g=b("MHeadMeta").getByName("theme-color");return g}a={set:function(a){var b=j();b&&(i===null&&!h&&(i=b.getAttribute("content")),i!==null&&(b.setAttribute("content",a),h=!0))},restore:function(){if(!h)return;var a=j();if(!a)return;i!==null&&(a.setAttribute("content",i),h=!1)}};e.exports=a}),null);
__d("MZoom",["MHeadMeta"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null,h=!1,i=function(){},j=null;function k(){if(g)return g;g=b("MHeadMeta").getByName("viewport");return g}a={enable:function(){__p&&__p();var a=k();if(a&&!h){var b=a.getAttribute("content");if(b!==null&&b!==void 0&&(b.indexOf("maximum-scale")!==-1||b.indexOf("user-scalable=no")!==-1)){var c=b.split(","),d=[];for(var e=0;e<c.length;e++)c[e].indexOf("maximum-scale")===-1&&c[e].indexOf("user-scalable=no")===-1&&d.push(c[e]);c=d.join(",");a.setAttribute("content",c);h=!0;j===null&&(j=function(){a.setAttribute("content",b),h=!1})}}return j||i}};e.exports=a}),null);
__d("MIOSAddToHomeScreenTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MIOSAddToHomeScreenLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MIOSAddToHomeScreenLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MIOSAddToHomeScreenLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MSinglePhotoPopupHistoryController",["MHistory","Stratcom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="photoview",h=null,i=null;function j(){h&&(h.remove(),h=null),i=null}b("Stratcom").listen("m:history:change",null,function(a){var c=b("MHistory").getState();c===g&&a.prevent()});b("Stratcom").listen("m:page:loading",null,function(a){b("Stratcom").invoke("m:photo:navigation",null,a)});a={onOpen:function(a,c){a=a?{redto:a.redirectURL}:null;b("MHistory").pushSoftState(g,a);i=c;h||(h=b("Stratcom").listen("popstate",null,function(){var a=i;j();a&&a()}))},onClose:function(){j(),b("MHistory").popSoftState(g)},replace:function(a){i=a}};e.exports=a}),null);
__d("MSinglePhotoPopupViewEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("MSwipe",["Event","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=!1,h={passive:!1};function i(a){var b=a.changedTouches?a.changedTouches[0]:a;return b.touches&&b.touches.length>1||a.targetTouches&&a.targetTouches.length>1?null:b}function j(a,b,c){__p&&__p();var d=c.startX;c=c.startY;var e=b.clientX;b=b.clientY;if(d===null||c===null||d===void 0||c===void 0)return null;e=e-d;d=b-c;b=Math.abs(e);c=Math.abs(d);var f=b>a;a=c>a;if(!f&&!a)return null;f=!0;b>c&&(f=!1);f?a=d<0?"up":"down":a=e<0?"left":"right";return a}function k(a,b,c,d){__p&&__p();var e=b.minDistance;return function(b){b=i(b);if(!b)return!1;var f=j(e,b,c);if(f){d({direction:f,element:a,touchEvent:b});return!0}return!1}}a={on:function(a,c,d){__p&&__p();c===void 0&&(c={minDistance:100,stopOnEvent:!1});var e={startX:null,startY:null},f=c.stopOnEvent,j=k(a,c,e,d),l=new(b("SubscriptionsHandler"))(),m=new(b("SubscriptionsHandler"))(),n=!1,o=function(){n=!0,m.release(),m.engage(),e.startX=null,e.startY=null},p=!1;c=function(){if(p)return;o();l.release();l.engage();p=!0};var q=function(a){if(n)return;o();j(a)},r=function(a){if(n)return;a=i(a);if(!a)return;var b=j(a);if(!b)return;f?o():(e.startX=a.clientX,e.startY=a.clientY)};d=function(c){o();n=!1;c=i(c);if(!c)return;e.startX=c.clientX;e.startY=c.clientY;m.addSubscriptions(b("Event").listen(a,"touchmove",r,h),b("Event").listen(a,"touchend",q,h),b("Event").listen(a,"touchcancel",q,h));g&&m.addSubscriptions(b("Event").listen(a,"mousemove",r,h),b("Event").listen(a,"mouseup",q,h))};l.addSubscriptions(b("Event").listen(a,"touchstart",d,h));g&&l.addSubscriptions(b("Event").listen(a,"mousedown",d,h));return c}};e.exports=a}),null);
__d("MSinglePhotoPopupViewController",["cx","CSS","DOM","Event","MBrowserTheme","MSinglePhotoPopupHistoryController","MSinglePhotoPopupViewEventEmitter","MSwipe","MViewport","MZoom","QE2Logger","ScriptPath","Stratcom","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=!1,i=null,j=null,k=null,l=!1,m=null,n=null,o="inline_photoview";function p(a){a.commentsPreview!==null&&b("DOM").show(a.commentsPreview),b("CSS").removeClass(a.cardElement,"active"),a.body&&b("CSS").removeClass(a.body,"active"),b("CSS").removeClass(a.footer,"active"),b("DOM").remove(a.closeButton),a.tagButton!==null&&b("DOM").remove(a.tagButton)}function q(a,c){__p&&__p();c===void 0&&(c=!1);a.openSubscriptions.release();a.openSubscriptions.engage();if(!a.open)return;c=!!c;b("clearTimeout")(n);var d=a.props;r(a,!0);k!==null&&(k(),k=null);b("MViewport").toggleBodyClass("animatedPhoto",!1);if(!c){p(d);b("MViewport").toggleBodyClass("_78cr",!1);b("MViewport").toggleBodyClass(d.rootClass,!1);b("MViewport").toggleBodyClass("decelerateChildren",!1);if(m!==void 0&&m!==null){c=b("ScriptPath").getScriptPath();c===o&&b("ScriptPath").set(m);m=null}i!==null&&(i(),i=null);j!==null&&(j(),j=null);b("MBrowserTheme").restore();b("MViewport").toggleHeader(!0);b("MViewport").scrollToNode(d.cardElement);b("MSinglePhotoPopupHistoryController").onClose();b("MSinglePhotoPopupViewEventEmitter").emit("close")}else b("setTimeoutAcrossTransitions")(function(){p(d)},0);a.open=!1}function r(a,c){c===void 0&&(c=!1);l=!l;a=a.props;c||!l?b("CSS").removeClass(a.cardElement,"distractionFree"):b("CSS").addClass(a.cardElement,"distractionFree")}function s(a){a.open?r(a):t(a)}function t(a,c){__p&&__p();c===void 0&&(c=!1);if(a.open)return;c=!!c;a.openSubscriptions.release();a.openSubscriptions.engage();var d=a.props;u();l=!1;a.openSubscriptions.addSubscriptions(b("MSinglePhotoPopupViewEventEmitter").addListener("replace",function(){q(a,!0)}));if(c)b("MViewport").toggleBodyClass("animatedPhoto",!1),b("MSinglePhotoPopupHistoryController").replace(function(){q(a)}),d.enableAnimations&&(n=b("setTimeoutAcrossTransitions")(function(){b("MViewport").toggleBodyClass("animatedPhoto",!0),n=null},500));else{c=d.href;var e=null;c!==null&&c!==void 0&&(e={redirectURL:c});b("MSinglePhotoPopupHistoryController").onOpen(e,function(){q(a)});m=b("ScriptPath").getScriptPath();b("ScriptPath").set(o);j=b("MZoom").enable();b("MBrowserTheme").set("black");b("MViewport").toggleBodyClass("_78cr",!0);b("MViewport").toggleBodyClass(d.rootClass,!0);b("MViewport").toggleBodyClass("decelerateChildren",!0);d.enableAnimations&&b("MViewport").toggleBodyClass("animatedPhoto",!0);i=b("MViewport").disableScroll(!0,!0);b("MViewport").toggleHeader(!1)}d.commentsPreview!==null&&b("DOM").hide(d.commentsPreview);b("CSS").addClass(d.cardElement,"active");d.body&&b("CSS").addClass(d.body,"active");b("CSS").addClass(d.footer,"active");b("DOM").appendContent(d.cardElement,d.closeButton);d.tagButton!==null&&b("DOM").appendContent(d.cardElement,d.tagButton);c=a.props.closeOnSwipe||!!a.props.onSwipeTo;c&&(k=b("MSwipe").on(a.element,{minDistance:30,stopOnEvent:!0},function(b){a.props.closeOnSwipe&&b.direction==="up"?q(a):a.props.onSwipeTo&&(b.direction==="left"?a.props.onSwipeTo(!0):b.direction==="right"&&a.props.onSwipeTo(!1))}));a.open=!0;d.onOpen&&d.onOpen();b("MSinglePhotoPopupViewEventEmitter").emit("open")}function u(){if(h)return;b("QE2Logger").logExposureForUser("mtouch_native_photo_consumption");h=!0}function a(a){__p&&__p();var c={open:!1,element:a.element,props:a,openSubscriptions:new(b("SubscriptionsHandler"))()};b("CSS").addClass(a.cardElement,"_78cs");a.body&&b("CSS").addClass(a.body,"_78ct");b("CSS").addClass(a.footer,"_78ct");b("CSS").addClass(a.footer,"_78cu");a.commentsPreview&&b("CSS").addClass(a.commentsPreview,"_78ct");b("CSS").addClass(a.closeButton,"_78co");a.enableAnimations&&b("CSS").addClass(a.cardElement,"animated");var d=new(b("SubscriptionsHandler"))(),e=function(){d.release(),d.engage(),q(c)},f=null;d.addSubscriptions(b("Event").listen(a.closeButton,"click",function(){q(c)}),b("Stratcom").listen("m:photo:navigation",null,e));a={onImageElementUpdated:function(a,e){e===void 0&&(e=!1);if(!e&&a===c.element)return;c.element=a;f!==null&&f.remove();f=b("Event").listen(a,"click",function(){s(c)});d.addSubscriptions(f)},release:e,openPopup:function(){t(c)},closePopup:function(){q(c)},replaceOpened:function(){b("MSinglePhotoPopupViewEventEmitter").emit("replace"),t(c,!0)}};a.onImageElementUpdated(c.element,!0);return a}function c(a){__p&&__p();var c=null,d=null,e={onImageElementUpdated:function(a,e){e===void 0&&(e=!1);if(!e&&d===a)return;this.release();d=a;c=b("Event").listen(a,"click",u)},release:function(){d=null,c&&(c.remove(),c=null)}};e.onImageElementUpdated(a);return e}d={initNativeView:a,initControlTracker:c};e.exports=d}),null);
__d("MSinglePhotoPopupController",["cx","CSS","DOM","MSinglePhotoPopupViewController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){if(!a)return null;var b=a.getAttribute("data-sigil");if(b!==void 0&&b!==null&&b.indexOf("story-div")!==-1)return a;b=a.parentElement;return!b?null:h(b)}function i(a){a&&b("CSS").addClass(a,"_78c-");return a}function j(a){return a.length?a[0]:null}function k(a){__p&&__p();var c=a.element,d=a.tagSupported,e=a.linkElement,f=a.closeButton;a=a.href;if(!f)return null;b("DOM").remove(f);var g=h(c);if(!g)return null;var k=g.getElementsByClassName("_77kd"),l=j(k);k=b("DOM").scry(g,"footer");var m=j(k);k=g.getElementsByClassName("_7dc9");k=j(k);if(!k||!m)return;var n=b("DOM").scry(m,"div","comments-preview");n=n.length===0?null:n[0];d=d?i(e):null;e={element:c,feedItemElement:g,header:l,body:k,footer:m,commentsPreview:n,closeButton:f,tagButton:d,href:a};return e}function l(a){var c=a.element;a=a.linkElement;b("DOM").remove(c);b("DOM").appendContent(a,c);b("MSinglePhotoPopupViewController").initControlTracker(a)}function m(a){var c=k(a),d=a.closeButton;if(!c||!d)return l(a);b("MSinglePhotoPopupViewController").initNativeView({rootClass:"_7ao-",element:a.element,enableAnimations:a.enableAnimations,closeOnSwipe:a.closeOnSwipe,href:a.href,onOpen:null,cardElement:c.feedItemElement,header:c.header,body:c.body,footer:c.footer,commentsPreview:c.commentsPreview,tagButton:c.tagButton,closeButton:d})}a={init:function(a){a.enabled?m(a):b("MSinglePhotoPopupViewController").initControlTracker(a.linkElement)}};e.exports=a}),null);
__d("MIOSAddToHomeScreen",["MHeadMeta","MIOSAddToHomeScreenTypedLogger"],(function(a,b,c,d,e,f){"use strict";var g={};e.exports={isFullScreenTagExists:function(){return b("MHeadMeta").isExistsByName("apple-mobile-web-app-capable")},isFullScreen:function(){return!!window.navigator.standalone},logActivity:function(a){if(g[a])return;new(b("MIOSAddToHomeScreenTypedLogger"))().setEvent(a).log();g[a]=!0}}}),null);
__d("MIOSAddToHomeScreenController",["MIOSAddToHomeScreen"],(function(a,b,c,d,e,f){"use strict";e.exports={init:function(){b("MIOSAddToHomeScreen").isFullScreen()&&b("MIOSAddToHomeScreen").logActivity("usage")}}}),null);