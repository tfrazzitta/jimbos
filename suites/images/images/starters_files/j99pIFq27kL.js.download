if (self.CavalryLogger) { CavalryLogger.start_js(["ooiVe"]); }

__d("MUFIConversationGuideRow.react",["cx","ConversationGuideUIEvent","ConversationGuideUITypedLogger","MUFIConversationGuideBehaviorType","MUFIConversationGuideEmojiItem.react","MUFIConversationGuideFixedList.react","MUFIConversationGuideHScroll.react","MUFIConversationGuideMentionItem.react","MUFIConversationGuideStickerItem.react","MUFIConversationGuideTextItem.react","React","RelayModern","MUFIConversationGuideRowQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=new Map(),d.state={behavior:b("MUFIConversationGuideBehaviorType")(),hidden:!1,maskedSuggestions:new Set()},d.$3=function(a){if(!a)return;d.props.handleAddText(a,d.state.behavior.clickToSend)},d.$4=function(a){d.props.handleAddMention(a,d.state.behavior.clickToSend)},d.$5=function(a){if(!a)return;d.props.handleAddSticker(a,d.state.behavior.clickToSend)},d.$6=function(a){d.state.behavior.dismissOnSelect&&d.setState({hidden:!0}),d.state.behavior.removeSuggestionOnSelect&&a&&d.setState(function(b){b=new Set(b.maskedSuggestions);a&&b.add(a);return{maskedSuggestions:b}})},d.$7=function(){new(b("ConversationGuideUITypedLogger"))().setEvent(b("ConversationGuideUIEvent").HARD_DISMISS).setFeedbackID(d.props.ftentidentifier).setTrackingID(d.props.trackingID).setSessionID(d.props.sessionID).log(),d.setState({hidden:!0})},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){if(a.data){var d,e=((d=a.data)!=null?(d=d.feedback)!=null?(d=d.suggested_feedback)!=null?d.guide_suggestions:d:d:d)||[];a=b("MUFIConversationGuideBehaviorType")((d=a.data)!=null?(d=d.feedback)!=null?(d=d.suggested_feedback)!=null?d.guide_behavior:d:d:d);d=e.filter(function(a){return a.__typename===e[0].__typename}).filter(function(a){return a.__typename==="EmojiSuggestion"||a.__typename==="TextSuggestion"||a.__typename==="User"||a.__typename==="Sticker"});return babelHelpers["extends"]({},c,{behavior:a,hidden:c.hidden||d.length===c.maskedSuggestions.size})}return c};var d=c.prototype;d.$2=function(a){return a.__typename==="TextSuggestion"||a.__typename==="User"};d.componentDidUpdate=function(a){this.props.composerHasText===!0&&a.composerHasText===!1&&this.state.behavior.dismissOnType&&new(b("ConversationGuideUITypedLogger"))().setEvent(b("ConversationGuideUIEvent").SOFT_DISMISS).setFeedbackID(this.props.ftentidentifier).setTrackingID(this.props.trackingID).setSessionID(this.props.sessionID).log()};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.error;c=c.data;if(d||!c||this.state.hidden||this.props.composerHasText&&this.state.behavior.dismissOnType)return null;var e=((d=c)!=null?(d=d.feedback)!=null?(d=d.suggested_feedback)!=null?d.guide_suggestions:d:d:d)||[];c=e.filter(function(a){return a.__typename===e[0].__typename}).map(function(c,d){__p&&__p();var e="carousel_item_"+(c.id||""),f;switch(c.__typename){case"User":f=b("MUFIConversationGuideMentionItem.react");break;case"Sticker":f=b("MUFIConversationGuideStickerItem.react");break;case"EmojiSuggestion":f=b("MUFIConversationGuideEmojiItem.react");break;case"TextSuggestion":f=b("MUFIConversationGuideTextItem.react");break;default:return null}a.$1.has(e)||a.$1.set(e,b("React").createRef());var g=a.$1.get(e);return b("React").createElement(f,{onMouseDown:a.props.handleMouseDown,ftentidentifier:a.props.ftentidentifier,handleMentionAdd:a.$4,handleStickerAdd:a.$5,handleTextAdd:a.$3,item:c,key:e,onClickHandled:a.$6,rankedIndex:d,ref:g,trackingID:a.props.trackingID,sessionID:a.props.sessionID})}).filter(function(b){return b&&b.key&&!a.state.maskedSuggestions.has(b.key)});this.$2(e[0])?d=b("React").createElement(b("MUFIConversationGuideHScroll.react"),{behavior:this.state.behavior,key:"hscroll",keyRefMap:this.$1,onCloseButtonClick:this.$7},c):d=b("React").createElement(b("MUFIConversationGuideFixedList.react"),{behavior:this.state.behavior,key:"fixedlist",keyRefMap:this.$1,onCloseButtonClick:this.$7},c);c=[b("React").createElement("div",{className:"_7an2",key:"headerText"},this.state.behavior.headerText),b("React").createElement("div",{className:"_7an3",key:"closeButton"},b("React").createElement("button",{onClick:this.$7},"X"))];return b("React").createElement("div",{className:"_7an8"},b("React").createElement("div",{className:"_7an9"},b("React").createElement("div",{className:"_7ana"},this.state.behavior.showHeader?c:null),d))};return c}(b("React").Component);a.Query=function(){return b("MUFIConversationGuideRowQuery.graphql")};e.exports=a}),null);